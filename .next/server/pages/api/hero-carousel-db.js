"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/hero-carousel-db";
exports.ids = ["pages/api/hero-carousel-db"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhero-carousel-db&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Chero-carousel-db.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhero-carousel-db&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Chero-carousel-db.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_hero_carousel_db_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\hero-carousel-db.js */ \"(api)/./pages/api/hero-carousel-db.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_hero_carousel_db_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_hero_carousel_db_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/hero-carousel-db\",\n        pathname: \"/api/hero-carousel-db\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_hero_carousel_db_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmhlcm8tY2Fyb3VzZWwtZGImcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2hlcm8tY2Fyb3VzZWwtZGIuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDOEQ7QUFDOUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXdzYWZlcGxhbnRzLz8yZGYxIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcaGVyby1jYXJvdXNlbC1kYi5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2hlcm8tY2Fyb3VzZWwtZGJcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9oZXJvLWNhcm91c2VsLWRiXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhero-carousel-db&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Chero-carousel-db.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createSupabaseClient: () => (/* binding */ createSupabaseClient),\n/* harmony export */   getSupabaseClient: () => (/* binding */ getSupabaseClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// Standardized Supabase client configuration\nfunction createSupabaseClient() {\n    const supabaseUrl = \"https://rczfbgzghwiqpxihlexs.supabase.co\" || 0;\n    const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || process.env.SUPABASE_ANON_KEY;\n    // Connection check\n    if (!supabaseUrl) {\n        console.error(\"CRITICAL: NEXT_PUBLIC_SUPABASE_URL or SUPABASE_URL environment variable is missing\");\n        throw new Error(\"Missing Supabase URL configuration\");\n    }\n    if (!supabaseKey) {\n        console.error(\"CRITICAL: SUPABASE_SERVICE_ROLE_KEY or SUPABASE_ANON_KEY environment variable is missing\");\n        throw new Error(\"Missing Supabase Key configuration\");\n    }\n    console.log(\"✅ Supabase 已连接 - URL:\", supabaseUrl.substring(0, 20) + \"...\");\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseKey);\n}\n// Export singleton instance for reuse\nlet supabaseInstance = null;\nfunction getSupabaseClient() {\n    if (!supabaseInstance) {\n        supabaseInstance = createSupabaseClient();\n    }\n    return supabaseInstance;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFxRDtBQUVyRCw2Q0FBNkM7QUFDdEMsU0FBU0M7SUFDZCxNQUFNQyxjQUFjQywwQ0FBb0MsSUFBSUEsQ0FBd0I7SUFDcEYsTUFBTUksY0FBY0osUUFBUUMsR0FBRyxDQUFDSSx5QkFBeUIsSUFBSUwsUUFBUUMsR0FBRyxDQUFDSyxpQkFBaUI7SUFFMUYsbUJBQW1CO0lBQ25CLElBQUksQ0FBQ1AsYUFBYTtRQUNoQlEsUUFBUUMsS0FBSyxDQUFDO1FBQ2QsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsSUFBSSxDQUFDTCxhQUFhO1FBQ2hCRyxRQUFRQyxLQUFLLENBQUM7UUFDZCxNQUFNLElBQUlDLE1BQU07SUFDbEI7SUFFQUYsUUFBUUcsR0FBRyxDQUFDLHlCQUF5QlgsWUFBWVksU0FBUyxDQUFDLEdBQUcsTUFBTTtJQUVwRSxPQUFPZCxtRUFBWUEsQ0FBQ0UsYUFBYUs7QUFDbkM7QUFFQSxzQ0FBc0M7QUFDdEMsSUFBSVEsbUJBQW1CO0FBQ2hCLFNBQVNDO0lBQ2QsSUFBSSxDQUFDRCxrQkFBa0I7UUFDckJBLG1CQUFtQmQ7SUFDckI7SUFDQSxPQUFPYztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2FmZXBsYW50cy8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcyc7XHJcblxyXG4vLyBTdGFuZGFyZGl6ZWQgU3VwYWJhc2UgY2xpZW50IGNvbmZpZ3VyYXRpb25cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVN1cGFiYXNlQ2xpZW50KCkge1xyXG4gIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTDtcclxuICBjb25zdCBzdXBhYmFzZUtleSA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfQU5PTl9LRVk7XHJcblxyXG4gIC8vIENvbm5lY3Rpb24gY2hlY2tcclxuICBpZiAoIXN1cGFiYXNlVXJsKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdDUklUSUNBTDogTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIG9yIFNVUEFCQVNFX1VSTCBlbnZpcm9ubWVudCB2YXJpYWJsZSBpcyBtaXNzaW5nJyk7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgU3VwYWJhc2UgVVJMIGNvbmZpZ3VyYXRpb24nKTtcclxuICB9XHJcblxyXG4gIGlmICghc3VwYWJhc2VLZXkpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0NSSVRJQ0FMOiBTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIG9yIFNVUEFCQVNFX0FOT05fS0VZIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIG1pc3NpbmcnKTtcclxuICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBTdXBhYmFzZSBLZXkgY29uZmlndXJhdGlvbicpO1xyXG4gIH1cclxuXHJcbiAgY29uc29sZS5sb2coJ+KchSBTdXBhYmFzZSDlt7Lov57mjqUgLSBVUkw6Jywgc3VwYWJhc2VVcmwuc3Vic3RyaW5nKDAsIDIwKSArICcuLi4nKTtcclxuICBcclxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSk7XHJcbn1cclxuXHJcbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2UgZm9yIHJldXNlXHJcbmxldCBzdXBhYmFzZUluc3RhbmNlID0gbnVsbDtcclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlQ2xpZW50KCkge1xyXG4gIGlmICghc3VwYWJhc2VJbnN0YW5jZSkge1xyXG4gICAgc3VwYWJhc2VJbnN0YW5jZSA9IGNyZWF0ZVN1cGFiYXNlQ2xpZW50KCk7XHJcbiAgfVxyXG4gIHJldHVybiBzdXBhYmFzZUluc3RhbmNlO1xyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJjcmVhdGVTdXBhYmFzZUNsaWVudCIsInN1cGFiYXNlVXJsIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1VSTCIsInN1cGFiYXNlS2V5IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIlNVUEFCQVNFX0FOT05fS0VZIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJsb2ciLCJzdWJzdHJpbmciLCJzdXBhYmFzZUluc3RhbmNlIiwiZ2V0U3VwYWJhc2VDbGllbnQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./lib/supabase.js\n");

/***/ }),

/***/ "(api)/./pages/api/hero-carousel-db.js":
/*!***************************************!*\
  !*** ./pages/api/hero-carousel-db.js ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/supabase */ \"(api)/./lib/supabase.js\");\n\n\n\nasync function handler(req, res) {\n    try {\n        console.log(\"Hero carousel API called:\", req.method);\n        if (req.method === \"GET\") {\n            console.log(\"Reading hero carousel data from database\");\n            try {\n                const supabase1 = (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_2__.createSupabaseClient)();\n                const { data, error } = await supabase1.from(\"hero_carousel\").select(\"*\").order(\"created_at\", {\n                    ascending: false\n                }).limit(1);\n                if (error) {\n                    console.error(\"Database read error:\", error);\n                    // Fallback to default data\n                    return res.status(200).json(getDefaultHeroData());\n                }\n                if (data && data.length > 0) {\n                    const heroData = data[0].content;\n                    console.log(\"Found hero data in database:\", heroData);\n                    // Convert image paths to new format\n                    if (heroData.slides && Array.isArray(heroData.slides)) {\n                        heroData.slides = heroData.slides.map((slide)=>({\n                                ...slide,\n                                imageUrl: validateImagePath(convertImagePath(slide.imageUrl))\n                            }));\n                    }\n                    console.log(\"Converted hero data:\", heroData);\n                    return res.status(200).json(heroData);\n                } else {\n                    console.log(\"No hero data found, using default\");\n                    return res.status(200).json(getDefaultHeroData());\n                }\n            } catch (dbError) {\n                console.error(\"Database connection error:\", dbError);\n                return res.status(200).json(getDefaultHeroData());\n            }\n        }\n        if (req.method === \"POST\") {\n            console.log(\"Saving hero carousel data to database\");\n            const { slides } = req.body;\n            console.log(\"Received slides:\", slides);\n            if (!slides || !Array.isArray(slides)) {\n                console.error(\"Invalid slides data:\", slides);\n                return res.status(400).json({\n                    error: \"Invalid slides data\"\n                });\n            }\n            // 确保总是有3个slide\n            const validSlides = [];\n            for(let i = 0; i < 3; i++){\n                const slide = slides[i];\n                validSlides.push(slide || {\n                    imageUrl: `/images/hero-${i + 1}.jpg`,\n                    title: `Slide ${i + 1}`,\n                    subtitle: \"Default subtitle\",\n                    link: \"\"\n                });\n            }\n            const heroData = {\n                slides: validSlides,\n                updatedAt: new Date().toISOString()\n            };\n            console.log(\"Hero data to save:\", heroData);\n            try {\n                // First, try to update existing record\n                const { data: existingData, error: fetchError } = await supabase.from(\"hero_carousel\").select(\"*\").order(\"created_at\", {\n                    ascending: false\n                }).limit(1);\n                if (fetchError) {\n                    console.error(\"Fetch error:\", fetchError);\n                    return res.status(500).json({\n                        error: \"Database fetch error: \" + fetchError.message\n                    });\n                }\n                if (existingData && existingData.length > 0) {\n                    // Update existing record\n                    const { data: updateData, error: updateError } = await supabase.from(\"hero_carousel\").update({\n                        content: heroData\n                    }).eq(\"id\", existingData[0].id);\n                    if (updateError) {\n                        console.error(\"Update error:\", updateError);\n                        return res.status(500).json({\n                            error: \"Database update error: \" + updateError.message\n                        });\n                    }\n                    console.log(\"Hero data updated successfully\");\n                } else {\n                    // Insert new record\n                    const { data: insertData, error: insertError } = await supabase.from(\"hero_carousel\").insert({\n                        content: heroData\n                    });\n                    if (insertError) {\n                        console.error(\"Insert error:\", insertError);\n                        return res.status(500).json({\n                            error: \"Database insert error: \" + insertError.message\n                        });\n                    }\n                    console.log(\"Hero data inserted successfully\");\n                }\n                return res.status(200).json(heroData);\n            } catch (dbError) {\n                console.error(\"Database operation error:\", dbError);\n                return res.status(500).json({\n                    error: \"Database operation error: \" + dbError.message\n                });\n            }\n        }\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    } catch (error) {\n        console.error(\"Hero carousel API error:\", error);\n        return res.status(500).json({\n            error: \"Internal server error: \" + error.message\n        });\n    }\n}\nfunction getDefaultHeroData() {\n    return {\n        slides: [\n            {\n                imageUrl: \"/uploads/20250530-190020.jpg\",\n                title: \"Cat-Safe Plants for Your Home\",\n                subtitle: \"Create a beautiful, pet-friendly living space\",\n                link: \"/plants/safe\"\n            },\n            {\n                imageUrl: \"/uploads/_247026d4-f09b-4307-9d55-65b40bd2813c.jpg\",\n                title: \"Toxic Plants to Avoid\",\n                subtitle: \"Protect your feline friends from harmful plants\",\n                link: \"/plants/toxic\"\n            },\n            {\n                imageUrl: \"/uploads/7ae0aff1-4b60-4c05-aa34-fcd6a9ea3dd2_7930717a90c33c714f1ae8d742554593_ComfyUI_033fc57d_00001_.png\",\n                title: \"Plant Care Guide\",\n                subtitle: \"Learn how to care for your green companions\",\n                link: \"/plants/caution\"\n            }\n        ]\n    };\n}\n// Function to convert old image paths to new paths\nfunction convertImagePath(imageUrl) {\n    if (!imageUrl) return imageUrl;\n    // Convert /images/plants/ to /uploads/\n    if (imageUrl.startsWith(\"/images/plants/\")) {\n        const filename = imageUrl.split(\"/\").pop();\n        return `/uploads/${filename}`;\n    }\n    // Convert /images/ to /uploads/\n    if (imageUrl.startsWith(\"/images/\") && !imageUrl.startsWith(\"/images/plants/\")) {\n        const filename = imageUrl.split(\"/\").pop();\n        return `/uploads/${filename}`;\n    }\n    return imageUrl; // Keep /uploads/ unchanged\n}\n// Function to check if file exists and return fallback if needed\nfunction validateImagePath(imageUrl) {\n    if (!imageUrl) return \"/images/hero-1.jpg\";\n    // For production, we can't check filesystem, so use known good images\n    const knownValidImages = [\n        \"/uploads/20250530-190020.jpg\",\n        \"/uploads/_247026d4-f09b-4307-9d55-65b40bd2813c.jpg\",\n        \"/uploads/7ae0aff1-4b60-4c05-aa34-fcd6a9ea3dd2_7930717a90c33c714f1ae8d742554593_ComfyUI_033fc57d_00001_.png\"\n    ];\n    // Handle Supabase storage URLs\n    if (imageUrl.includes(\"supabase.co/storage/v1/object/public/uploads/\")) {\n        console.log(\"Found Supabase URL, keeping as is:\", imageUrl);\n        return imageUrl; // Keep Supabase URLs as they are\n    }\n    if (knownValidImages.includes(imageUrl)) {\n        return imageUrl;\n    }\n    // For any other path, return a default image\n    console.log(\"Invalid image path, using fallback:\", imageUrl);\n    return \"/images/hero-1.jpg\";\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUtDLEdBQUc7UUFDeEMsT0FBTyxDQUFDLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0lBQy9CO0lBRUEsZ0NBQWdDO0lBQ2hDLElBQUkxQixTQUFTeUIsVUFBVSxDQUFDLGVBQWUsQ0FBQ3pCLFNBQVN5QixVQUFVLENBQUMsb0JBQW9CO1FBQzlFLE1BQU1DLFdBQVcxQixTQUFTMkIsS0FBSyxDQUFDLEtBQUtDLEdBQUc7UUFDeEMsT0FBTyxDQUFDLFNBQVMsRUFBRUYsU0FBUyxDQUFDO0lBQy9CO0lBRUEsT0FBTzFCLFVBQVUsMkJBQTJCO0FBQzlDO0FBRUEsaUVBQWlFO0FBQ2pFLFNBQVNDLGtCQUFrQkQsUUFBUTtJQUNqQyxJQUFJLENBQUNBLFVBQVUsT0FBTztJQUV0QixzRUFBc0U7SUFDdEUsTUFBTTZCLG1CQUFtQjtRQUN2QjtRQUNBO1FBQ0E7S0FDRDtJQUVELCtCQUErQjtJQUMvQixJQUFJN0IsU0FBUzhCLFFBQVEsQ0FBQyxrREFBa0Q7UUFDdEVwRCxRQUFRQyxHQUFHLENBQUMsc0NBQXNDcUI7UUFDbEQsT0FBT0EsVUFBVSxpQ0FBaUM7SUFDcEQ7SUFFQSxJQUFJNkIsaUJBQWlCQyxRQUFRLENBQUM5QixXQUFXO1FBQ3ZDLE9BQU9BO0lBQ1Q7SUFFQSw2Q0FBNkM7SUFDN0N0QixRQUFRQyxHQUFHLENBQUMsdUNBQXVDcUI7SUFDbkQsT0FBTztBQUNUIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2FmZXBsYW50cy8uL3BhZ2VzL2FwaS9oZXJvLWNhcm91c2VsLWRiLmpzP2FkOWUiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzIGZyb20gJ2ZzJ1xyXG5pbXBvcnQgcGF0aCBmcm9tICdwYXRoJ1xyXG5pbXBvcnQgeyBjcmVhdGVTdXBhYmFzZUNsaWVudCB9IGZyb20gJy4uLy4uL2xpYi9zdXBhYmFzZSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnNvbGUubG9nKCdIZXJvIGNhcm91c2VsIEFQSSBjYWxsZWQ6JywgcmVxLm1ldGhvZCk7XHJcbiAgICBcclxuICAgIGlmIChyZXEubWV0aG9kID09PSAnR0VUJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVhZGluZyBoZXJvIGNhcm91c2VsIGRhdGEgZnJvbSBkYXRhYmFzZScpO1xyXG4gICAgICBcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZVN1cGFiYXNlQ2xpZW50KCk7XHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdoZXJvX2Nhcm91c2VsJylcclxuICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgICAgICAubGltaXQoMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSByZWFkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgIC8vIEZhbGxiYWNrIHRvIGRlZmF1bHQgZGF0YVxyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGdldERlZmF1bHRIZXJvRGF0YSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGRhdGEgJiYgZGF0YS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICBjb25zdCBoZXJvRGF0YSA9IGRhdGFbMF0uY29udGVudDtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdGb3VuZCBoZXJvIGRhdGEgaW4gZGF0YWJhc2U6JywgaGVyb0RhdGEpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBDb252ZXJ0IGltYWdlIHBhdGhzIHRvIG5ldyBmb3JtYXRcclxuICAgICAgICAgIGlmIChoZXJvRGF0YS5zbGlkZXMgJiYgQXJyYXkuaXNBcnJheShoZXJvRGF0YS5zbGlkZXMpKSB7XHJcbiAgICAgICAgICAgIGhlcm9EYXRhLnNsaWRlcyA9IGhlcm9EYXRhLnNsaWRlcy5tYXAoc2xpZGUgPT4gKHtcclxuICAgICAgICAgICAgICAuLi5zbGlkZSxcclxuICAgICAgICAgICAgICBpbWFnZVVybDogdmFsaWRhdGVJbWFnZVBhdGgoY29udmVydEltYWdlUGF0aChzbGlkZS5pbWFnZVVybCkpXHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAgIH1cclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc29sZS5sb2coJ0NvbnZlcnRlZCBoZXJvIGRhdGE6JywgaGVyb0RhdGEpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGhlcm9EYXRhKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ05vIGhlcm8gZGF0YSBmb3VuZCwgdXNpbmcgZGVmYXVsdCcpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKGdldERlZmF1bHRIZXJvRGF0YSgpKTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBjb25uZWN0aW9uIGVycm9yOicsIGRiRXJyb3IpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihnZXREZWZhdWx0SGVyb0RhdGEoKSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09ICdQT1NUJykge1xyXG4gICAgICBjb25zb2xlLmxvZygnU2F2aW5nIGhlcm8gY2Fyb3VzZWwgZGF0YSB0byBkYXRhYmFzZScpO1xyXG4gICAgICBcclxuICAgICAgY29uc3QgeyBzbGlkZXMgfSA9IHJlcS5ib2R5O1xyXG4gICAgICBjb25zb2xlLmxvZygnUmVjZWl2ZWQgc2xpZGVzOicsIHNsaWRlcyk7XHJcbiAgICAgIFxyXG4gICAgICBpZiAoIXNsaWRlcyB8fCAhQXJyYXkuaXNBcnJheShzbGlkZXMpKSB7XHJcbiAgICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCBzbGlkZXMgZGF0YTonLCBzbGlkZXMpO1xyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuanNvbih7IGVycm9yOiAnSW52YWxpZCBzbGlkZXMgZGF0YScgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIC8vIOehruS/neaAu+aYr+aciTPkuKpzbGlkZVxyXG4gICAgICBjb25zdCB2YWxpZFNsaWRlcyA9IFtdO1xyXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDM7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IHNsaWRlID0gc2xpZGVzW2ldO1xyXG4gICAgICAgIHZhbGlkU2xpZGVzLnB1c2goc2xpZGUgfHwge1xyXG4gICAgICAgICAgaW1hZ2VVcmw6IGAvaW1hZ2VzL2hlcm8tJHtpICsgMX0uanBnYCxcclxuICAgICAgICAgIHRpdGxlOiBgU2xpZGUgJHtpICsgMX1gLFxyXG4gICAgICAgICAgc3VidGl0bGU6ICdEZWZhdWx0IHN1YnRpdGxlJyxcclxuICAgICAgICAgIGxpbms6ICcnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH1cclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGhlcm9EYXRhID0ge1xyXG4gICAgICAgIHNsaWRlczogdmFsaWRTbGlkZXMsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgICAgfTtcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKCdIZXJvIGRhdGEgdG8gc2F2ZTonLCBoZXJvRGF0YSk7XHJcbiAgICAgIFxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIEZpcnN0LCB0cnkgdG8gdXBkYXRlIGV4aXN0aW5nIHJlY29yZFxyXG4gICAgICAgIGNvbnN0IHsgZGF0YTogZXhpc3RpbmdEYXRhLCBlcnJvcjogZmV0Y2hFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgIC5mcm9tKCdoZXJvX2Nhcm91c2VsJylcclxuICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgLm9yZGVyKCdjcmVhdGVkX2F0JywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXHJcbiAgICAgICAgICAubGltaXQoMSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGZldGNoRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZldGNoIGVycm9yOicsIGZldGNoRXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdEYXRhYmFzZSBmZXRjaCBlcnJvcjogJyArIGZldGNoRXJyb3IubWVzc2FnZSB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKGV4aXN0aW5nRGF0YSAmJiBleGlzdGluZ0RhdGEubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgLy8gVXBkYXRlIGV4aXN0aW5nIHJlY29yZFxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhOiB1cGRhdGVEYXRhLCBlcnJvcjogdXBkYXRlRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXHJcbiAgICAgICAgICAgIC5mcm9tKCdoZXJvX2Nhcm91c2VsJylcclxuICAgICAgICAgICAgLnVwZGF0ZSh7IGNvbnRlbnQ6IGhlcm9EYXRhIH0pXHJcbiAgICAgICAgICAgIC5lcSgnaWQnLCBleGlzdGluZ0RhdGFbMF0uaWQpO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBpZiAodXBkYXRlRXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignVXBkYXRlIGVycm9yOicsIHVwZGF0ZUVycm9yKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdEYXRhYmFzZSB1cGRhdGUgZXJyb3I6ICcgKyB1cGRhdGVFcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygnSGVybyBkYXRhIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIC8vIEluc2VydCBuZXcgcmVjb3JkXHJcbiAgICAgICAgICBjb25zdCB7IGRhdGE6IGluc2VydERhdGEsIGVycm9yOiBpbnNlcnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcclxuICAgICAgICAgICAgLmZyb20oJ2hlcm9fY2Fyb3VzZWwnKVxyXG4gICAgICAgICAgICAuaW5zZXJ0KHsgY29udGVudDogaGVyb0RhdGEgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChpbnNlcnRFcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdJbnNlcnQgZXJyb3I6JywgaW5zZXJ0RXJyb3IpO1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0RhdGFiYXNlIGluc2VydCBlcnJvcjogJyArIGluc2VydEVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdIZXJvIGRhdGEgaW5zZXJ0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihoZXJvRGF0YSk7XHJcbiAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBvcGVyYXRpb24gZXJyb3I6JywgZGJFcnJvcik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdEYXRhYmFzZSBvcGVyYXRpb24gZXJyb3I6ICcgKyBkYkVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdIZXJvIGNhcm91c2VsIEFQSSBlcnJvcjonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcjogJyArIGVycm9yLm1lc3NhZ2UgfSk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBnZXREZWZhdWx0SGVyb0RhdGEoKSB7XHJcbiAgcmV0dXJuIHtcclxuICAgIHNsaWRlczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgaW1hZ2VVcmw6ICcvdXBsb2Fkcy8yMDI1MDUzMC0xOTAwMjAuanBnJyxcclxuICAgICAgICB0aXRsZTogJ0NhdC1TYWZlIFBsYW50cyBmb3IgWW91ciBIb21lJyxcclxuICAgICAgICBzdWJ0aXRsZTogJ0NyZWF0ZSBhIGJlYXV0aWZ1bCwgcGV0LWZyaWVuZGx5IGxpdmluZyBzcGFjZScsXHJcbiAgICAgICAgbGluazogJy9wbGFudHMvc2FmZSdcclxuICAgICAgfSxcclxuICAgICAge1xyXG4gICAgICAgIGltYWdlVXJsOiAnL3VwbG9hZHMvXzI0NzAyNmQ0LWYwOWItNDMwNy05ZDU1LTY1YjQwYmQyODEzYy5qcGcnLFxyXG4gICAgICAgIHRpdGxlOiAnVG94aWMgUGxhbnRzIHRvIEF2b2lkJywgXHJcbiAgICAgICAgc3VidGl0bGU6ICdQcm90ZWN0IHlvdXIgZmVsaW5lIGZyaWVuZHMgZnJvbSBoYXJtZnVsIHBsYW50cycsXHJcbiAgICAgICAgbGluazogJy9wbGFudHMvdG94aWMnXHJcbiAgICAgIH0sXHJcbiAgICAgIHtcclxuICAgICAgICBpbWFnZVVybDogJy91cGxvYWRzLzdhZTBhZmYxLTRiNjAtNGMwNS1hYTM0LWZjZDZhOWVhM2RkMl83OTMwNzE3YTkwYzMzYzcxNGYxYWU4ZDc0MjU1NDU5M19Db21meVVJXzAzM2ZjNTdkXzAwMDAxXy5wbmcnLFxyXG4gICAgICAgIHRpdGxlOiAnUGxhbnQgQ2FyZSBHdWlkZScsXHJcbiAgICAgICAgc3VidGl0bGU6ICdMZWFybiBob3cgdG8gY2FyZSBmb3IgeW91ciBncmVlbiBjb21wYW5pb25zJywgXHJcbiAgICAgICAgbGluazogJy9wbGFudHMvY2F1dGlvbidcclxuICAgICAgfVxyXG4gICAgXVxyXG4gIH07XHJcbn1cclxuXHJcbi8vIEZ1bmN0aW9uIHRvIGNvbnZlcnQgb2xkIGltYWdlIHBhdGhzIHRvIG5ldyBwYXRoc1xyXG5mdW5jdGlvbiBjb252ZXJ0SW1hZ2VQYXRoKGltYWdlVXJsKSB7XHJcbiAgaWYgKCFpbWFnZVVybCkgcmV0dXJuIGltYWdlVXJsO1xyXG4gIFxyXG4gIC8vIENvbnZlcnQgL2ltYWdlcy9wbGFudHMvIHRvIC91cGxvYWRzL1xyXG4gIGlmIChpbWFnZVVybC5zdGFydHNXaXRoKCcvaW1hZ2VzL3BsYW50cy8nKSkge1xyXG4gICAgY29uc3QgZmlsZW5hbWUgPSBpbWFnZVVybC5zcGxpdCgnLycpLnBvcCgpO1xyXG4gICAgcmV0dXJuIGAvdXBsb2Fkcy8ke2ZpbGVuYW1lfWA7XHJcbiAgfVxyXG4gIFxyXG4gIC8vIENvbnZlcnQgL2ltYWdlcy8gdG8gL3VwbG9hZHMvXHJcbiAgaWYgKGltYWdlVXJsLnN0YXJ0c1dpdGgoJy9pbWFnZXMvJykgJiYgIWltYWdlVXJsLnN0YXJ0c1dpdGgoJy9pbWFnZXMvcGxhbnRzLycpKSB7XHJcbiAgICBjb25zdCBmaWxlbmFtZSA9IGltYWdlVXJsLnNwbGl0KCcvJykucG9wKCk7XHJcbiAgICByZXR1cm4gYC91cGxvYWRzLyR7ZmlsZW5hbWV9YDtcclxuICB9XHJcbiAgXHJcbiAgcmV0dXJuIGltYWdlVXJsOyAvLyBLZWVwIC91cGxvYWRzLyB1bmNoYW5nZWRcclxufVxyXG5cclxuLy8gRnVuY3Rpb24gdG8gY2hlY2sgaWYgZmlsZSBleGlzdHMgYW5kIHJldHVybiBmYWxsYmFjayBpZiBuZWVkZWRcclxuZnVuY3Rpb24gdmFsaWRhdGVJbWFnZVBhdGgoaW1hZ2VVcmwpIHtcclxuICBpZiAoIWltYWdlVXJsKSByZXR1cm4gJy9pbWFnZXMvaGVyby0xLmpwZyc7XHJcbiAgXHJcbiAgLy8gRm9yIHByb2R1Y3Rpb24sIHdlIGNhbid0IGNoZWNrIGZpbGVzeXN0ZW0sIHNvIHVzZSBrbm93biBnb29kIGltYWdlc1xyXG4gIGNvbnN0IGtub3duVmFsaWRJbWFnZXMgPSBbXHJcbiAgICAnL3VwbG9hZHMvMjAyNTA1MzAtMTkwMDIwLmpwZycsXHJcbiAgICAnL3VwbG9hZHMvXzI0NzAyNmQ0LWYwOWItNDMwNy05ZDU1LTY1YjQwYmQyODEzYy5qcGcnLFxyXG4gICAgJy91cGxvYWRzLzdhZTBhZmYxLTRiNjAtNGMwNS1hYTM0LWZjZDZhOWVhM2RkMl83OTMwNzE3YTkwYzMzYzcxNGYxYWU4ZDc0MjU1NDU5M19Db21meVVJXzAzM2ZjNTdkXzAwMDAxXy5wbmcnXHJcbiAgXTtcclxuICBcclxuICAvLyBIYW5kbGUgU3VwYWJhc2Ugc3RvcmFnZSBVUkxzXHJcbiAgaWYgKGltYWdlVXJsLmluY2x1ZGVzKCdzdXBhYmFzZS5jby9zdG9yYWdlL3YxL29iamVjdC9wdWJsaWMvdXBsb2Fkcy8nKSkge1xyXG4gICAgY29uc29sZS5sb2coJ0ZvdW5kIFN1cGFiYXNlIFVSTCwga2VlcGluZyBhcyBpczonLCBpbWFnZVVybCk7XHJcbiAgICByZXR1cm4gaW1hZ2VVcmw7IC8vIEtlZXAgU3VwYWJhc2UgVVJMcyBhcyB0aGV5IGFyZVxyXG4gIH1cclxuICBcclxuICBpZiAoa25vd25WYWxpZEltYWdlcy5pbmNsdWRlcyhpbWFnZVVybCkpIHtcclxuICAgIHJldHVybiBpbWFnZVVybDtcclxuICB9XHJcbiAgXHJcbiAgLy8gRm9yIGFueSBvdGhlciBwYXRoLCByZXR1cm4gYSBkZWZhdWx0IGltYWdlXHJcbiAgY29uc29sZS5sb2coJ0ludmFsaWQgaW1hZ2UgcGF0aCwgdXNpbmcgZmFsbGJhY2s6JywgaW1hZ2VVcmwpO1xyXG4gIHJldHVybiAnL2ltYWdlcy9oZXJvLTEuanBnJztcclxufVxyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiY3JlYXRlU3VwYWJhc2VDbGllbnQiLCJoYW5kbGVyIiwicmVxIiwicmVzIiwiY29uc29sZSIsImxvZyIsIm1ldGhvZCIsInN1cGFiYXNlIiwiZGF0YSIsImVycm9yIiwiZnJvbSIsInNlbGVjdCIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJzdGF0dXMiLCJqc29uIiwiZ2V0RGVmYXVsdEhlcm9EYXRhIiwibGVuZ3RoIiwiaGVyb0RhdGEiLCJjb250ZW50Iiwic2xpZGVzIiwiQXJyYXkiLCJpc0FycmF5IiwibWFwIiwic2xpZGUiLCJpbWFnZVVybCIsInZhbGlkYXRlSW1hZ2VQYXRoIiwiY29udmVydEltYWdlUGF0aCIsImRiRXJyb3IiLCJib2R5IiwidmFsaWRTbGlkZXMiLCJpIiwicHVzaCIsInRpdGxlIiwic3VidGl0bGUiLCJsaW5rIiwidXBkYXRlZEF0IiwiRGF0ZSIsInRvSVNPU3RyaW5nIiwiZXhpc3RpbmdEYXRhIiwiZmV0Y2hFcnJvciIsIm1lc3NhZ2UiLCJ1cGRhdGVEYXRhIiwidXBkYXRlRXJyb3IiLCJ1cGRhdGUiLCJlcSIsImlkIiwiaW5zZXJ0RGF0YSIsImluc2VydEVycm9yIiwiaW5zZXJ0Iiwic3RhcnRzV2l0aCIsImZpbGVuYW1lIiwic3BsaXQiLCJwb3AiLCJrbm93blZhbGlkSW1hZ2VzIiwiaW5jbHVkZXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/hero-carousel-db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fhero-carousel-db&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Chero-carousel-db.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();