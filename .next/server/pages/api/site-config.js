"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/site-config";
exports.ids = ["pages/api/site-config"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsite-config&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csite-config.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsite-config&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csite-config.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_site_config_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\site-config.js */ \"(api)/./pages/api/site-config.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_site_config_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_site_config_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/site-config\",\n        pathname: \"/api/site-config\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_site_config_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNpdGUtY29uZmlnJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNzaXRlLWNvbmZpZy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN5RDtBQUN6RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Bhd3NhZmVwbGFudHMvPzA4ODMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxzaXRlLWNvbmZpZy5qc1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL3NpdGUtY29uZmlnXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2l0ZS1jb25maWdcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsite-config&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csite-config.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/site-config.js":
/*!**********************************!*\
  !*** ./pages/api/site-config.js ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! fs */ \"fs\");\n/* harmony import */ var fs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(fs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function handler(req, res) {\n    try {\n        // 禁用缓存，确保获取最新数据\n        res.setHeader(\"Cache-Control\", \"no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0\");\n        res.setHeader(\"Pragma\", \"no-cache\");\n        res.setHeader(\"Expires\", \"0\");\n        console.log(\"\\uD83D\\uDD27 site-config API 开始处理请求...\");\n        console.log(\"\\uD83D\\uDCCB 环境变量检查:\", {\n            NEXT_PUBLIC_SUPABASE_URL: !!\"https://rczfbgzghwiqpxihlexs.supabase.co\",\n            SUPABASE_SERVICE_ROLE_KEY: !!process.env.SUPABASE_SERVICE_ROLE_KEY,\n            NEXT_PUBLIC_SUPABASE_ANON_KEY: !!\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjemZiZ3pnaHdpcXB4aWhsZXhzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzk5NDUwMSwiZXhwIjoyMDc5NTcwNTAxfQ.uF3IofVn0ZkFSM6aSYsWCmOWHl26ybxv_bwMST3Zsio\"\n        });\n        const fp = path__WEBPACK_IMPORTED_MODULE_1___default().join(process.cwd(), \"content\", \"site.json\");\n        if (req.method === \"GET\") {\n            const supabaseUrl = \"https://rczfbgzghwiqpxihlexs.supabase.co\" || 0;\n            const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjemZiZ3pnaHdpcXB4aWhsZXhzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzk5NDUwMSwiZXhwIjoyMDc5NTcwNTAxfQ.uF3IofVn0ZkFSM6aSYsWCmOWHl26ybxv_bwMST3Zsio\" || 0;\n            console.log(\"\\uD83D\\uDD27 获取site-config配置...\");\n            console.log(\"\\uD83D\\uDCCB Supabase配置:\", {\n                url: supabaseUrl ? \"已配置\" : \"未配置\",\n                key: supabaseKey ? \"已配置\" : \"未配置\"\n            });\n            if (supabaseUrl && supabaseKey) {\n                try {\n                    const client = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseKey, {\n                        auth: {\n                            autoRefreshToken: false,\n                            persistSession: false\n                        }\n                    });\n                    console.log(\"\\uD83D\\uDD17 尝试连接数据库...\");\n                    const { data, error } = await client.from(\"site_config\").select(\"key,value\").in(\"key\", [\n                        \"heroImage\",\n                        \"logo\"\n                    ]);\n                    if (error) {\n                        console.error(\"❌ 数据库查询错误:\", {\n                            message: error.message,\n                            details: error.details,\n                            hint: error.hint,\n                            code: error.code\n                        });\n                        // 检查是否是权限问题\n                        if (error.message?.includes(\"permission denied\") || error.code === \"42501\") {\n                            console.error(\"\\uD83D\\uDEA8 权限拒绝: 需要检查RLS策略\");\n                            return res.status(200).json({\n                                heroImage: \"\",\n                                logo: \"\",\n                                error_type: \"permission_denied\",\n                                error_message: \"RLS权限问题，需要配置匿名访问策略\",\n                                error_details: error.message\n                            });\n                        }\n                        // 检查是否是表不存在\n                        if (error.message?.includes(\"does not exist\") || error.code === \"42P01\") {\n                            console.error(\"\\uD83D\\uDEA8 表不存在: site_config表需要创建\");\n                            return res.status(200).json({\n                                heroImage: \"\",\n                                logo: \"\",\n                                error_type: \"table_not_found\",\n                                error_message: \"site_config表不存在，需要创建表和RLS策略\",\n                                error_details: error.message\n                            });\n                        }\n                        console.warn(\"⚠️ 数据库查询失败，使用本地文件:\", error?.message);\n                    } else {\n                        const map = Object.create(null);\n                        (data || []).forEach((r)=>{\n                            map[r.key] = r.value;\n                        });\n                        console.log(\"✅ 从数据库获取配置:\", {\n                            heroImage: map.heroImage,\n                            logo: map.logo\n                        });\n                        return res.status(200).json({\n                            heroImage: String(map.heroImage || \"\").trim(),\n                            logo: String(map.logo || \"\").trim(),\n                            data_source: \"database\"\n                        });\n                    }\n                } catch (dbError) {\n                    console.error(\"❌ 数据库连接失败:\", {\n                        message: dbError.message,\n                        stack: dbError.stack\n                    });\n                    // 检查是否是环境变量问题\n                    if ( false || !process.env.SUPABASE_SERVICE_ROLE_KEY) {\n                        console.error(\"\\uD83D\\uDEA8 环境变量缺失: SUPABASE_URL或SUPABASE_SERVICE_ROLE_KEY未配置\");\n                        return res.status(200).json({\n                            heroImage: \"\",\n                            logo: \"\",\n                            error_type: \"environment_missing\",\n                            error_message: \"环境变量缺失，请检查SUPABASE_URL和SUPABASE_SERVICE_ROLE_KEY\",\n                            error_details: dbError.message\n                        });\n                    }\n                }\n            } else {\n                console.error(\"\\uD83D\\uDEA8 Supabase配置缺失: URL或Key未配置\");\n            }\n            // 读取本地配置文件作为fallback\n            try {\n                const j = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(fp, \"utf8\"));\n                console.log(\"\\uD83D\\uDCC1 使用本地配置文件:\", j);\n                return res.status(200).json({\n                    ...j,\n                    data_source: \"local_file\"\n                });\n            } catch (fileError) {\n                console.warn(\"⚠️ 本地配置文件读取失败，使用默认值:\", fileError?.message);\n                return res.status(200).json({\n                    heroImage: \"\",\n                    logo: \"\",\n                    data_source: \"default\"\n                });\n            }\n        }\n        if (req.method === \"POST\") {\n            const ok = req.cookies && req.cookies.psp_admin === \"1\" || (req.headers.cookie || \"\").includes(\"psp_admin=1\");\n            if (!ok) return res.status(401).json({\n                error: \"unauthorized\"\n            });\n            let body = req.body;\n            if (typeof body === \"string\") {\n                try {\n                    body = JSON.parse(body);\n                } catch  {}\n            }\n            const supabaseUrl = \"https://rczfbgzghwiqpxihlexs.supabase.co\" || 0;\n            const supabaseKey = process.env.SUPABASE_SERVICE_ROLE_KEY || \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjemZiZ3pnaHdpcXB4aWhsZXhzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzk5NDUwMSwiZXhwIjoyMDc5NTcwNTAxfQ.uF3IofVn0ZkFSM6aSYsWCmOWHl26ybxv_bwMST3Zsio\" || 0;\n            if (supabaseUrl && supabaseKey) {\n                try {\n                    const client = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_2__.createClient)(supabaseUrl, supabaseKey, {\n                        auth: {\n                            autoRefreshToken: false,\n                            persistSession: false\n                        }\n                    });\n                    const items = [];\n                    if (Object.prototype.hasOwnProperty.call(body || {}, \"heroImage\")) items.push({\n                        key: \"heroImage\",\n                        value: String((body || {}).heroImage || \"\").trim()\n                    });\n                    if (Object.prototype.hasOwnProperty.call(body || {}, \"logo\")) items.push({\n                        key: \"logo\",\n                        value: String((body || {}).logo || \"\").trim()\n                    });\n                    if (items.length) {\n                        const { error } = await client.from(\"site_config\").upsert(items, {\n                            onConflict: \"key\"\n                        });\n                        if (error) {\n                            console.error(\"❌ 更新site_config失败:\", error);\n                            return res.status(500).json({\n                                error: String(error.message || error)\n                            });\n                        }\n                        console.log(\"✅ site_config更新成功\");\n                    }\n                    const { data } = await client.from(\"site_config\").select(\"key,value\").in(\"key\", [\n                        \"heroImage\",\n                        \"logo\"\n                    ]);\n                    const map = Object.create(null);\n                    (data || []).forEach((r)=>{\n                        map[r.key] = r.value;\n                    });\n                    return res.status(200).json({\n                        heroImage: String(map.heroImage || \"\").trim(),\n                        logo: String(map.logo || \"\").trim()\n                    });\n                } catch (dbError) {\n                    console.error(\"❌ POST数据库操作失败:\", dbError);\n                    return res.status(500).json({\n                        error: \"Database operation failed\"\n                    });\n                }\n            }\n            let prev = {\n                heroImage: \"\",\n                logo: \"\"\n            };\n            try {\n                prev = JSON.parse(fs__WEBPACK_IMPORTED_MODULE_0___default().readFileSync(fp, \"utf8\"));\n            } catch  {}\n            const hasHero = Object.prototype.hasOwnProperty.call(body || {}, \"heroImage\");\n            const hasLogo = Object.prototype.hasOwnProperty.call(body || {}, \"logo\");\n            const heroImage = hasHero ? String((body || {}).heroImage || \"\").trim() : String(prev.heroImage || \"\");\n            const logo = hasLogo ? String((body || {}).logo || \"\").trim() : String(prev.logo || \"\");\n            const next = {\n                heroImage,\n                logo\n            };\n            try {\n                fs__WEBPACK_IMPORTED_MODULE_0___default().mkdirSync(path__WEBPACK_IMPORTED_MODULE_1___default().dirname(fp), {\n                    recursive: true\n                });\n            } catch  {}\n            fs__WEBPACK_IMPORTED_MODULE_0___default().writeFileSync(fp, JSON.stringify(next, null, 2));\n            return res.status(200).json(next);\n        }\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    } catch (e) {\n        console.error(\"site-config API error:\", e);\n        return res.status(200).json({\n            heroImage: \"\",\n            logo: \"\",\n            error_fallback: true,\n            error_message: String(e?.message || e)\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QywwQkFBMEJ3RDtRQUN4QyxPQUFPOUUsSUFBSStCLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDMUJDLFdBQVc7WUFDWEMsTUFBTTtZQUNONkMsZ0JBQWdCO1lBQ2hCM0MsZUFBZVMsT0FBT2lDLEdBQUdwRCxXQUFXb0Q7UUFDdEM7SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcGF3c2FmZXBsYW50cy8uL3BhZ2VzL2FwaS9zaXRlLWNvbmZpZy5qcz85YmY5Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBmcyBmcm9tICdmcydcclxuaW1wb3J0IHBhdGggZnJvbSAncGF0aCdcclxuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJ1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xyXG4gIHRyeSB7XHJcbiAgICAvLyDnpoHnlKjnvJPlrZjvvIznoa7kv53ojrflj5bmnIDmlrDmlbDmja5cclxuICAgIHJlcy5zZXRIZWFkZXIoJ0NhY2hlLUNvbnRyb2wnLCAnbm8tc3RvcmUsIG5vLWNhY2hlLCBtdXN0LXJldmFsaWRhdGUsIHByb3h5LXJldmFsaWRhdGUsIG1heC1hZ2U9MCcpO1xyXG4gICAgcmVzLnNldEhlYWRlcignUHJhZ21hJywgJ25vLWNhY2hlJyk7XHJcbiAgICByZXMuc2V0SGVhZGVyKCdFeHBpcmVzJywgJzAnKTtcclxuICAgIFxyXG4gICAgY29uc29sZS5sb2coJ/CflKcgc2l0ZS1jb25maWcgQVBJIOW8gOWni+WkhOeQhuivt+axgi4uLicpO1xyXG4gICAgY29uc29sZS5sb2coJ/Cfk4sg546v5aKD5Y+Y6YeP5qOA5p+lOicsIHtcclxuICAgICAgTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMOiAhIXByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCxcclxuICAgICAgU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWTogISFwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZLFxyXG4gICAgICBORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWTogISFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWVxyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIGNvbnN0IGZwID0gcGF0aC5qb2luKHByb2Nlc3MuY3dkKCksICdjb250ZW50JywgJ3NpdGUuanNvbicpXHJcbiAgICBpZiAocmVxLm1ldGhvZCA9PT0gJ0dFVCcpIHtcclxuICAgICAgY29uc3Qgc3VwYWJhc2VVcmwgPSBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgJydcclxuICAgICAgY29uc3Qgc3VwYWJhc2VLZXkgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZIHx8IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIHx8ICcnXHJcbiAgICAgIFxyXG4gICAgICBjb25zb2xlLmxvZygn8J+UpyDojrflj5ZzaXRlLWNvbmZpZ+mFjee9ri4uLicpO1xyXG4gICAgICBjb25zb2xlLmxvZygn8J+TiyBTdXBhYmFzZemFjee9rjonLCB7IFxyXG4gICAgICAgIHVybDogc3VwYWJhc2VVcmwgPyAn5bey6YWN572uJyA6ICfmnKrphY3nva4nLFxyXG4gICAgICAgIGtleTogc3VwYWJhc2VLZXkgPyAn5bey6YWN572uJyA6ICfmnKrphY3nva4nXHJcbiAgICAgIH0pO1xyXG4gICAgICBcclxuICAgICAgaWYgKHN1cGFiYXNlVXJsICYmIHN1cGFiYXNlS2V5KSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIGNvbnN0IGNsaWVudCA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VLZXksIHtcclxuICAgICAgICAgICAgYXV0aDoge1xyXG4gICAgICAgICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxyXG4gICAgICAgICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICBjb25zb2xlLmxvZygn8J+UlyDlsJ3or5Xov57mjqXmlbDmja7lupMuLi4nKTtcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgY2xpZW50LmZyb20oJ3NpdGVfY29uZmlnJykuc2VsZWN0KCdrZXksdmFsdWUnKS5pbigna2V5JywgWydoZXJvSW1hZ2UnLCdsb2dvJ10pXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5pWw5o2u5bqT5p+l6K+i6ZSZ6K+vOicsIHtcclxuICAgICAgICAgICAgICBtZXNzYWdlOiBlcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICAgIGRldGFpbHM6IGVycm9yLmRldGFpbHMsXHJcbiAgICAgICAgICAgICAgaGludDogZXJyb3IuaGludCxcclxuICAgICAgICAgICAgICBjb2RlOiBlcnJvci5jb2RlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5piv5p2D6ZmQ6Zeu6aKYXHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygncGVybWlzc2lvbiBkZW5pZWQnKSB8fCBlcnJvci5jb2RlID09PSAnNDI1MDEnKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign8J+aqCDmnYPpmZDmi5Lnu506IOmcgOimgeajgOafpVJMU+etlueVpScpO1xyXG4gICAgICAgICAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IFxyXG4gICAgICAgICAgICAgICAgaGVyb0ltYWdlOiAnJywgXHJcbiAgICAgICAgICAgICAgICBsb2dvOiAnJyxcclxuICAgICAgICAgICAgICAgIGVycm9yX3R5cGU6ICdwZXJtaXNzaW9uX2RlbmllZCcsXHJcbiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlOiAnUkxT5p2D6ZmQ6Zeu6aKY77yM6ZyA6KaB6YWN572u5Yy/5ZCN6K6/6Zeu562W55WlJyxcclxuICAgICAgICAgICAgICAgIGVycm9yX2RldGFpbHM6IGVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8g5qOA5p+l5piv5ZCm5piv6KGo5LiN5a2Y5ZyoXHJcbiAgICAgICAgICAgIGlmIChlcnJvci5tZXNzYWdlPy5pbmNsdWRlcygnZG9lcyBub3QgZXhpc3QnKSB8fCBlcnJvci5jb2RlID09PSAnNDJQMDEnKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign8J+aqCDooajkuI3lrZjlnKg6IHNpdGVfY29uZmln6KGo6ZyA6KaB5Yib5bu6Jyk7XHJcbiAgICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgICAgICBoZXJvSW1hZ2U6ICcnLCBcclxuICAgICAgICAgICAgICAgIGxvZ286ICcnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JfdHlwZTogJ3RhYmxlX25vdF9mb3VuZCcsXHJcbiAgICAgICAgICAgICAgICBlcnJvcl9tZXNzYWdlOiAnc2l0ZV9jb25maWfooajkuI3lrZjlnKjvvIzpnIDopoHliJvlu7rooajlkoxSTFPnrZbnlaUnLFxyXG4gICAgICAgICAgICAgICAgZXJyb3JfZGV0YWlsczogZXJyb3IubWVzc2FnZVxyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ+KaoO+4jyDmlbDmja7lupPmn6Xor6LlpLHotKXvvIzkvb/nlKjmnKzlnLDmlofku7Y6JywgZXJyb3I/Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY29uc3QgbWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKVxyXG4gICAgICAgICAgICA7KGRhdGEgfHwgW10pLmZvckVhY2gociA9PiB7IG1hcFtyLmtleV0gPSByLnZhbHVlIH0pXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUg5LuO5pWw5o2u5bqT6I635Y+W6YWN572uOicsIHsgaGVyb0ltYWdlOiBtYXAuaGVyb0ltYWdlLCBsb2dvOiBtYXAubG9nbyB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgICAgaGVyb0ltYWdlOiBTdHJpbmcoKG1hcC5oZXJvSW1hZ2UgfHwgJycpKS50cmltKCksIFxyXG4gICAgICAgICAgICAgIGxvZ286IFN0cmluZygobWFwLmxvZ28gfHwgJycpKS50cmltKCksXHJcbiAgICAgICAgICAgICAgZGF0YV9zb3VyY2U6ICdkYXRhYmFzZSdcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChkYkVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCfinYwg5pWw5o2u5bqT6L+e5o6l5aSx6LSlOicsIHtcclxuICAgICAgICAgICAgbWVzc2FnZTogZGJFcnJvci5tZXNzYWdlLFxyXG4gICAgICAgICAgICBzdGFjazogZGJFcnJvci5zdGFja1xyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOajgOafpeaYr+WQpuaYr+eOr+Wig+WPmOmHj+mXrumimFxyXG4gICAgICAgICAgaWYgKCFwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwgfHwgIXByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcign8J+aqCDnjq/looPlj5jph4/nvLrlpLE6IFNVUEFCQVNFX1VSTOaIllNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVnmnKrphY3nva4nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICAgICAgaGVyb0ltYWdlOiAnJywgXHJcbiAgICAgICAgICAgICAgbG9nbzogJycsXHJcbiAgICAgICAgICAgICAgZXJyb3JfdHlwZTogJ2Vudmlyb25tZW50X21pc3NpbmcnLFxyXG4gICAgICAgICAgICAgIGVycm9yX21lc3NhZ2U6ICfnjq/looPlj5jph4/nvLrlpLHvvIzor7fmo4Dmn6VTVVBBQkFTRV9VUkzlkoxTVVBBQkFTRV9TRVJWSUNFX1JPTEVfS0VZJyxcclxuICAgICAgICAgICAgICBlcnJvcl9kZXRhaWxzOiBkYkVycm9yLm1lc3NhZ2VcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ/CfmqggU3VwYWJhc2XphY3nva7nvLrlpLE6IFVSTOaIlktleeacqumFjee9ricpO1xyXG4gICAgICB9XHJcbiAgICAgIFxyXG4gICAgICAvLyDor7vlj5bmnKzlnLDphY3nva7mlofku7bkvZzkuLpmYWxsYmFja1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGogPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhmcCwgJ3V0ZjgnKSlcclxuICAgICAgICBjb25zb2xlLmxvZygn8J+TgSDkvb/nlKjmnKzlnLDphY3nva7mlofku7Y6Jywgaik7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgICAgIC4uLmosXHJcbiAgICAgICAgICBkYXRhX3NvdXJjZTogJ2xvY2FsX2ZpbGUnXHJcbiAgICAgICAgfSlcclxuICAgICAgfSBjYXRjaCAoZmlsZUVycm9yKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8g5pys5Zyw6YWN572u5paH5Lu26K+75Y+W5aSx6LSl77yM5L2/55So6buY6K6k5YC8OicsIGZpbGVFcnJvcj8ubWVzc2FnZSk7XHJcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXHJcbiAgICAgICAgICBoZXJvSW1hZ2U6ICcnLCBcclxuICAgICAgICAgIGxvZ286ICcnLFxyXG4gICAgICAgICAgZGF0YV9zb3VyY2U6ICdkZWZhdWx0J1xyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChyZXEubWV0aG9kID09PSAnUE9TVCcpIHtcclxuICAgICAgY29uc3Qgb2sgPSAocmVxLmNvb2tpZXMgJiYgcmVxLmNvb2tpZXMucHNwX2FkbWluID09PSAnMScpIHx8IChyZXEuaGVhZGVycy5jb29raWUgfHwgJycpLmluY2x1ZGVzKCdwc3BfYWRtaW49MScpXHJcbiAgICAgIGlmICghb2spIHJldHVybiByZXMuc3RhdHVzKDQwMSkuanNvbih7IGVycm9yOiAndW5hdXRob3JpemVkJyB9KVxyXG4gICAgICBsZXQgYm9keSA9IHJlcS5ib2R5XHJcbiAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHsgdHJ5IHsgYm9keSA9IEpTT04ucGFyc2UoYm9keSkgfSBjYXRjaCB7fSB9XHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlVXJsID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8ICcnXHJcbiAgICAgIGNvbnN0IHN1cGFiYXNlS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSB8fCBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSB8fCAnJ1xyXG4gICAgICBpZiAoc3VwYWJhc2VVcmwgJiYgc3VwYWJhc2VLZXkpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgY2xpZW50ID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUtleSwge1xyXG4gICAgICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IGl0ZW1zID0gW11cclxuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYm9keSB8fCB7fSwgJ2hlcm9JbWFnZScpKSBpdGVtcy5wdXNoKHsga2V5OiAnaGVyb0ltYWdlJywgdmFsdWU6IFN0cmluZygoYm9keSB8fCB7fSkuaGVyb0ltYWdlIHx8ICcnKS50cmltKCkgfSlcclxuICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoYm9keSB8fCB7fSwgJ2xvZ28nKSkgaXRlbXMucHVzaCh7IGtleTogJ2xvZ28nLCB2YWx1ZTogU3RyaW5nKChib2R5IHx8IHt9KS5sb2dvIHx8ICcnKS50cmltKCkgfSlcclxuICAgICAgICAgIFxyXG4gICAgICAgICAgaWYgKGl0ZW1zLmxlbmd0aCkge1xyXG4gICAgICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBjbGllbnQuZnJvbSgnc2l0ZV9jb25maWcnKS51cHNlcnQoaXRlbXMsIHsgb25Db25mbGljdDogJ2tleScgfSlcclxuICAgICAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2MIOabtOaWsHNpdGVfY29uZmln5aSx6LSlOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogU3RyaW5nKGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IpIH0pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ+KchSBzaXRlX2NvbmZpZ+abtOaWsOaIkOWKnycpXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YSB9ID0gYXdhaXQgY2xpZW50LmZyb20oJ3NpdGVfY29uZmlnJykuc2VsZWN0KCdrZXksdmFsdWUnKS5pbigna2V5JywgWydoZXJvSW1hZ2UnLCdsb2dvJ10pXHJcbiAgICAgICAgICBjb25zdCBtYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpXHJcbiAgICAgICAgICA7KGRhdGEgfHwgW10pLmZvckVhY2gociA9PiB7IG1hcFtyLmtleV0gPSByLnZhbHVlIH0pXHJcbiAgICAgICAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBoZXJvSW1hZ2U6IFN0cmluZygobWFwLmhlcm9JbWFnZSB8fCAnJykpLnRyaW0oKSwgbG9nbzogU3RyaW5nKChtYXAubG9nbyB8fCAnJykpLnRyaW0oKSB9KVxyXG4gICAgICAgIH0gY2F0Y2ggKGRiRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBQT1NU5pWw5o2u5bqT5pON5L2c5aSx6LSlOicsIGRiRXJyb3IpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6ICdEYXRhYmFzZSBvcGVyYXRpb24gZmFpbGVkJyB9KVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBsZXQgcHJldiA9IHsgaGVyb0ltYWdlOiAnJywgbG9nbzogJycgfVxyXG4gICAgICB0cnkge1xyXG4gICAgICAgIHByZXYgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhmcCwgJ3V0ZjgnKSlcclxuICAgICAgfSBjYXRjaCB7fVxyXG4gICAgICBjb25zdCBoYXNIZXJvID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGJvZHkgfHwge30sICdoZXJvSW1hZ2UnKVxyXG4gICAgICBjb25zdCBoYXNMb2dvID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGJvZHkgfHwge30sICdsb2dvJylcclxuICAgICAgY29uc3QgaGVyb0ltYWdlID0gaGFzSGVybyA/IFN0cmluZygoYm9keSB8fCB7fSkuaGVyb0ltYWdlIHx8ICcnKS50cmltKCkgOiBTdHJpbmcocHJldi5oZXJvSW1hZ2UgfHwgJycpXHJcbiAgICAgIGNvbnN0IGxvZ28gPSBoYXNMb2dvID8gU3RyaW5nKChib2R5IHx8IHt9KS5sb2dvIHx8ICcnKS50cmltKCkgOiBTdHJpbmcocHJldi5sb2dvIHx8ICcnKVxyXG4gICAgICBjb25zdCBuZXh0ID0geyBoZXJvSW1hZ2UsIGxvZ28gfVxyXG4gICAgICB0cnkgeyBmcy5ta2RpclN5bmMocGF0aC5kaXJuYW1lKGZwKSwgeyByZWN1cnNpdmU6IHRydWUgfSkgfSBjYXRjaCB7fVxyXG4gICAgICBmcy53cml0ZUZpbGVTeW5jKGZwLCBKU09OLnN0cmluZ2lmeShuZXh0LCBudWxsLCAyKSlcclxuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKG5leHQpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSlcclxuICB9IGNhdGNoIChlKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdzaXRlLWNvbmZpZyBBUEkgZXJyb3I6JywgZSk7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cygyMDApLmpzb24oeyBcclxuICAgICAgaGVyb0ltYWdlOiAnJywgXHJcbiAgICAgIGxvZ286ICcnLFxyXG4gICAgICBlcnJvcl9mYWxsYmFjazogdHJ1ZSxcclxuICAgICAgZXJyb3JfbWVzc2FnZTogU3RyaW5nKGU/Lm1lc3NhZ2UgfHwgZSlcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwiY3JlYXRlQ2xpZW50IiwiaGFuZGxlciIsInJlcSIsInJlcyIsInNldEhlYWRlciIsImNvbnNvbGUiLCJsb2ciLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJwcm9jZXNzIiwiZW52IiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwiZnAiLCJqb2luIiwiY3dkIiwibWV0aG9kIiwic3VwYWJhc2VVcmwiLCJzdXBhYmFzZUtleSIsInVybCIsImtleSIsImNsaWVudCIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJkYXRhIiwiZXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiaW4iLCJtZXNzYWdlIiwiZGV0YWlscyIsImhpbnQiLCJjb2RlIiwiaW5jbHVkZXMiLCJzdGF0dXMiLCJqc29uIiwiaGVyb0ltYWdlIiwibG9nbyIsImVycm9yX3R5cGUiLCJlcnJvcl9tZXNzYWdlIiwiZXJyb3JfZGV0YWlscyIsIndhcm4iLCJtYXAiLCJPYmplY3QiLCJjcmVhdGUiLCJmb3JFYWNoIiwiciIsInZhbHVlIiwiU3RyaW5nIiwidHJpbSIsImRhdGFfc291cmNlIiwiZGJFcnJvciIsInN0YWNrIiwiaiIsIkpTT04iLCJwYXJzZSIsInJlYWRGaWxlU3luYyIsImZpbGVFcnJvciIsIm9rIiwiY29va2llcyIsInBzcF9hZG1pbiIsImhlYWRlcnMiLCJjb29raWUiLCJib2R5IiwiaXRlbXMiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJwdXNoIiwibGVuZ3RoIiwidXBzZXJ0Iiwib25Db25mbGljdCIsInByZXYiLCJoYXNIZXJvIiwiaGFzTG9nbyIsIm5leHQiLCJta2RpclN5bmMiLCJkaXJuYW1lIiwicmVjdXJzaXZlIiwid3JpdGVGaWxlU3luYyIsInN0cmluZ2lmeSIsImUiLCJlcnJvcl9mYWxsYmFjayJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/site-config.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsite-config&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Csite-config.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();