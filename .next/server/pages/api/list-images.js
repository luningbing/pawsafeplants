"use strict";(()=>{var e={};e.id=7103,e.ids=[7103],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,r){return r in t?t[r]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,r)):"function"==typeof t&&"default"===r?t:void 0}}})},5793:(e,t,r)=>{r.r(t),r.d(t,{config:()=>P,default:()=>f,routeModule:()=>A});var s={};r.r(s),r.d(s,{default:()=>d});var a=r(1802),n=r(7153),i=r(6249),o=r(7147),u=r.n(o),p=r(1017),l=r.n(p),c=r(2885);async function d(e,t){try{let e=process.env.SUPABASE_URL||"",r=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_ANON_KEY||"";if(e&&r){let s=(0,c.createClient)(e,r);try{await s.storage.createBucket("uploads",{public:!0})}catch{}let{data:a,error:n}=await s.storage.from("uploads").list("",{limit:1e3});if(n)return t.status(500).json({error:String(n.message||n)});let i=(a||[]).filter(e=>!/\/$/.test(e.name)).map(e=>"https://rczfbgzghwiqpxihlexs.supabase.co".replace(/\/$/,"")+"/storage/v1/object/public/uploads/"+e.name);return t.status(200).json({paths:i})}let s=l().join(process.cwd(),"public","uploads"),a=[];try{a=u().readdirSync(s)}catch{}let n=a.filter(e=>!/\.(tmp|part)$/i.test(e)).map(e=>"/uploads/"+e);return t.status(200).json({paths:n})}catch(e){t.status(500).json({error:String(e?.message||e)})}}let f=(0,i.l)(s,"default"),P=(0,i.l)(s,"config"),A=new a.PagesAPIRouteModule({definition:{kind:n.x.PAGES_API,page:"/api/list-images",pathname:"/api/list-images",bundlePath:"",filename:""},userland:s})},7153:(e,t)=>{var r;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return r}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(r||(r={}))},1802:(e,t,r)=>{e.exports=r(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var r=t(t.s=5793);module.exports=r})();