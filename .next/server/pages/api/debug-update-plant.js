"use strict";(()=>{var e={};e.id=8463,e.ids=[8463],e.modules={8076:e=>{e.exports=require("gray-matter")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,o){return o in t?t[o]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,o)):"function"==typeof t&&"default"===o?t:void 0}}})},8889:(e,t,o)=>{o.r(t),o.d(t,{config:()=>i,default:()=>a,routeModule:()=>c});var n={};o.r(n),o.d(n,{default:()=>u});var l=o(1802),r=o(7153),s=o(6249);async function u(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method Not Allowed"});console.log("\uD83D\uDD0D Debug update-plant request"),console.log("\uD83D\uDCCB Request headers:",e.headers),console.log("\uD83D\uDCDD Request body:",e.body);let{slug:n,...l}=e.body;if(!n)return console.error("❌ Plant slug is required"),t.status(400).json({error:"Plant slug is required"});console.log("\uD83D\uDD04 Updating plant:",n),console.log("\uD83D\uDCDD Update data:",l);let r=o(7147),s=o(1017),u=s.join(process.cwd(),"content/plants");console.log("\uD83D\uDCC1 Plants directory:",u),console.log("\uD83D\uDCC1 Directory exists:",r.existsSync(u)),r.existsSync(u)&&console.log("\uD83D\uDCC4 Files in plants directory:",r.readdirSync(u));let a=s.join(process.cwd(),"content/plants",`${n}.md`);console.log("\uD83D\uDCC1 File path:",a),console.log("\uD83D\uDCC1 File exists:",r.existsSync(a));try{if(!r.existsSync(a))return console.error("❌ Plant file not found:",a),t.status(404).json({error:"Plant not found",filePath:a,availableFiles:r.existsSync(u)?r.readdirSync(u):[]});let e=r.readFileSync(a,"utf8");console.log("\uD83D\uDCD6 File contents length:",e.length),console.log("\uD83D\uDCD6 File contents preview:",e.substring(0,200));let{data:s,content:i}=o(8076)(e);console.log("\uD83D\uDCD6 Existing frontmatter:",s),console.log("\uD83D\uDCD6 Content length:",i.length);let c={...s,...l};console.log("✏️ Updated frontmatter:",c);let d=`---
${Object.entries(c).filter(([e,t])=>null!=t&&""!==t).map(([e,t])=>Array.isArray(t)?0===t.length?"":`${e}:
${t.map(e=>`  - "${e}"`).join("\n")}`:`${e}: "${t}"`).filter(e=>""!==e).join("\n")}
---

${i}
`;console.log("\uD83D\uDCBE New content length:",d.length),console.log("\uD83D\uDCBE Writing updated file..."),r.writeFileSync(a,d),console.log("✅ Plant updated successfully:",n),t.status(200).json({message:"Plant updated successfully!",slug:n,updatedData:l,filePath:a})}catch(e){console.error("\uD83D\uDEA8 Failed to update plant:",e),console.error("\uD83D\uDEA8 Error stack:",e.stack),t.status(500).json({error:"Failed to update plant data.",details:e.message,stack:e.stack})}}let a=(0,s.l)(n,"default"),i=(0,s.l)(n,"config"),c=new l.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/debug-update-plant",pathname:"/api/debug-update-plant",bundlePath:"",filename:""},userland:n})},7153:(e,t)=>{var o;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return o}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(o||(o={}))},1802:(e,t,o)=>{e.exports=o(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var o=t(t.s=8889);module.exports=o})();