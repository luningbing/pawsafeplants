"use strict";(()=>{var e={};e.id=576,e.ids=[576],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},6940:(e,t,a)=>{a.r(t),a.d(t,{config:()=>w,default:()=>m,routeModule:()=>h});var s={};a.r(s),a.d(s,{default:()=>d});var r=a(1802),o=a(7153),n=a(6249),i=a(2885);let l=process.env.SUPABASE_URL||"",c=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_ANON_KEY||"";l&&c||console.warn("Missing Supabase credentials for occasion API");let f=l&&c?(0,i.createClient)(l,c):null;async function d(e,t){try{if(t.setHeader("Access-Control-Allow-Origin","*"),t.setHeader("Access-Control-Allow-Methods","GET, POST, PUT, DELETE, OPTIONS"),t.setHeader("Access-Control-Allow-Headers","Content-Type, Authorization"),"OPTIONS"===e.method)return t.status(200).end();if("GET"===e.method){let{occasion:a,market:s="US",limit:r=20,offset:o=0}=e.query;if(!a){let e=[{id:"birthday",name:"Birthday",slug:"birthday",description:"Cat-safe flowers perfect for birthday celebrations and gifts.",metaTitle:"Cat Safe Birthday Flowers - Pet Friendly Birthday Bouquets | PawSafePlants",metaDescription:"Discover beautiful cat-safe flowers for birthday celebrations. Perfect for pet-friendly birthday bouquets and gifts.",keywords:"cat safe birthday flowers, pet friendly birthday bouquets, cat safe birthday gifts",season:"year-round",targetMarkets:["US","CA","UK","DE","EU"]},{id:"valentines-day",name:"Valentine's Day",slug:"valentines-day",description:"Romantic cat-safe flowers for Valentine's Day.",metaTitle:"Cat Safe Valentine's Day Flowers - Romantic Pet-Friendly Bouquets | PawSafePlants",metaDescription:"Find romantic cat-safe flowers for Valentine's Day. Beautiful pet-friendly bouquets that express your love.",keywords:"cat safe valentine flowers, pet friendly valentine bouquets, cat safe valentine arrangements",season:"winter",targetMarkets:["US","CA","UK","DE","EU"]},{id:"mothers-day",name:"Mother's Day",slug:"mothers-day",description:"Beautiful cat-safe flowers for Mother's Day.",metaTitle:"Cat Safe Mother's Day Flowers - Pet Friendly Mom Bouquets | PawSafePlants",metaDescription:"Choose beautiful cat-safe flowers for Mother's Day. Pet-friendly bouquets that celebrate mom.",keywords:"cat safe mothers day flowers, pet friendly mothers day bouquets, cat safe mothers day gifts",season:"spring",targetMarkets:["US","CA","UK","DE","EU"]},{id:"anniversary",name:"Anniversary",slug:"anniversary",description:"Celebrate your love with cat-safe anniversary flowers.",metaTitle:"Cat Safe Anniversary Flowers - Romantic Pet-Friendly Bouquets | PawSafePlants",metaDescription:"Find romantic cat-safe flowers for anniversaries. Beautiful pet-friendly bouquets that celebrate your love.",keywords:"cat safe anniversary flowers, pet friendly anniversary bouquets, cat safe anniversary arrangements",season:"year-round",targetMarkets:["US","CA","UK","DE","EU"]},{id:"wedding",name:"Wedding",slug:"wedding",description:"Stunning cat-safe flowers for weddings and bridal bouquets.",metaTitle:"Cat Safe Wedding Flowers - Pet Friendly Bridal Bouquets | PawSafePlants",metaDescription:"Discover beautiful cat-safe flowers for weddings. Perfect for bridal bouquets and centerpieces.",keywords:"cat safe wedding flowers, pet friendly wedding bouquets, cat safe bridal flowers",season:"spring",targetMarkets:["US","CA","UK","DE","EU"]},{id:"get-well-soon",name:"Get Well Soon",slug:"get-well-soon",description:"Cheerful cat-safe flowers for get well soon wishes.",metaTitle:"Cat Safe Get Well Flowers - Pet Friendly Recovery Bouquets | PawSafePlants",metaDescription:"Send cheerful cat-safe get well flowers. Bright pet-friendly bouquets that speed recovery.",keywords:"cat safe get well flowers, pet friendly get well bouquets, cat safe recovery flowers",season:"year-round",targetMarkets:["US","CA","UK","DE","EU"]},{id:"sympathy",name:"Sympathy",slug:"sympathy",description:"Thoughtful cat-safe flowers for sympathy and condolences.",metaTitle:"Cat Safe Sympathy Flowers - Pet Friendly Condolence Bouquets | PawSafePlants",metaDescription:"Choose thoughtful cat-safe sympathy flowers. Gentle pet-friendly bouquets that offer comfort.",keywords:"cat safe sympathy flowers, pet friendly sympathy bouquets, cat safe condolence flowers",season:"year-round",targetMarkets:["US","CA","UK","DE","EU"]}];return t.status(200).json({success:!0,occasions:e,total:e.length,market:s,last_updated:new Date().toISOString()})}try{let e=[];if(f){let{data:t,error:n}=await f.rpc("get_flowers_by_occasion",{occasion_slug:a,market_code:s,limit_count:parseInt(r),offset_count:parseInt(o)});if(!n&&t)e=t;else{let{data:t,error:s}=await f.from("media_metadata").select("*").or("is_flower.eq.true,category.eq.flower").order("created_at",{ascending:!1}).limit(parseInt(r));!s&&t&&(e=t.map(e=>({...e,occasion_name:a.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase()),occasion_slug:a,relevance_score:8,season:u(a)})))}}0===e.length&&(e=p(a,s));let n=y(a);return t.status(200).json({success:!0,flowers:e,occasion:n,market:s,pagination:{limit:parseInt(r),offset:parseInt(o),total:e.length},seo:{title:n.metaTitle,description:n.metaDescription,keywords:n.keywords,canonical:`https://www.pawsafeplants.com/occasions/${a}`},last_updated:new Date().toISOString()})}catch(i){console.error("Error fetching occasion flowers:",i);let e=p(a,s),n=y(a);return t.status(200).json({success:!0,flowers:e,occasion:n,market:s,pagination:{limit:parseInt(r),offset:parseInt(o),total:e.length},seo:n,last_updated:new Date().toISOString()})}}return t.status(405).json({success:!1,error:"Method not allowed"})}catch(e){return console.error("Unexpected error in occasion API:",e),t.status(500).json({success:!1,error:"Internal server error",message:e.message})}}function u(e){return({"valentines-day":"winter","mothers-day":"spring",wedding:"spring",birthday:"year-round",anniversary:"year-round","get-well-soon":"year-round",sympathy:"year-round"})[e]||"year-round"}function y(e){let t={birthday:{name:"Birthday",slug:"birthday",metaTitle:"Cat Safe Birthday Flowers - Pet Friendly Birthday Bouquets | PawSafePlants",metaDescription:"Discover beautiful cat-safe flowers for birthday celebrations. Perfect for pet-friendly birthday bouquets and gifts.",keywords:"cat safe birthday flowers, pet friendly birthday bouquets, cat safe birthday gifts"},"valentines-day":{name:"Valentine's Day",slug:"valentines-day",metaTitle:"Cat Safe Valentine's Day Flowers - Romantic Pet-Friendly Bouquets | PawSafePlants",metaDescription:"Find romantic cat-safe flowers for Valentine's Day. Beautiful pet-friendly bouquets that express your love.",keywords:"cat safe valentine flowers, pet friendly valentine bouquets, cat safe valentine arrangements"},"mothers-day":{name:"Mother's Day",slug:"mothers-day",metaTitle:"Cat Safe Mother's Day Flowers - Pet Friendly Mom Bouquets | PawSafePlants",metaDescription:"Choose beautiful cat-safe flowers for Mother's Day. Pet-friendly bouquets that celebrate mom.",keywords:"cat safe mothers day flowers, pet friendly mothers day bouquets, cat safe mothers day gifts"}};return t[e]||t.birthday}function p(e,t){let a={"valentines-day":{summary:"Perfect romantic choice for expressing love while keeping cats safe.",keywords:["romantic","love","hearts","passion"]},"mothers-day":{summary:"Beautiful choice to show appreciation for mom while protecting her cats.",keywords:["appreciation","love","gratitude","family"]},birthday:{summary:"Cheerful and bright, perfect for celebrating special moments.",keywords:["celebration","joy","festive","happy"]}}[e]||{};return[{id:1,name:"Rose",file_path:"https://images.unsplash.com/photo-1518709594023-a7b5d2e4cf76?w=400&h=400&fit=crop",category:"flower",is_flower:!0,toxicity_level:"Safe – generally non-toxic to cats",summary:"Classic roses are safe for cats. Perfect for romantic occasions.",relevance_score:10},{id:2,name:"Sunflower",file_path:"https://images.unsplash.com/photo-1506805945078-4b0c4d8d71b6?w=400&h=400&fit=crop",category:"flower",is_flower:!0,toxicity_level:"Safe – generally non-toxic to cats",summary:"Bright and cheerful sunflowers bring joy to any celebration.",relevance_score:9},{id:3,name:"Orchid",file_path:"https://images.unsplash.com/photo-1459411621453-7b03977f4bfc?w=400&h=400&fit=crop",category:"flower",is_flower:!0,toxicity_level:"Safe – generally non-toxic to cats",summary:"Elegant orchids add sophistication to special occasions.",relevance_score:8}].map((t,s)=>({...t,occasion_name:e.replace("-"," ").replace(/\b\w/g,e=>e.toUpperCase()),occasion_slug:e,season:u(e),summary:a.summary||t.summary,keywords:a.keywords||[],created_at:new Date().toISOString()}))}let m=(0,n.l)(s,"default"),w=(0,n.l)(s,"config"),h=new r.PagesAPIRouteModule({definition:{kind:o.x.PAGES_API,page:"/api/occasions",pathname:"/api/occasions",bundlePath:"",filename:""},userland:s})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=6940);module.exports=a})();