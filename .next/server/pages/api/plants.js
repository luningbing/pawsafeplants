"use strict";(()=>{var e={};e.id=7949,e.ids=[7949],e.modules={2885:e=>{e.exports=require("@supabase/supabase-js")},8076:e=>{e.exports=require("gray-matter")},145:e=>{e.exports=require("next/dist/compiled/next-server/pages-api.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},6249:(e,t)=>{Object.defineProperty(t,"l",{enumerable:!0,get:function(){return function e(t,a){return a in t?t[a]:"then"in t&&"function"==typeof t.then?t.then(t=>e(t,a)):"function"==typeof t&&"default"===a?t:void 0}}})},9022:(e,t,a)=>{a.r(t),a.d(t,{config:()=>f,default:()=>d,routeModule:()=>h});var i={};a.r(i),a.d(i,{default:()=>P});var n=a(1802),r=a(7153),u=a(6249),l=a(7147),s=a.n(l),m=a(1017),o=a.n(m),g=a(8076),c=a.n(g),p=a(2885);async function P(e,t){try{let e=o().join(process.cwd(),"content","plants"),a=[];try{a=s().readdirSync(e).filter(e=>e.endsWith(".md"))}catch{}let i=a.map(t=>(function(e){let t=s().readFileSync(e,"utf8"),{data:a}=c()(t),i=o().basename(e).replace(/\.md$/,"");return{slug:i,title:a.title||i,summary:a.summary||"",toxicity_level:a.toxicity_level||"",image:a.image||"",image2:a.image2||"",image3:a.image3||"",thumbPlant:a.thumbPlant||"",thumbCat:a.thumbCat||"",pet_moment:a.pet_moment||""}})(o().join(e,t))),n=process.env.SUPABASE_URL||"",r=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_ANON_KEY||"";if(n&&r){let e=(0,p.createClient)(n,r),{data:t,error:a}=await e.from("plant_images").select("slug,image,image2,image3,thumbPlant,thumbCat");if(!a&&Array.isArray(t)){let e=Object.create(null);t.forEach(t=>{e[t.slug]=t}),i=i.map(t=>{let a=e[t.slug]||{};return{...t,image:String(a.image||t.image||""),image2:String(a.image2||t.image2||""),image3:String(a.image3||t.image3||""),thumbPlant:String(a.thumbPlant||t.thumbPlant||""),thumbCat:String(a.thumbCat||t.thumbCat||"")}})}}if(!i.length)return t.status(200).json({plants:[{slug:"lily",title:"Lily (百合)",toxicity_level:"DANGER – Highly toxic to cats",summary:"Even small ingestions can cause acute kidney failure in cats.",image:"",image2:"",image3:"",thumbPlant:"",thumbCat:""},{slug:"rose",title:"Rose (玫瑰)",toxicity_level:"Safe – generally non-toxic",summary:"Thorns can cause injury but the plant is generally non-toxic.",image:"",image2:"",image3:"",thumbPlant:"",thumbCat:""}]});return t.status(200).json({plants:i})}catch(e){t.status(500).json({error:String(e?.message||e)})}}let d=(0,u.l)(i,"default"),f=(0,u.l)(i,"config"),h=new n.PagesAPIRouteModule({definition:{kind:r.x.PAGES_API,page:"/api/plants",pathname:"/api/plants",bundlePath:"",filename:""},userland:i})},7153:(e,t)=>{var a;Object.defineProperty(t,"x",{enumerable:!0,get:function(){return a}}),function(e){e.PAGES="PAGES",e.PAGES_API="PAGES_API",e.APP_PAGE="APP_PAGE",e.APP_ROUTE="APP_ROUTE"}(a||(a={}))},1802:(e,t,a)=>{e.exports=a(145)}};var t=require("../../webpack-api-runtime.js");t.C(e);var a=t(t.s=9022);module.exports=a})();