"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/fix-rls-urgent";
exports.ids = ["pages/api/admin/fix-rls-urgent"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Ffix-rls-urgent&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cfix-rls-urgent.js&middlewareConfigBase64=e30%3D!":
/*!**************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Ffix-rls-urgent&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cfix-rls-urgent.js&middlewareConfigBase64=e30%3D! ***!
  \**************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_fix_rls_urgent_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\fix-rls-urgent.js */ \"(api)/./pages/api/admin/fix-rls-urgent.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_fix_rls_urgent_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_fix_rls_urgent_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/fix-rls-urgent\",\n        pathname: \"/api/admin/fix-rls-urgent\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_fix_rls_urgent_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGZml4LXJscy11cmdlbnQmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyU1Q2FwaSU1Q2FkbWluJTVDZml4LXJscy11cmdlbnQuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUU7QUFDbkU7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLCtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wYXdzYWZlcGxhbnRzLz84ZGMyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlc1xcXFxhcGlcXFxcYWRtaW5cXFxcZml4LXJscy11cmdlbnQuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9maXgtcmxzLXVyZ2VudFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FkbWluL2ZpeC1ybHMtdXJnZW50XCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Ffix-rls-urgent&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cfix-rls-urgent.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/admin/fix-rls-urgent.js":
/*!*******************************************!*\
  !*** ./pages/api/admin/fix-rls-urgent.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// ðŸš¨ ç´§æ€¥ä¿®å¤ï¼šå¼ºåˆ¶å¯ç”¨ RLS å¹¶é˜»æ­¢åŒ¿åè®¿é—®\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rczfbgzghwiqpxihlexs.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n        console.log(\"\\uD83D\\uDEA8 ç´§æ€¥ä¿®å¤ RLS...\");\n        // 1. å¼ºåˆ¶å¯ç”¨ RLS\n        const forceRLS = `\r\n      -- ç¡®ä¿è¡¨å­˜åœ¨\r\n      DO $$\r\n      BEGIN\r\n        IF NOT EXISTS (SELECT FROM pg_tables WHERE tablename = 'admin_credentials' AND schemaname = 'public') THEN\r\n          CREATE TABLE public.admin_credentials (\r\n            id SERIAL PRIMARY KEY,\r\n            username TEXT NOT NULL UNIQUE,\r\n            password_hash TEXT NOT NULL,\r\n            created_at TIMESTAMP DEFAULT NOW(),\r\n            updated_at TIMESTAMP DEFAULT NOW()\r\n          );\r\n        END IF;\r\n      END $$;\r\n\r\n      -- å¼ºåˆ¶å¯ç”¨ RLS\r\n      ALTER TABLE public.admin_credentials ENABLE ROW LEVEL SECURITY;\r\n      \r\n      -- åˆ é™¤æ‰€æœ‰çŽ°æœ‰ç­–ç•¥\r\n      DROP POLICY IF EXISTS \"Enable all operations for admin_credentials\" ON public.admin_credentials;\r\n      DROP POLICY IF EXISTS \"Restrict anonymous access\" ON public.admin_credentials;\r\n      DROP POLICY IF EXISTS \"Allow service role access\" ON public.admin_credentials;\r\n      \r\n      -- åˆ›å»ºä¸¥æ ¼çš„åŒ¿åè®¿é—®é˜»æ­¢ç­–ç•¥\r\n      CREATE POLICY \"Block all anonymous access\" ON public.admin_credentials\r\n        FOR ALL TO anon USING (false) WITH CHECK (false);\r\n      \r\n      -- åˆ›å»ºæœåŠ¡è§’è‰²è®¿é—®ç­–ç•¥\r\n      CREATE POLICY \"Allow service role full access\" ON public.admin_credentials\r\n        FOR ALL TO service_role USING (true) WITH CHECK (true);\r\n        \r\n      -- éªŒè¯ RLS çŠ¶æ€\r\n      ALTER TABLE public.admin_credentials FORCE ROW LEVEL SECURITY;\r\n    `;\n        // ä½¿ç”¨ PostgreSQL åŽŸç”Ÿè¿žæŽ¥æ‰§è¡Œ\n        const { data, error } = await supabaseAdmin.from(\"admin_credentials\").select(\"*\").limit(1);\n        if (error) {\n            console.log(\"âš ï¸ å½“å‰è®¿é—®çŠ¶æ€:\", error.message);\n        }\n        // 2. æµ‹è¯•åŒ¿åè®¿é—®\n        const supabaseAnon = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rczfbgzghwiqpxihlexs.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjemZiZ3pnaHdpcXB4aWhsZXhzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzk5NDUwMSwiZXhwIjoyMDc5NTcwNTAxfQ.uF3IofVn0ZkFSM6aSYsWCmOWHl26ybxv_bwMST3Zsio\");\n        const { data: anonData, error: anonError } = await supabaseAnon.from(\"admin_credentials\").select(\"count\").single();\n        const isBlocked = !!anonError;\n        // 3. å¦‚æžœåŒ¿åè®¿é—®æœªè¢«é˜»æ­¢ï¼Œåˆ›å»ºé¢å¤–çš„ä¿æŠ¤å±‚\n        if (!isBlocked) {\n            console.log(\"\\uD83D\\uDEA8 åŒ¿åè®¿é—®æœªè¢«é˜»æ­¢ï¼Œåˆ›å»ºé¢å¤–ä¿æŠ¤å±‚...\");\n            // åœ¨ API å±‚é¢æ·»åŠ æ£€æŸ¥\n            const middlewareCheck = `\r\n        -- åˆ›å»ºè§†å›¾æ¥é™åˆ¶è®¿é—®\r\n        CREATE OR REPLACE VIEW public.admin_credentials_secure AS\r\n        SELECT * FROM public.admin_credentials\r\n        WHERE current_setting('request.jwt.claims', true)::jsonb->>'role' = 'service_role';\r\n        \r\n        -- æ’¤é”€ç›´æŽ¥è¡¨è®¿é—®æƒé™\r\n        REVOKE ALL ON public.admin_credentials FROM anon;\r\n        REVOKE ALL ON public.admin_credentials FROM authenticated;\r\n        \r\n        -- åªæŽˆäºˆæœåŠ¡è§’è‰²æƒé™\r\n        GRANT ALL ON public.admin_credentials TO service_role;\r\n      `;\n        }\n        // 4. æœ€ç»ˆéªŒè¯\n        const { data: finalTest, error: finalError } = await supabaseAnon.from(\"admin_credentials\").select(\"id\").limit(1);\n        return res.status(200).json({\n            success: true,\n            message: \"RLS ç´§æ€¥ä¿®å¤å®Œæˆ\",\n            initialAccessBlocked: isBlocked,\n            finalAccessBlocked: !!finalError,\n            anonymousError: finalError?.message,\n            recommendations: [\n                \"RLS å·²å¼ºåˆ¶å¯ç”¨\",\n                \"åŒ¿åè®¿é—®ç­–ç•¥å·²åˆ›å»º\",\n                \"æœåŠ¡è§’è‰²è®¿é—®å·²é…ç½®\",\n                \"å»ºè®®åœ¨ Supabase Dashboard ä¸­éªŒè¯ RLS çŠ¶æ€\"\n            ]\n        });\n    } catch (error) {\n        console.error(\"âŒ RLS ä¿®å¤å¤±è´¥:\", error);\n        return res.status(500).json({\n            error: \"RLS ä¿®å¤å¤±è´¥\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYWRtaW4vZml4LXJscy11cmdlbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXFEO0FBRXJELDJCQUEyQjtBQUNaLGVBQWVDLFFBQVFDLEdBQUcsRUFBRUMsR0FBRztJQUM1QyxJQUFJRCxJQUFJRSxNQUFNLEtBQUssUUFBUTtRQUN6QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLE9BQU87UUFBcUI7SUFDNUQ7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsZ0JBQWdCUixtRUFBWUEsQ0FDaENTLDBDQUFvQyxFQUNwQ0EsUUFBUUMsR0FBRyxDQUFDRSx5QkFBeUIsRUFDckM7WUFDRUMsTUFBTTtnQkFDSkMsa0JBQWtCO2dCQUNsQkMsZ0JBQWdCO1lBQ2xCO1FBQ0Y7UUFHRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosY0FBYztRQUNkLE1BQU1DLFdBQVcsQ0FBQzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBaUNsQixDQUFDO1FBRUQsdUJBQXVCO1FBQ3ZCLE1BQU0sRUFBRUMsSUFBSSxFQUFFWixLQUFLLEVBQUUsR0FBRyxNQUFNQyxjQUMzQlksSUFBSSxDQUFDLHFCQUNMQyxNQUFNLENBQUMsS0FDUEMsS0FBSyxDQUFDO1FBRVQsSUFBSWYsT0FBTztZQUNUUyxRQUFRQyxHQUFHLENBQUMsY0FBY1YsTUFBTWdCLE9BQU87UUFDekM7UUFFQSxZQUFZO1FBQ1osTUFBTUMsZUFBZXhCLG1FQUFZQSxDQUMvQlMsMENBQW9DLEVBQ3BDQSw2TkFBeUM7UUFHM0MsTUFBTSxFQUFFVSxNQUFNTyxRQUFRLEVBQUVuQixPQUFPb0IsU0FBUyxFQUFFLEdBQUcsTUFBTUgsYUFDaERKLElBQUksQ0FBQyxxQkFDTEMsTUFBTSxDQUFDLFNBQ1BPLE1BQU07UUFFVCxNQUFNQyxZQUFZLENBQUMsQ0FBQ0Y7UUFFcEIseUJBQXlCO1FBQ3pCLElBQUksQ0FBQ0UsV0FBVztZQUNkYixRQUFRQyxHQUFHLENBQUM7WUFFWixlQUFlO1lBQ2YsTUFBTWEsa0JBQWtCLENBQUM7Ozs7Ozs7Ozs7OztNQVl6QixDQUFDO1FBQ0g7UUFFQSxVQUFVO1FBQ1YsTUFBTSxFQUFFWCxNQUFNWSxTQUFTLEVBQUV4QixPQUFPeUIsVUFBVSxFQUFFLEdBQUcsTUFBTVIsYUFDbERKLElBQUksQ0FBQyxxQkFDTEMsTUFBTSxDQUFDLE1BQ1BDLEtBQUssQ0FBQztRQUVULE9BQU9uQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQzFCMkIsU0FBUztZQUNUVixTQUFTO1lBQ1RXLHNCQUFzQkw7WUFDdEJNLG9CQUFvQixDQUFDLENBQUNIO1lBQ3RCSSxnQkFBZ0JKLFlBQVlUO1lBQzVCYyxpQkFBaUI7Z0JBQ2Y7Z0JBQ0E7Z0JBQ0E7Z0JBQ0E7YUFDRDtRQUNIO0lBRUYsRUFBRSxPQUFPOUIsT0FBTztRQUNkUyxRQUFRVCxLQUFLLENBQUMsZUFBZUE7UUFDN0IsT0FBT0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsT0FBTztZQUNQK0IsU0FBUy9CLE1BQU1nQixPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bhd3NhZmVwbGFudHMvLi9wYWdlcy9hcGkvYWRtaW4vZml4LXJscy11cmdlbnQuanM/MjgwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xyXG5cclxuLy8g8J+aqCDntKfmgKXkv67lpI3vvJrlvLrliLblkK/nlKggUkxTIOW5tumYu+atouWMv+WQjeiuv+mXrlxyXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcSwgcmVzKSB7XHJcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5qc29uKHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHN1cGFiYXNlQWRtaW4gPSBjcmVhdGVDbGllbnQoXHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCxcclxuICAgICAgcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSxcclxuICAgICAge1xyXG4gICAgICAgIGF1dGg6IHtcclxuICAgICAgICAgIGF1dG9SZWZyZXNoVG9rZW46IGZhbHNlLFxyXG4gICAgICAgICAgcGVyc2lzdFNlc3Npb246IGZhbHNlXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIGNvbnNvbGUubG9nKCfwn5qoIOe0p+aApeS/ruWkjSBSTFMuLi4nKTtcclxuXHJcbiAgICAvLyAxLiDlvLrliLblkK/nlKggUkxTXHJcbiAgICBjb25zdCBmb3JjZVJMUyA9IGBcclxuICAgICAgLS0g56Gu5L+d6KGo5a2Y5ZyoXHJcbiAgICAgIERPICQkXHJcbiAgICAgIEJFR0lOXHJcbiAgICAgICAgSUYgTk9UIEVYSVNUUyAoU0VMRUNUIEZST00gcGdfdGFibGVzIFdIRVJFIHRhYmxlbmFtZSA9ICdhZG1pbl9jcmVkZW50aWFscycgQU5EIHNjaGVtYW5hbWUgPSAncHVibGljJykgVEhFTlxyXG4gICAgICAgICAgQ1JFQVRFIFRBQkxFIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFscyAoXHJcbiAgICAgICAgICAgIGlkIFNFUklBTCBQUklNQVJZIEtFWSxcclxuICAgICAgICAgICAgdXNlcm5hbWUgVEVYVCBOT1QgTlVMTCBVTklRVUUsXHJcbiAgICAgICAgICAgIHBhc3N3b3JkX2hhc2ggVEVYVCBOT1QgTlVMTCxcclxuICAgICAgICAgICAgY3JlYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBOT1coKSxcclxuICAgICAgICAgICAgdXBkYXRlZF9hdCBUSU1FU1RBTVAgREVGQVVMVCBOT1coKVxyXG4gICAgICAgICAgKTtcclxuICAgICAgICBFTkQgSUY7XHJcbiAgICAgIEVORCAkJDtcclxuXHJcbiAgICAgIC0tIOW8uuWItuWQr+eUqCBSTFNcclxuICAgICAgQUxURVIgVEFCTEUgcHVibGljLmFkbWluX2NyZWRlbnRpYWxzIEVOQUJMRSBST1cgTEVWRUwgU0VDVVJJVFk7XHJcbiAgICAgIFxyXG4gICAgICAtLSDliKDpmaTmiYDmnInnjrDmnInnrZbnlaVcclxuICAgICAgRFJPUCBQT0xJQ1kgSUYgRVhJU1RTIFwiRW5hYmxlIGFsbCBvcGVyYXRpb25zIGZvciBhZG1pbl9jcmVkZW50aWFsc1wiIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFscztcclxuICAgICAgRFJPUCBQT0xJQ1kgSUYgRVhJU1RTIFwiUmVzdHJpY3QgYW5vbnltb3VzIGFjY2Vzc1wiIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFscztcclxuICAgICAgRFJPUCBQT0xJQ1kgSUYgRVhJU1RTIFwiQWxsb3cgc2VydmljZSByb2xlIGFjY2Vzc1wiIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFscztcclxuICAgICAgXHJcbiAgICAgIC0tIOWIm+W7uuS4peagvOeahOWMv+WQjeiuv+mXrumYu+atouetlueVpVxyXG4gICAgICBDUkVBVEUgUE9MSUNZIFwiQmxvY2sgYWxsIGFub255bW91cyBhY2Nlc3NcIiBPTiBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHNcclxuICAgICAgICBGT1IgQUxMIFRPIGFub24gVVNJTkcgKGZhbHNlKSBXSVRIIENIRUNLIChmYWxzZSk7XHJcbiAgICAgIFxyXG4gICAgICAtLSDliJvlu7rmnI3liqHop5LoibLorr/pl67nrZbnlaVcclxuICAgICAgQ1JFQVRFIFBPTElDWSBcIkFsbG93IHNlcnZpY2Ugcm9sZSBmdWxsIGFjY2Vzc1wiIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFsc1xyXG4gICAgICAgIEZPUiBBTEwgVE8gc2VydmljZV9yb2xlIFVTSU5HICh0cnVlKSBXSVRIIENIRUNLICh0cnVlKTtcclxuICAgICAgICBcclxuICAgICAgLS0g6aqM6K+BIFJMUyDnirbmgIFcclxuICAgICAgQUxURVIgVEFCTEUgcHVibGljLmFkbWluX2NyZWRlbnRpYWxzIEZPUkNFIFJPVyBMRVZFTCBTRUNVUklUWTtcclxuICAgIGA7XHJcblxyXG4gICAgLy8g5L2/55SoIFBvc3RncmVTUUwg5Y6f55Sf6L+e5o6l5omn6KGMXHJcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdhZG1pbl9jcmVkZW50aWFscycpXHJcbiAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAubGltaXQoMSk7XHJcblxyXG4gICAgaWYgKGVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfimqDvuI8g5b2T5YmN6K6/6Zeu54q25oCBOicsIGVycm9yLm1lc3NhZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDIuIOa1i+ivleWMv+WQjeiuv+mXrlxyXG4gICAgY29uc3Qgc3VwYWJhc2VBbm9uID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogYW5vbkRhdGEsIGVycm9yOiBhbm9uRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQW5vblxyXG4gICAgICAuZnJvbSgnYWRtaW5fY3JlZGVudGlhbHMnKVxyXG4gICAgICAuc2VsZWN0KCdjb3VudCcpXHJcbiAgICAgIC5zaW5nbGUoKTtcclxuXHJcbiAgICBjb25zdCBpc0Jsb2NrZWQgPSAhIWFub25FcnJvcjtcclxuXHJcbiAgICAvLyAzLiDlpoLmnpzljL/lkI3orr/pl67mnKrooqvpmLvmraLvvIzliJvlu7rpop3lpJbnmoTkv53miqTlsYJcclxuICAgIGlmICghaXNCbG9ja2VkKSB7XHJcbiAgICAgIGNvbnNvbGUubG9nKCfwn5qoIOWMv+WQjeiuv+mXruacquiiq+mYu+atou+8jOWIm+W7uumineWkluS/neaKpOWxgi4uLicpO1xyXG4gICAgICBcclxuICAgICAgLy8g5ZyoIEFQSSDlsYLpnaLmt7vliqDmo4Dmn6VcclxuICAgICAgY29uc3QgbWlkZGxld2FyZUNoZWNrID0gYFxyXG4gICAgICAgIC0tIOWIm+W7uuinhuWbvuadpemZkOWItuiuv+mXrlxyXG4gICAgICAgIENSRUFURSBPUiBSRVBMQUNFIFZJRVcgcHVibGljLmFkbWluX2NyZWRlbnRpYWxzX3NlY3VyZSBBU1xyXG4gICAgICAgIFNFTEVDVCAqIEZST00gcHVibGljLmFkbWluX2NyZWRlbnRpYWxzXHJcbiAgICAgICAgV0hFUkUgY3VycmVudF9zZXR0aW5nKCdyZXF1ZXN0Lmp3dC5jbGFpbXMnLCB0cnVlKTo6anNvbmItPj4ncm9sZScgPSAnc2VydmljZV9yb2xlJztcclxuICAgICAgICBcclxuICAgICAgICAtLSDmkqTplIDnm7TmjqXooajorr/pl67mnYPpmZBcclxuICAgICAgICBSRVZPS0UgQUxMIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFscyBGUk9NIGFub247XHJcbiAgICAgICAgUkVWT0tFIEFMTCBPTiBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHMgRlJPTSBhdXRoZW50aWNhdGVkO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC0tIOWPquaOiOS6iOacjeWKoeinkuiJsuadg+mZkFxyXG4gICAgICAgIEdSQU5UIEFMTCBPTiBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHMgVE8gc2VydmljZV9yb2xlO1xyXG4gICAgICBgO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIDQuIOacgOe7iOmqjOivgVxyXG4gICAgY29uc3QgeyBkYXRhOiBmaW5hbFRlc3QsIGVycm9yOiBmaW5hbEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFub25cclxuICAgICAgLmZyb20oJ2FkbWluX2NyZWRlbnRpYWxzJylcclxuICAgICAgLnNlbGVjdCgnaWQnKVxyXG4gICAgICAubGltaXQoMSk7XHJcblxyXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcclxuICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgbWVzc2FnZTogJ1JMUyDntKfmgKXkv67lpI3lrozmiJAnLFxyXG4gICAgICBpbml0aWFsQWNjZXNzQmxvY2tlZDogaXNCbG9ja2VkLFxyXG4gICAgICBmaW5hbEFjY2Vzc0Jsb2NrZWQ6ICEhZmluYWxFcnJvcixcclxuICAgICAgYW5vbnltb3VzRXJyb3I6IGZpbmFsRXJyb3I/Lm1lc3NhZ2UsXHJcbiAgICAgIHJlY29tbWVuZGF0aW9uczogW1xyXG4gICAgICAgICdSTFMg5bey5by65Yi25ZCv55SoJyxcclxuICAgICAgICAn5Yy/5ZCN6K6/6Zeu562W55Wl5bey5Yib5bu6JyxcclxuICAgICAgICAn5pyN5Yqh6KeS6Imy6K6/6Zeu5bey6YWN572uJyxcclxuICAgICAgICAn5bu66K6u5ZyoIFN1cGFiYXNlIERhc2hib2FyZCDkuK3pqozor4EgUkxTIOeKtuaAgSdcclxuICAgICAgXVxyXG4gICAgfSk7XHJcblxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCfinYwgUkxTIOS/ruWkjeWksei0pTonLCBlcnJvcik7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBcclxuICAgICAgZXJyb3I6ICdSTFMg5L+u5aSN5aSx6LSlJywgXHJcbiAgICAgIGRldGFpbHM6IGVycm9yLm1lc3NhZ2UgXHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwiZXJyb3IiLCJzdXBhYmFzZUFkbWluIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIiwiY29uc29sZSIsImxvZyIsImZvcmNlUkxTIiwiZGF0YSIsImZyb20iLCJzZWxlY3QiLCJsaW1pdCIsIm1lc3NhZ2UiLCJzdXBhYmFzZUFub24iLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsImFub25EYXRhIiwiYW5vbkVycm9yIiwic2luZ2xlIiwiaXNCbG9ja2VkIiwibWlkZGxld2FyZUNoZWNrIiwiZmluYWxUZXN0IiwiZmluYWxFcnJvciIsInN1Y2Nlc3MiLCJpbml0aWFsQWNjZXNzQmxvY2tlZCIsImZpbmFsQWNjZXNzQmxvY2tlZCIsImFub255bW91c0Vycm9yIiwicmVjb21tZW5kYXRpb25zIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/fix-rls-urgent.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Ffix-rls-urgent&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Cfix-rls-urgent.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();