"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/admin/setup-rls";
exports.ids = ["pages/api/admin/setup-rls"];
exports.modules = {

/***/ "@supabase/supabase-js":
/*!****************************************!*\
  !*** external "@supabase/supabase-js" ***!
  \****************************************/
/***/ ((module) => {

module.exports = require("@supabase/supabase-js");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup-rls&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup-rls.js&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup-rls&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup-rls.js&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_admin_setup_rls_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages\\api\\admin\\setup-rls.js */ \"(api)/./pages/api/admin/setup-rls.js\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_setup_rls_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_admin_setup_rls_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/admin/setup-rls\",\n        pathname: \"/api/admin/setup-rls\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_admin_setup_rls_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmFkbWluJTJGc2V0dXAtcmxzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlNUNhcGklNUNhZG1pbiU1Q3NldHVwLXJscy5qcyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUM4RDtBQUM5RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsMERBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLDBEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL3Bhd3NhZmVwbGFudHMvP2FiM2UiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzXFxcXGFwaVxcXFxhZG1pblxcXFxzZXR1cC1ybHMuanNcIjtcbi8vIFJlLWV4cG9ydCB0aGUgaGFuZGxlciAoc2hvdWxkIGJlIHRoZSBkZWZhdWx0IGV4cG9ydCkuXG5leHBvcnQgZGVmYXVsdCBob2lzdCh1c2VybGFuZCwgXCJkZWZhdWx0XCIpO1xuLy8gUmUtZXhwb3J0IGNvbmZpZy5cbmV4cG9ydCBjb25zdCBjb25maWcgPSBob2lzdCh1c2VybGFuZCwgXCJjb25maWdcIik7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZG1pbi9zZXR1cC1ybHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hZG1pbi9zZXR1cC1ybHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup-rls&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup-rls.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/admin/setup-rls.js":
/*!**************************************!*\
  !*** ./pages/api/admin/setup-rls.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"@supabase/supabase-js\");\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__);\n\n// ðŸ”’ æ‰§è¡Œ admin_credentials è¡¨çš„ RLS å®‰å…¨é…ç½®\nasync function handler(req, res) {\n    if (req.method !== \"POST\") {\n        return res.status(405).json({\n            error: \"Method not allowed\"\n        });\n    }\n    try {\n        // ä½¿ç”¨æœåŠ¡è§’è‰²å®¢æˆ·ç«¯ï¼ˆæœ€é«˜æƒé™ï¼‰\n        const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rczfbgzghwiqpxihlexs.supabase.co\", process.env.SUPABASE_SERVICE_ROLE_KEY, {\n            auth: {\n                autoRefreshToken: false,\n                persistSession: false\n            }\n        });\n        console.log(\"\\uD83D\\uDD12 å¼€å§‹é…ç½® admin_credentials è¡¨çš„ RLS...\");\n        // 1. å¯ç”¨ RLS\n        const { error: rlsError } = await supabaseAdmin.from(\"admin_credentials\").select(\"count\").then(()=>{\n            // è¡¨å­˜åœ¨ï¼Œç»§ç»­é…ç½®\n            return {\n                error: null\n            };\n        }).catch((err)=>{\n            console.log(\"è¡¨æ£€æŸ¥:\", err);\n            return {\n                error: null\n            }; // å¿½ç•¥è¡¨æ£€æŸ¥é”™è¯¯\n        });\n        // ç›´æŽ¥æ‰§è¡Œ SQL è¯­å¥\n        const sqlStatements = [\n            \"ALTER TABLE public.admin_credentials ENABLE ROW LEVEL SECURITY;\",\n            'DROP POLICY IF EXISTS \"Enable all operations for admin_credentials\" ON public.admin_credentials;',\n            `CREATE POLICY \"Restrict anonymous access\" ON public.admin_credentials\r\n       FOR ALL TO anon USING (false) WITH CHECK (false);`,\n            `CREATE POLICY \"Allow service role access\" ON public.admin_credentials\r\n       FOR ALL TO service_role USING (true) WITH CHECK (true);`\n        ];\n        const results = [];\n        for (const sql of sqlStatements){\n            try {\n                // ä½¿ç”¨ .rpc è°ƒç”¨ sql å‡½æ•°ï¼ˆå¦‚æžœå­˜åœ¨ï¼‰\n                const { data, error } = await supabaseAdmin.rpc(\"exec\", {\n                    sql\n                });\n                if (error) {\n                    // å¦‚æžœ exec ä¸å­˜åœ¨ï¼Œå°è¯•å…¶ä»–æ–¹æ³•\n                    console.log(`âš ï¸ RPC exec å¤±è´¥ï¼Œå°è¯•ç›´æŽ¥æ‰§è¡Œ: ${sql.substring(0, 50)}...`);\n                    // å°è¯•ä½¿ç”¨ postgrest çš„ raw SQL\n                    const { data: rawData, error: rawError } = await supabaseAdmin.from(\"admin_credentials\").select(\"*\").limit(1);\n                    results.push({\n                        sql: sql.substring(0, 50) + \"...\",\n                        status: rawError ? \"skipped\" : \"success\",\n                        error: rawError?.message\n                    });\n                } else {\n                    results.push({\n                        sql: sql.substring(0, 50) + \"...\",\n                        status: \"success\",\n                        data\n                    });\n                }\n            } catch (err) {\n                results.push({\n                    sql: sql.substring(0, 50) + \"...\",\n                    status: \"error\",\n                    error: err.message\n                });\n            }\n        }\n        // 6. æµ‹è¯•åŒ¿åè®¿é—®ï¼ˆåº”è¯¥å¤±è´¥ï¼‰\n        const supabaseAnon = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://rczfbgzghwiqpxihlexs.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJjemZiZ3pnaHdpcXB4aWhsZXhzIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2Mzk5NDUwMSwiZXhwIjoyMDc5NTcwNTAxfQ.uF3IofVn0ZkFSM6aSYsWCmOWHl26ybxv_bwMST3Zsio\");\n        const { data: testData, error: testError } = await supabaseAnon.from(\"admin_credentials\").select(\"count\");\n        return res.status(200).json({\n            success: true,\n            message: \"admin_credentials è¡¨ RLS é…ç½®å®Œæˆ\",\n            results,\n            anonymousAccessBlocked: !!testError,\n            anonymousAccessError: testError?.message\n        });\n    } catch (error) {\n        console.error(\"âŒ RLS é…ç½®è¿‡ç¨‹ä¸­å‘ç”Ÿé”™è¯¯:\", error);\n        return res.status(500).json({\n            error: \"RLS é…ç½®å¤±è´¥\",\n            details: error.message\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TzNCLE9BQU87UUFDZFMsUUFBUVQsS0FBSyxDQUFDLG9CQUFvQkE7UUFDbEMsT0FBT0osSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQkMsT0FBTztZQUNQbUMsU0FBU25DLE1BQU0yQixPQUFPO1FBQ3hCO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL3Bhd3NhZmVwbGFudHMvLi9wYWdlcy9hcGkvYWRtaW4vc2V0dXAtcmxzLmpzP2UyOTIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcclxuXHJcbi8vIPCflJIg5omn6KGMIGFkbWluX2NyZWRlbnRpYWxzIOihqOeahCBSTFMg5a6J5YWo6YWN572uXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICBpZiAocmVxLm1ldGhvZCAhPT0gJ1BPU1QnKSB7XHJcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZCcgfSk7XHJcbiAgfVxyXG5cclxuICB0cnkge1xyXG4gICAgLy8g5L2/55So5pyN5Yqh6KeS6Imy5a6i5oi356uv77yI5pyA6auY5p2D6ZmQ77yJXHJcbiAgICBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXHJcbiAgICAgIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVksXHJcbiAgICAgIHtcclxuICAgICAgICBhdXRoOiB7XHJcbiAgICAgICAgICBhdXRvUmVmcmVzaFRva2VuOiBmYWxzZSxcclxuICAgICAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zb2xlLmxvZygn8J+UkiDlvIDlp4vphY3nva4gYWRtaW5fY3JlZGVudGlhbHMg6KGo55qEIFJMUy4uLicpO1xyXG5cclxuICAgIC8vIDEuIOWQr+eUqCBSTFNcclxuICAgIGNvbnN0IHsgZXJyb3I6IHJsc0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgIC5mcm9tKCdhZG1pbl9jcmVkZW50aWFscycpXHJcbiAgICAgIC5zZWxlY3QoJ2NvdW50JylcclxuICAgICAgLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIC8vIOihqOWtmOWcqO+8jOe7p+e7remFjee9rlxyXG4gICAgICAgIHJldHVybiB7IGVycm9yOiBudWxsIH07XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaChlcnIgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCfooajmo4Dmn6U6JywgZXJyKTtcclxuICAgICAgICByZXR1cm4geyBlcnJvcjogbnVsbCB9OyAvLyDlv73nlaXooajmo4Dmn6XplJnor69cclxuICAgICAgfSk7XHJcblxyXG4gICAgLy8g55u05o6l5omn6KGMIFNRTCDor63lj6VcclxuICAgIGNvbnN0IHNxbFN0YXRlbWVudHMgPSBbXHJcbiAgICAgICdBTFRFUiBUQUJMRSBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHMgRU5BQkxFIFJPVyBMRVZFTCBTRUNVUklUWTsnLFxyXG4gICAgICAnRFJPUCBQT0xJQ1kgSUYgRVhJU1RTIFwiRW5hYmxlIGFsbCBvcGVyYXRpb25zIGZvciBhZG1pbl9jcmVkZW50aWFsc1wiIE9OIHB1YmxpYy5hZG1pbl9jcmVkZW50aWFsczsnLFxyXG4gICAgICBgQ1JFQVRFIFBPTElDWSBcIlJlc3RyaWN0IGFub255bW91cyBhY2Nlc3NcIiBPTiBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHNcclxuICAgICAgIEZPUiBBTEwgVE8gYW5vbiBVU0lORyAoZmFsc2UpIFdJVEggQ0hFQ0sgKGZhbHNlKTtgLFxyXG4gICAgICBgQ1JFQVRFIFBPTElDWSBcIkFsbG93IHNlcnZpY2Ugcm9sZSBhY2Nlc3NcIiBPTiBwdWJsaWMuYWRtaW5fY3JlZGVudGlhbHNcclxuICAgICAgIEZPUiBBTEwgVE8gc2VydmljZV9yb2xlIFVTSU5HICh0cnVlKSBXSVRIIENIRUNLICh0cnVlKTtgXHJcbiAgICBdO1xyXG5cclxuICAgIGNvbnN0IHJlc3VsdHMgPSBbXTtcclxuICAgIFxyXG4gICAgZm9yIChjb25zdCBzcWwgb2Ygc3FsU3RhdGVtZW50cykge1xyXG4gICAgICB0cnkge1xyXG4gICAgICAgIC8vIOS9v+eUqCAucnBjIOiwg+eUqCBzcWwg5Ye95pWw77yI5aaC5p6c5a2Y5Zyo77yJXHJcbiAgICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VBZG1pbi5ycGMoJ2V4ZWMnLCB7IHNxbCB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAoZXJyb3IpIHtcclxuICAgICAgICAgIC8vIOWmguaenCBleGVjIOS4jeWtmOWcqO+8jOWwneivleWFtuS7luaWueazlVxyXG4gICAgICAgICAgY29uc29sZS5sb2coYOKaoO+4jyBSUEMgZXhlYyDlpLHotKXvvIzlsJ3or5Xnm7TmjqXmiafooYw6ICR7c3FsLnN1YnN0cmluZygwLCA1MCl9Li4uYCk7XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIC8vIOWwneivleS9v+eUqCBwb3N0Z3Jlc3Qg55qEIHJhdyBTUUxcclxuICAgICAgICAgIGNvbnN0IHsgZGF0YTogcmF3RGF0YSwgZXJyb3I6IHJhd0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAgIC5mcm9tKCdhZG1pbl9jcmVkZW50aWFscycpXHJcbiAgICAgICAgICAgIC5zZWxlY3QoJyonKVxyXG4gICAgICAgICAgICAubGltaXQoMSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgcmVzdWx0cy5wdXNoKHtcclxuICAgICAgICAgICAgc3FsOiBzcWwuc3Vic3RyaW5nKDAsIDUwKSArICcuLi4nLFxyXG4gICAgICAgICAgICBzdGF0dXM6IHJhd0Vycm9yID8gJ3NraXBwZWQnIDogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBlcnJvcjogcmF3RXJyb3I/Lm1lc3NhZ2VcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICByZXN1bHRzLnB1c2goe1xyXG4gICAgICAgICAgICBzcWw6IHNxbC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicsXHJcbiAgICAgICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxyXG4gICAgICAgICAgICBkYXRhXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICAgIHJlc3VsdHMucHVzaCh7XHJcbiAgICAgICAgICBzcWw6IHNxbC5zdWJzdHJpbmcoMCwgNTApICsgJy4uLicsXHJcbiAgICAgICAgICBzdGF0dXM6ICdlcnJvcicsXHJcbiAgICAgICAgICBlcnJvcjogZXJyLm1lc3NhZ2VcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIDYuIOa1i+ivleWMv+WQjeiuv+mXru+8iOW6lOivpeWksei0pe+8iVxyXG4gICAgY29uc3Qgc3VwYWJhc2VBbm9uID0gY3JlYXRlQ2xpZW50KFxyXG4gICAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwsXHJcbiAgICAgIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHsgZGF0YTogdGVzdERhdGEsIGVycm9yOiB0ZXN0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlQW5vblxyXG4gICAgICAuZnJvbSgnYWRtaW5fY3JlZGVudGlhbHMnKVxyXG4gICAgICAuc2VsZWN0KCdjb3VudCcpO1xyXG5cclxuICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7XHJcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgIG1lc3NhZ2U6ICdhZG1pbl9jcmVkZW50aWFscyDooaggUkxTIOmFjee9ruWujOaIkCcsXHJcbiAgICAgIHJlc3VsdHMsXHJcbiAgICAgIGFub255bW91c0FjY2Vzc0Jsb2NrZWQ6ICEhdGVzdEVycm9yLFxyXG4gICAgICBhbm9ueW1vdXNBY2Nlc3NFcnJvcjogdGVzdEVycm9yPy5tZXNzYWdlXHJcbiAgICB9KTtcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ+KdjCBSTFMg6YWN572u6L+H56iL5Lit5Y+R55Sf6ZSZ6K+vOicsIGVycm9yKTtcclxuICAgIHJldHVybiByZXMuc3RhdHVzKDUwMCkuanNvbih7IFxyXG4gICAgICBlcnJvcjogJ1JMUyDphY3nva7lpLHotKUnLCBcclxuICAgICAgZGV0YWlsczogZXJyb3IubWVzc2FnZSBcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJlcnJvciIsInN1cGFiYXNlQWRtaW4iLCJwcm9jZXNzIiwiZW52IiwiTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIiwiU1VQQUJBU0VfU0VSVklDRV9ST0xFX0tFWSIsImF1dGgiLCJhdXRvUmVmcmVzaFRva2VuIiwicGVyc2lzdFNlc3Npb24iLCJjb25zb2xlIiwibG9nIiwicmxzRXJyb3IiLCJmcm9tIiwic2VsZWN0IiwidGhlbiIsImNhdGNoIiwiZXJyIiwic3FsU3RhdGVtZW50cyIsInJlc3VsdHMiLCJzcWwiLCJkYXRhIiwicnBjIiwic3Vic3RyaW5nIiwicmF3RGF0YSIsInJhd0Vycm9yIiwibGltaXQiLCJwdXNoIiwibWVzc2FnZSIsInN1cGFiYXNlQW5vbiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIiwidGVzdERhdGEiLCJ0ZXN0RXJyb3IiLCJzdWNjZXNzIiwiYW5vbnltb3VzQWNjZXNzQmxvY2tlZCIsImFub255bW91c0FjY2Vzc0Vycm9yIiwiZGV0YWlscyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/admin/setup-rls.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fadmin%2Fsetup-rls&preferredRegion=&absolutePagePath=.%2Fpages%5Capi%5Cadmin%5Csetup-rls.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();