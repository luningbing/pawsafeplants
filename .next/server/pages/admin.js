(()=>{var e={};e.id=6964,e.ids=[6964,2888,660],e.modules={4422:(e,s,t)=>{"use strict";t.r(s),t.d(s,{config:()=>S,default:()=>b,getServerSideProps:()=>N,getStaticPaths:()=>v,getStaticProps:()=>w,reportWebVitals:()=>k,routeModule:()=>_,unstable_getServerProps:()=>R,unstable_getServerSideProps:()=>B,unstable_getStaticParams:()=>D,unstable_getStaticPaths:()=>z,unstable_getStaticProps:()=>C});var a={};t.r(a),t.d(a,{default:()=>y});var r=t(7093),o=t(5244),l=t(1323),i=t(1682),n=t.n(i),d=t(8269),f=t(997),c=t(9816),m=t.n(c),x=t(6689),p=t(1664),u=t.n(p),g=t(968),h=t.n(g),j=t(1163);function y(){let e=(0,j.useRouter)(),[s,t]=(0,x.useState)(!1),[a,r]=(0,x.useState)(!0),[o,l]=(0,x.useState)([]),[i,n]=(0,x.useState)([]),[d,c]=(0,x.useState)({heroImage:"",logo:""}),[p,g]=(0,x.useState)(""),[y,b]=(0,x.useState)(""),[w,v]=(0,x.useState)({}),[N,S]=(0,x.useState)(!1),[k,C]=(0,x.useState)(null),[z,D]=(0,x.useState)(""),[R,B]=(0,x.useState)(""),[_,P]=(0,x.useState)("hero-carousel"),[T,W]=(0,x.useState)(""),[I,F]=(0,x.useState)(""),[$,A]=(0,x.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[M,L]=(0,x.useState)(!1),[E,O]=(0,x.useState)(""),[U,q]=(0,x.useState)(""),[H,J]=(0,x.useState)([]),[Y,G]=(0,x.useState)(""),[K,V]=(0,x.useState)(null),[X,Z]=(0,x.useState)(""),[Q,ee]=(0,x.useState)(!1),[es,et]=(0,x.useState)(!1),[ea,er]=(0,x.useState)(null),[eo,el]=(0,x.useState)([{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""}]),[ei,en]=(0,x.useState)([!1,!1,!1]),[ed,ef]=(0,x.useState)(["","",""]),[ec,em]=(0,x.useState)([!1,!1,!1]),[ex,ep]=(0,x.useState)([{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""}]),[eu,eg]=(0,x.useState)([!1,!1,!1]),[eh,ej]=(0,x.useState)(["","",""]),[ey,eb]=(0,x.useState)([!1,!1,!1]),[ew,ev]=(0,x.useState)(!1),[eN,eS]=(0,x.useState)(null),[ek,eC]=(0,x.useState)({title:"",scientific_name:"",toxicity_level:"Safe",care_difficulty:"Easy",summary:"",image:"",symptoms:[],what_to_do:"",aspca_link:"",care_tips:"",water_needs:"",light_needs:"",temperature:"",pet_moment:""}),[ez,eD]=(0,x.useState)(!1),[eR,eB]=(0,x.useState)(""),[e_,eP]=(0,x.useState)(""),[eT,eW]=(0,x.useState)("Safe"),[eI,eF]=(0,x.useState)("Easy"),[e$,eA]=(0,x.useState)(""),[eM,eL]=(0,x.useState)(""),[eE,eO]=(0,x.useState)(""),[eU,eq]=(0,x.useState)(!1),[eH,eJ]=(0,x.useState)(null),[eY,eG]=(0,x.useState)(""),[eK,eV]=(0,x.useState)(!1),[eX,eZ]=(0,x.useState)(!1),[eQ,e0]=(0,x.useState)(""),[e5,e1]=(0,x.useState)(null),[e6,e7]=(0,x.useState)(""),[e4,e3]=(0,x.useState)(!1),[e2,e8]=(0,x.useState)(!1),[e9,se]=(0,x.useState)(""),[ss,st]=(0,x.useState)([]),[sa,sr]=(0,x.useState)(!1),[so,sl]=(0,x.useState)(!1),si="#87A96B",sn="#6B8553",sd="#FAF7F2",sf="#F5F1E8",sc="24px",sm="16px",sx=async e=>{if(e){S(!0);try{if(console.log("Uploading file:",e.name,"Size:",e.size,"Type:",e.type),e&&e.size>52428800){B("文件大小不能超过50MB，请选择较小的图片"),setTimeout(()=>B(""),3e3);let e=document.getElementById("file-upload");e&&(e.value=""),C(null),D("");return}let s=new FormData;s.append("file",e),s.append("filename",e.name.replace(/[^a-zA-Z0-9._-]/g,"_"));let t=await fetch("/api/upload-chunked",{method:"POST",body:s});if(console.log("Upload response status:",t.status),t.ok){let s=await t.json();if(console.log("Upload response:",s),s.success){let t=Y||e.name;await sT(s.data.publicUrl,t,e.size,e.type);let a=await (await fetch("/api/list-images")).json();l(a.paths||[]),C(null),D(""),G(""),B("图片上传成功！")}else B(`上传失败: ${s.error||"未知错误"}`),setTimeout(()=>B(""),3e3);return setTimeout(()=>B(""),3e3),s?.path||""}{let e=await t.text();console.error("Upload failed:",t.status,e),B("上传失败: "+e),setTimeout(()=>B(""),3e3)}}catch(e){console.error("Upload error:",e),B("上传失败: "+e.message),setTimeout(()=>B(""),3e3)}finally{S(!1)}}},sp=(e,s)=>{if(!e)return s.name;let t=s.name.split(".").pop(),a=e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-");return`${a}.${t}`},su=async(e,s=!1)=>{if(!e)return;if(e.size>10485760){B("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>B(""),3e3);return}let t=sp(s?ek.title:eR,e);s?e3(!0):eV(!0);try{let a=new FileReader;a.onload=async()=>{let e=a.result,r=await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:t,data:String(e||"")})});if(r.ok){let e=await r.json(),t=e?.path||"";s?(eC({...ek,image:t}),e3(!1)):(eL(t),eV(!1));let a=await (await fetch("/api/list-images")).json();l(a.paths||[])}else s?e3(!1):eV(!1)},a.readAsDataURL(e)}catch{s?e3(!1):eV(!1)}},sg=(e,s=!1)=>{if(s){e1(e);let s=new FileReader;s.onload=e=>e7(e.target.result),s.readAsDataURL(e)}else{eJ(e);let s=new FileReader;s.onload=e=>eG(e.target.result),s.readAsDataURL(e)}},sh=(e,s=!1)=>{s?(se(e),eC({...ek,image:e}),e7(e),e8(!1)):(e0(e),eL(e),eG(e),eZ(!1))},sj=e=>{eC({...ek,pet_moment:e}),sr(!1)},sy=async(e,s)=>{if(!e)return;if(e.size>10485760){B("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>B(""),3e3);return}let t=[...ei];t[s]=!0,en(t);try{let t=new FileReader;t.onloadend=async()=>{let e=t.result.split(",")[1],a=`hero-${s+1}-${Date.now()}.jpg`;if((await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:a,base64:e})})).ok){let e=`/uploads/${a}`,t=[...eo];t[s].imageUrl=e,el(t);let r=[...ed];r[s]=e,ef(r)}},t.readAsDataURL(e)}catch(e){console.error("Hero image upload error:",e)}finally{let e=[...ei];e[s]=!1,en(e)}},sb=(e,s)=>{console.log("Hero media select:",{imagePath:e,index:s});let t=[...eo];t[s].imageUrl=e,el(t),console.log("Updated hero slides:",t);let a=[...ed];a[s]=e,ef(a),console.log("Updated hero previews:",a);let r=[...ec];r[s]=!1,em(r)},sw=(e,s)=>{let t=[...eo];t[s].link=e,el(t)},sv=(e,s)=>{let t=[...eo];t[s].title=e,el(t)},sN=(e,s)=>{let t=[...eo];t[s].subtitle=e,el(t)},sS=async()=>{try{console.log("Saving hero carousel:",eo);let e=new AbortController,s=setTimeout(()=>e.abort(),3e4),t=await fetch("/api/hero-carousel-db",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slides:eo}),signal:e.signal});if(clearTimeout(s),console.log("Save response status:",t.status),t.ok){let e=await t.json();console.log("Save response:",e),B("首页轮播图保存成功！"),setTimeout(()=>B(""),3e3)}else{let e=await t.text();console.error("Save failed:",t.status,e),B("保存失败: "+e),setTimeout(()=>B(""),5e3)}}catch(e){console.error("Save hero carousel error:",e),"AbortError"===e.name?B("保存超时，请重试"):B("保存失败: "+e.message),setTimeout(()=>B(""),5e3)}},sk=async e=>{try{await navigator.clipboard.writeText(e),W(e),setTimeout(()=>W(""),2e3)}catch{B("复制失败")}},sC=e=>{eS(e),eC({title:e.title||"",scientific_name:e.scientific_name||"",toxicity_level:e.toxicity_level||"Safe",care_difficulty:e.care_difficulty||"Easy",summary:e.summary||"",image:e.image||"",symptoms:e.symptoms||[],what_to_do:e.what_to_do||"",aspca_link:e.aspca_link||"",care_tips:e.care_tips||"",water_needs:e.water_needs||"",light_needs:e.light_needs||"",temperature:e.temperature||"",pet_moment:e.pet_moment||""}),e.image?e7(e.image):e7(""),ev(!0)},sz=async e=>{e.preventDefault(),eD(!0);try{if((await fetch("/api/update-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:eN.slug,...ek})})).ok){let e=await (await fetch("/api/plants")).json();n(e.plants||[]),ev(!1),B("植物信息更新成功！"),setTimeout(()=>B(""),3e3)}}catch{B("更新失败")}finally{eD(!1)}},sD=async e=>{if(confirm("确定要删除这个植物吗？"))try{if((await fetch("/api/delete-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e})})).ok){let e=await (await fetch("/api/plants")).json();n(e.plants||[]),B("植物删除成功！"),setTimeout(()=>B(""),3e3)}}catch{B("删除失败")}},sR=async e=>{e.preventDefault(),eq(!0);try{if((await fetch("/api/save-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:eR,scientific_name:e_,toxicity_level:eT,care_difficulty:eI,summary:e$,image:eM})})).ok){let e=await (await fetch("/api/plants")).json();n(e.plants||[]),eB(""),eP(""),eW("Safe"),eF("Easy"),eA(""),eL(""),eO("植物添加成功！"),setTimeout(()=>eO(""),3e3)}}catch{eO("添加失败")}finally{eq(!1)}},sB=i.filter(e=>e.title?.toLowerCase().includes(I.toLowerCase())||e.scientific_name?.toLowerCase().includes(I.toLowerCase())),s_=async s=>{if(s.preventDefault(),O(""),q(""),!$.oldPassword||!$.newPassword||!$.confirmPassword){O("请填写所有字段");return}if($.newPassword.length<6){O("新密码至少需要 6 位字符");return}if($.newPassword!==$.confirmPassword){O("新密码与确认密码不匹配");return}L(!0);try{let s=await fetch("/api/admin/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("adminToken")}`},body:JSON.stringify({oldPassword:$.oldPassword,newPassword:$.newPassword})}),t=await s.json();s.ok?(q("密码修改成功！即将退出登录..."),A({oldPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),e.push("/login")},2e3)):O(t.error||"密码修改失败")}catch(e){O("网络错误，请重试")}finally{L(!1)}},sP=async()=>{ee(!0);try{let e=await fetch("/api/media"),s=await e.json();e.ok&&(J(s.media||[]),setTimeout(()=>{sF()},1e3))}catch(e){console.error("Failed to load media metadata:",e)}finally{ee(!1)}},sT=async(e,s,t,a)=>{try{(await fetch("/api/media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e,display_name:s,file_size:t,file_type:a})})).ok&&(await sP(),er({type:"success",message:`Metadata created: ${s}`}),setTimeout(()=>er(null),2e3))}catch(e){console.error("Failed to save media metadata:",e),er({type:"error",message:`Failed to create metadata: ${s}`}),setTimeout(()=>er(null),2e3)}},sW=async(e,s)=>{if(!e){console.error("No metadata ID provided for:",s),er({type:"error",message:"Cannot rename: image metadata missing"});return}if(!s||0===s.trim().length){console.error("Empty display name provided"),er({type:"error",message:"Display name cannot be empty"});return}et(!0),console.log("\uD83D\uDD04 Starting rename operation:",{id:e,displayName:s});try{let t=await fetch("/api/media/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:e,displayName:s.trim()})}),a=await t.json();t.ok?(J(t=>t.map(t=>t.id===e?{...t,display_name:s.trim()}:t)),er({type:"success",message:"Rename successful"}),V(null),Z(""),setTimeout(()=>er(null),3e3),console.log("✅ Media renamed successfully:",a.media)):(er({type:"error",message:`${a.error||"Save failed, please check network or permissions"}`}),console.error("❌ Rename failed:",a))}catch(e){console.error("Network error during rename:",e),er({type:"error",message:"Save failed, please check network or permissions"})}finally{et(!1)}},sI=e=>{let s=H.find(s=>s.file_path===e);return s?.display_name||e.split("/").pop()},sF=async()=>{if(!o||0===o.length){console.log("\uD83D\uDCDD No images to process");return}let e=o.filter(e=>!H.some(s=>s.file_path===e));if(e.length>0){for(let s of(console.log("\uD83D\uDCDD Auto-creating metadata for",e.length,"missing images"),e))try{await sT(s,s.split("/").pop(),0,"image/unknown"),console.log("✅ Created metadata for:",s)}catch(e){console.error("❌ Failed to create metadata for:",s,e)}setTimeout(()=>{sP()},500)}else console.log("✅ All images have metadata")};return(0,f.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:sd,fontFamily:"system-ui, -apple-system, sans-serif"},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)(h(),{children:[f.jsx("title",{className:"jsx-4754611355ff0f67",children:"管理后台 - PawSafePlants"}),f.jsx("meta",{name:"description",content:"PawSafePlants 管理后台",className:"jsx-4754611355ff0f67"})]}),ea&&f.jsx("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999,padding:"1rem 1.5rem",borderRadius:"8px",fontSize:"0.9rem",fontWeight:"500",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backgroundColor:"success"===ea.type?"#d4edda":"#f8d7da",color:"success"===ea.type?"#155724":"#721c24",border:`1px solid ${"success"===ea.type?"#c3e6cb":"#f5c6cb"}`,animation:"slideInRight 0.3s ease",maxWidth:"300px"},className:"jsx-4754611355ff0f67",children:ea.message}),a&&f.jsx("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"white",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{width:"60px",height:"60px",backgroundColor:si,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",fontSize:"2rem",color:"white",animation:"spin 1s linear infinite"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDF3F"}),f.jsx("h2",{style:{color:si,margin:"0 0 0.5rem 0"},className:"jsx-4754611355ff0f67",children:"验证中..."}),f.jsx("p",{style:{color:"#666",margin:0},className:"jsx-4754611355ff0f67",children:"正在验证登录状态"})]})}),(0,f.jsxs)("div",{style:{backgroundColor:si,color:"white",padding:"1.5rem 2rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[f.jsx("h1",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDF3F PawSafePlants 管理后台"}),f.jsx(u(),{href:"/",style:{color:"white",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.2)"},children:"返回首页"})]}),(0,f.jsxs)("div",{style:{display:so?"block":"flex",minHeight:"calc(100vh - 80px)"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{width:so?"100%":"260px",backgroundColor:"white",boxShadow:so?"none":"4px 0 12px rgba(0,0,0,0.08)",padding:so?"1rem":"2rem 0",borderBottom:so?`1px solid ${sf}`:"none"},className:"jsx-4754611355ff0f67",children:f.jsx("nav",{style:{padding:"0 1rem"},className:"jsx-4754611355ff0f67",children:[{id:"hero-carousel",label:"首页轮播图",icon:"\uD83C\uDFA0"},{id:"add-plant",label:"添加植物",icon:"\uD83C\uDF31"},{id:"plant-list",label:"植物列表",icon:"\uD83D\uDCCB"},{id:"media-library",label:"媒体库",icon:"\uD83D\uDDBC️"},{id:"atmosphere",label:"氛围图管理",icon:"\uD83C\uDF38"},{id:"security",label:"安全设置",icon:"\uD83D\uDD12"}].map(e=>(0,f.jsxs)("button",{onClick:()=>P(e.id),style:{width:"100%",padding:"1rem",marginBottom:"0.5rem",border:"none",borderRadius:sm,backgroundColor:_===e.id?si:"transparent",color:_===e.id?"white":"#333",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s ease",boxShadow:_===e.id?"0 4px 12px rgba(135, 169, 107, 0.3)":"none"},className:"jsx-4754611355ff0f67",children:[f.jsx("span",{style:{fontSize:"1.25rem"},className:"jsx-4754611355ff0f67",children:e.icon}),e.label]},e.id))})}),(0,f.jsxs)("div",{style:{flex:1,padding:so?"1rem":"2rem",overflowY:"auto",width:so?"100%":"auto"},className:"jsx-4754611355ff0f67",children:[R&&f.jsx("div",{style:{padding:"1rem",marginBottom:"1.5rem",borderRadius:sm,backgroundColor:si,color:"white",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",animation:"slideIn 0.3s ease"},className:"jsx-4754611355ff0f67",children:R}),"hero-carousel"===_&&(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",minHeight:"600px"},className:"jsx-4754611355ff0f67",children:[f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:sn,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDFA0 首页轮播图管理"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:so?"1fr":"repeat(auto-fit, minmax(350px, 1fr))",gap:so?"1rem":"2rem",alignItems:"start"},className:"jsx-4754611355ff0f67",children:eo.map((e,s)=>(0,f.jsxs)("div",{style:{border:`2px solid ${sf}`,borderRadius:sm,padding:"1.5rem",backgroundColor:sd},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:sn,marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:["轮播图 ",s+1]}),f.jsx("div",{style:{width:"100%",height:so?"150px":"200px",borderRadius:sm,border:`2px dashed ${si}`,display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",overflow:"hidden",backgroundColor:"#fff"},className:"jsx-4754611355ff0f67",children:ed[s]?f.jsx("img",{src:ed[s],alt:`轮播图 ${s+1}`,style:{width:"100%",height:"100%",objectFit:"cover"},className:"jsx-4754611355ff0f67"}):(0,f.jsxs)("div",{style:{textAlign:"center",color:"#666"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️"}),f.jsx("p",{className:"jsx-4754611355ff0f67",children:"暂无图片"})]})}),(0,f.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let t=e.target.files[0];t&&sy(t,s)},style:{display:"none"},id:`hero-upload-${s}`,className:"jsx-4754611355ff0f67"}),f.jsx("label",{htmlFor:`hero-upload-${s}`,style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1rem":"0.75rem 1rem",backgroundColor:ei[s]?"#ccc":si,color:"white",borderRadius:sm,cursor:ei[s]?"not-allowed":"pointer",fontSize:so?"1rem":"0.9rem",textAlign:"center",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:ei[s]?"上传中...":"\uD83D\uDCC1 选择图片 (最大50MB)"})]}),f.jsx("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:f.jsx("button",{onClick:()=>{let e=[...ec];e[s]=!0,em(e)},style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1rem":"0.75rem 1rem",backgroundColor:sd,color:sn,border:`2px solid ${si}`,borderRadius:sm,cursor:"pointer",fontSize:so?"1rem":"0.9rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 从媒体库选择"})}),(0,f.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"跳转链接（可选）"}),f.jsx("input",{type:"text",value:e.link,onChange:e=>sw(e.target.value,s),placeholder:"例如：/plants/spider-plant",style:{width:"100%",padding:"0.75rem",border:`2px solid ${sf}`,borderRadius:sm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"标题"}),f.jsx("input",{type:"text",value:e.title,onChange:e=>sv(e.target.value,s),placeholder:"例如：Cat-Safe Plants",style:{width:"100%",padding:"0.75rem",border:`2px solid ${sf}`,borderRadius:sm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"副标题"}),f.jsx("input",{type:"text",value:e.subtitle,onChange:e=>sN(e.target.value,s),placeholder:"例如：Create a beautiful, pet-friendly living space",style:{width:"100%",padding:"0.75rem",border:`2px solid ${sf}`,borderRadius:sm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]})]},`hero-slide-${s}`))}),f.jsx("div",{style:{marginTop:"2rem",textAlign:"center"},className:"jsx-4754611355ff0f67",children:f.jsx("button",{onClick:sS,style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1.2rem 2rem":"1rem 2rem",backgroundColor:si,color:"white",border:"none",borderRadius:sm,fontSize:so?"1.1rem":"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},onMouseOver:e=>{e.currentTarget.style.backgroundColor=sn},onMouseOut:e=>{e.currentTarget.style.backgroundColor=si},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCBE 保存轮播图设置"})}),ec.map((e,s)=>e&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>{let e=[...ec];e[s]=!1,em(e)},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:so?"1rem":"2rem",width:so?"95%":"90%",maxWidth:so?"none":"900px",maxHeight:so?"95vh":"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("h3",{style:{color:si,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:["\uD83D\uDCC1 选择轮播图 ",s+1]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:so?"repeat(auto-fill, minmax(100px, 1fr))":"repeat(auto-fill, minmax(150px, 1fr))",gap:so?"0.5rem":"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:o.filter(e=>(console.log("Filtering hero image:",e),e&&(e.includes("/uploads/")||e.includes("/storage/")))).map((e,t)=>(0,f.jsxs)("div",{onClick:()=>sb(e,s),style:{cursor:"pointer",borderRadius:sm,overflow:"hidden",border:ed[s]===e?`3px solid ${si}`:"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e,alt:`媒体图片 ${t+1}`,style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),f.jsx("div",{style:{padding:"0.5rem",backgroundColor:sd,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},t))}),f.jsx("button",{onClick:()=>{let e=[...ec];e[s]=!1,em(e)},style:{padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})]})},`hero-modal-${s}`))]}),"add-plant"===_&&(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:so?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("h2",{style:{color:si,marginBottom:"2rem",fontSize:so?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"添加新植物"}),(0,f.jsxs)("form",{onSubmit:sR,style:{display:"grid",gap:"1.5rem"},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"植物名称"}),f.jsx("input",{type:"text",value:eR,onChange:e=>eB(e.target.value),required:!0,style:{width:"100%",padding:so?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"拉丁学名"}),f.jsx("input",{type:"text",value:e_,onChange:e=>eP(e.target.value),required:!0,style:{width:"100%",padding:so?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"安全性"}),(0,f.jsxs)("select",{value:eT,onChange:e=>eW(e.target.value),style:{width:"100%",padding:so?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("option",{value:"Safe",className:"jsx-4754611355ff0f67",children:"安全 (Safe)"}),f.jsx("option",{value:"Caution",className:"jsx-4754611355ff0f67",children:"注意 (Caution)"}),f.jsx("option",{value:"Toxic",className:"jsx-4754611355ff0f67",children:"有毒 (Toxic)"})]})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"养育难度"}),(0,f.jsxs)("select",{value:eI,onChange:e=>eF(e.target.value),style:{width:"100%",padding:so?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("option",{value:"Easy",className:"jsx-4754611355ff0f67",children:"简单 (Easy)"}),f.jsx("option",{value:"Moderate",className:"jsx-4754611355ff0f67",children:"中等 (Moderate)"}),f.jsx("option",{value:"Difficult",className:"jsx-4754611355ff0f67",children:"困难 (Difficult)"})]})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"详细描述"}),f.jsx("textarea",{value:e$,onChange:e=>eA(e.target.value),rows:so?6:4,style:{width:"100%",padding:so?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",resize:"vertical",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:so?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"植物图片"}),(0,f.jsxs)("div",{style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(eY||eM)&&(0,f.jsxs)("div",{style:{position:"relative"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:eY||eM,alt:"植物图片预览",style:{width:so?"150px":"200px",height:so?"150px":"200px",objectFit:"cover",borderRadius:sm,border:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67"}),eM&&f.jsx("div",{style:{position:"absolute",bottom:"8px",left:"8px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"0.75rem"},className:"jsx-4754611355ff0f67",children:eM})]}),(0,f.jsxs)("div",{style:{display:"grid",gap:so?"0.75rem":"1rem",gridTemplateColumns:so?"1fr":"auto auto"},className:"jsx-4754611355ff0f67",children:[f.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];s&&sg(s,!1)},style:{display:"none"},id:"plant-image-upload",className:"jsx-4754611355ff0f67"}),f.jsx("label",{htmlFor:"plant-image-upload",style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1rem":"0.75rem 1.5rem",backgroundColor:si,color:"white",borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",textAlign:"center",fontSize:so?"1rem":"0.9rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCC1 本地上传"}),f.jsx("button",{type:"button",onClick:()=>eZ(!0),style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1rem":"0.75rem 1.5rem",backgroundColor:sd,color:sn,border:`2px solid ${si}`,borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",fontSize:so?"1rem":"0.9rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 媒体库"})]}),eH&&(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("button",{type:"button",onClick:()=>su(eH,!1),disabled:eK||!eR,style:{padding:"0.75rem 1.5rem",backgroundColor:eK||!eR?"#ccc":si,color:"white",border:"none",borderRadius:sm,cursor:eK||!eR?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:eK?"上传中...":`上传为 ${eR?sp(eR,eH):"请先填写植物名称"}`}),(0,f.jsxs)("span",{style:{fontSize:"0.875rem",color:"#666"},className:"jsx-4754611355ff0f67",children:["文件: ",eH.name]})]}),f.jsx("input",{type:"hidden",value:eM,onChange:e=>eL(e.target.value),className:"jsx-4754611355ff0f67"})]})]}),eE&&f.jsx("div",{style:{padding:"0.75rem",borderRadius:sm,backgroundColor:si,color:"white",textAlign:"center"},className:"jsx-4754611355ff0f67",children:eE}),f.jsx("button",{type:"submit",disabled:eU,style:{display:so?"block":"inline-block",width:so?"100%":"auto",padding:so?"1.2rem 2rem":"1rem 2rem",backgroundColor:si,color:"white",border:"none",borderRadius:sm,fontSize:so?"1.1rem":"1rem",fontWeight:"500",cursor:eU?"not-allowed":"pointer",opacity:eU?.7:1,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},className:"jsx-4754611355ff0f67",children:eU?"保存中...":"保存植物信息"})]})]}),"plant-list"===_&&(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:so?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("h2",{style:{color:si,marginBottom:"2rem",fontSize:so?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"植物列表"}),f.jsx("div",{style:{marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:f.jsx("input",{type:"text",placeholder:"搜索植物名称或拉丁学名...",value:I,onChange:e=>F(e.target.value),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})}),f.jsx("div",{style:{overflowX:"auto"},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},className:"jsx-4754611355ff0f67",children:[f.jsx("thead",{className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("tr",{style:{backgroundColor:sf},className:"jsx-4754611355ff0f67",children:[f.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"预览"}),f.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"名称"}),f.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"拉丁名"}),f.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"安全等级"}),f.jsx("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"操作"})]})}),f.jsx("tbody",{className:"jsx-4754611355ff0f67",children:sB.map(e=>(0,f.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0",transition:"background-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:e.image&&f.jsx("img",{src:e.image,alt:e.title,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"},className:"jsx-4754611355ff0f67"})}),f.jsx("td",{style:{padding:"1rem",fontWeight:"500"},className:"jsx-4754611355ff0f67",children:e.title}),f.jsx("td",{style:{padding:"1rem",fontStyle:"italic",color:"#666"},className:"jsx-4754611355ff0f67",children:e.scientific_name}),f.jsx("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:f.jsx("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.875rem",fontWeight:"500",backgroundColor:"Safe"===e.toxicity_level?"#d4edda":"Caution"===e.toxicity_level?"#fff3cd":"#f8d7da",color:"Safe"===e.toxicity_level?"#155724":"Caution"===e.toxicity_level?"#856404":"#721c24"},className:"jsx-4754611355ff0f67",children:"Safe"===e.toxicity_level?"安全":"Caution"===e.toxicity_level?"注意":"有毒"})}),f.jsx("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("button",{onClick:()=>sC(e),style:{padding:"0.5rem 1rem",backgroundColor:si,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"编辑"}),f.jsx("button",{onClick:()=>sD(e.slug),style:{padding:"0.5rem 1rem",backgroundColor:"#C17A5F",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"删除"})]})})]},e.slug))})]})})]}),"media-library"===_&&(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:so?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("h2",{style:{color:si,marginBottom:"2rem",fontSize:so?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"媒体库"}),(0,f.jsxs)("div",{style:{marginBottom:"2rem",padding:so?"1rem":"2rem",backgroundColor:sd,borderRadius:sm},className:"jsx-4754611355ff0f67",children:[f.jsx("h3",{style:{marginBottom:"1rem",color:si,fontSize:so?"1.2rem":"1.3rem"},className:"jsx-4754611355ff0f67",children:"上传新图片"}),(0,f.jsxs)("div",{style:{display:"grid",gap:so?"0.75rem":"1rem",gridTemplateColumns:so?"1fr":"auto auto",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[f.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];if(console.log("File selected:",s?.name,"Size:",s?.size,"Type:",s?.type),s&&s.size>10485760){B("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>B(""),3e3),e.target.value="",C(null),D("");return}if(s){C(s);let e=new FileReader;e.onload=e=>{console.log("FileReader loaded, preview length:",e.target.result?.length),D(e.target.result)},e.onerror=e=>console.error("FileReader error:",e),e.readAsDataURL(s)}else console.log("No file selected")},style:{display:"none"},id:"file-upload",className:"jsx-4754611355ff0f67"}),f.jsx("label",{htmlFor:"file-upload",style:{padding:"0.75rem 1.5rem",backgroundColor:si,color:"white",borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},className:"jsx-4754611355ff0f67",children:"选择图片 (最大50MB)"}),k&&f.jsx("button",{onClick:()=>sx(k),disabled:N,style:{padding:"0.75rem 1.5rem",backgroundColor:N?"#ccc":si,color:"white",border:"none",borderRadius:sm,cursor:N?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:N?"上传中...":"上传"})]}),k&&(0,f.jsxs)("div",{style:{marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:z,alt:"预览",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:sm},className:"jsx-4754611355ff0f67"}),(0,f.jsxs)("div",{style:{marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"图片名称"}),f.jsx("input",{type:"text",value:Y,onChange:e=>G(e.target.value),placeholder:"输入图片名称（可选）",style:{width:"100%",padding:"0.5rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"0.9rem",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor=si,e.target.style.boxShadow=`0 0 0 3px ${si}20`},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},className:"jsx-4754611355ff0f67"})]})]})]}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:so?"repeat(auto-fill, minmax(150px, 1fr))":"repeat(auto-fill, minmax(200px, 1fr))",gap:"1.5rem",padding:"1rem 0"},className:"jsx-4754611355ff0f67",children:o.map((e,s)=>{let t=H.find(s=>s.file_path===e),a=sI(e),r=K===e,o=t?.id;return o||console.log("⚠️ No metadata found for image:",e,"Available metadata:",H.length),(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sm,border:`2px solid ${si}30`,overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(135, 169, 107, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("div",{style:{position:"relative",width:"100%",paddingTop:"100%",backgroundColor:"#f8f9fa",overflow:"hidden"},onClick:()=>sk(e),className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e,alt:a,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.transform="scale(1)"},className:"jsx-4754611355ff0f67"}),f.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%)",opacity:0,transition:"opacity 0.3s ease",display:"flex",alignItems:"flex-end",padding:"0.5rem"},onMouseEnter:e=>{e.currentTarget.style.opacity="1"},onMouseLeave:e=>{e.currentTarget.style.opacity="0"},className:"jsx-4754611355ff0f67",children:f.jsx("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:"500"},className:"jsx-4754611355ff0f67",children:"点击复制链接"})})]}),(0,f.jsxs)("div",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:[r?f.jsx("div",{style:{marginBottom:"0.75rem"},className:"jsx-4754611355ff0f67",children:f.jsx("input",{type:"text",value:X,onChange:e=>Z(e.target.value),onKeyDown:e=>{"Enter"!==e.key||es?"Escape"===e.key&&(V(null),Z("")):sW(o,X)},onBlur:()=>{!es&&X.trim()?sW(o,X):es||(V(null),Z(""))},disabled:es,placeholder:es?"保存中...":"输入新名称",style:{width:"100%",padding:"0.5rem",border:`2px solid ${es?"#ccc":si}`,borderRadius:"6px",fontSize:"0.9rem",fontWeight:"500",backgroundColor:es?"#f8f9fa":"white",opacity:es?.7:1},autoFocus:!0,className:"jsx-4754611355ff0f67"})}):(0,f.jsxs)("div",{style:{marginBottom:"0.75rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#333",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"text"},onClick:s=>{s.stopPropagation(),V(e),Z(a)},title:"点击重命名",className:"jsx-4754611355ff0f67",children:a}),f.jsx("div",{style:{fontSize:"0.75rem",color:"#999",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e,className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("button",{onClick:s=>{s.stopPropagation(),sk(e)},style:{flex:1,padding:"0.5rem",backgroundColor:T===e?"#28a745":si,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:T===e?"已复制!":"复制"}),o?f.jsx("button",{onClick:s=>{s.stopPropagation(),es||(V(e),Z(a))},disabled:es,style:{flex:1,padding:"0.5rem",backgroundColor:es?"#e9ecef":"#f8f9fa",color:es?"#6c757d":"#333",border:`1px solid ${es?"#dee2e6":si}50`,borderRadius:"6px",cursor:es?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease",opacity:es?.6:1},className:"jsx-4754611355ff0f67",children:es?"保存中...":"重命名"}):f.jsx("button",{onClick:async s=>{s.stopPropagation(),await sT(e,e.split("/").pop(),0,"image/unknown")},style:{flex:1,padding:"0.5rem",backgroundColor:"#ffc107",color:"#212529",border:"1px solid #e0a800",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"创建元数据"})]})]})]},s)})}),Q&&f.jsx("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},className:"jsx-4754611355ff0f67",children:f.jsx("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"加载媒体库中..."})}),!Q&&0===o.length&&(0,f.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCF7"}),f.jsx("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},className:"jsx-4754611355ff0f67",children:"还没有上传任何图片"}),f.jsx("div",{style:{fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"点击上方按钮开始上传"})]})]}),"atmosphere"===_&&f.jsx(AtmosphereImageManager,{mediaMetadata:H,onAtmosphereChange:()=>{sP()},loading:Q}),"security"===_&&(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease",maxWidth:"600px",margin:"0 auto"},className:"jsx-4754611355ff0f67",children:[f.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:sn,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDD12 安全设置"}),(0,f.jsxs)("form",{onSubmit:s_,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"当前密码"}),f.jsx("input",{type:"password",value:$.oldPassword,onChange:e=>A({...$,oldPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=si,e.target.style.boxShadow=`0 0 0 3px ${si}20`},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"输入当前密码",disabled:M,required:!0,className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"新密码"}),f.jsx("input",{type:"password",value:$.newPassword,onChange:e=>A({...$,newPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=si,e.target.style.boxShadow=`0 0 0 3px ${si}20`},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"输入新密码（至少6位字符）",disabled:M,required:!0,minLength:6,className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"确认新密码"}),f.jsx("input",{type:"password",value:$.confirmPassword,onChange:e=>A({...$,confirmPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=si,e.target.style.boxShadow=`0 0 0 3px ${si}20`},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"再次输入新密码",disabled:M,required:!0,minLength:6,className:"jsx-4754611355ff0f67"})]}),$.newPassword&&f.jsx("div",{style:{fontSize:"0.875rem",color:$.newPassword.length>=6?"#52c41a":"#ff4d4f",marginTop:"-0.5rem"},className:"jsx-4754611355ff0f67",children:$.newPassword.length>=6?"✅ 密码强度符合要求":"❌ 密码至少需要6位字符"}),E&&f.jsx("div",{style:{backgroundColor:"#fee",color:"#c53030",padding:"1rem",borderRadius:sm,fontSize:"0.9rem",textAlign:"center"},className:"jsx-4754611355ff0f67",children:E}),U&&f.jsx("div",{style:{backgroundColor:"#f0f9ff",color:"#1e40af",padding:"1rem",borderRadius:sm,fontSize:"0.9rem",textAlign:"center",border:"1px solid #3b82f6"},className:"jsx-4754611355ff0f67",children:U}),f.jsx("button",{type:"submit",disabled:M,style:{width:"100%",padding:"1rem",backgroundColor:M?"#ccc":si,color:"white",border:"none",borderRadius:sm,fontSize:"1.1rem",fontWeight:"600",cursor:M?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:M?"none":`0 8px 32px ${si}30%`},className:"jsx-4754611355ff0f67",children:M?"修改中...":"修改密码"})]}),(0,f.jsxs)("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:sd,borderRadius:sm,border:`1px solid ${si}30`},className:"jsx-4754611355ff0f67",children:[f.jsx("h4",{style:{color:si,marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDD10 安全提示"}),(0,f.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#666",fontSize:"0.9rem",lineHeight:"1.6"},className:"jsx-4754611355ff0f67",children:[f.jsx("li",{className:"jsx-4754611355ff0f67",children:"密码修改成功后，系统将自动退出登录"}),f.jsx("li",{className:"jsx-4754611355ff0f67",children:"请使用新密码重新登录管理后台"}),f.jsx("li",{className:"jsx-4754611355ff0f67",children:"建议定期更换密码以确保账户安全"}),f.jsx("li",{className:"jsx-4754611355ff0f67",children:"密码长度至少为6位字符"})]})]})]})]})]}),ew&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[f.jsx("h3",{style:{color:si,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"编辑植物信息"}),(0,f.jsxs)("form",{onSubmit:sz,style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"植物名称"}),f.jsx("input",{type:"text",value:ek.title,onChange:e=>eC({...ek,title:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"拉丁学名"}),f.jsx("input",{type:"text",value:ek.scientific_name,onChange:e=>eC({...ek,scientific_name:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"安全性"}),(0,f.jsxs)("select",{value:ek.toxicity_level,onChange:e=>eC({...ek,toxicity_level:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("option",{value:"Safe",className:"jsx-4754611355ff0f67",children:"安全 (Safe)"}),f.jsx("option",{value:"Caution",className:"jsx-4754611355ff0f67",children:"注意 (Caution)"}),f.jsx("option",{value:"Toxic",className:"jsx-4754611355ff0f67",children:"有毒 (Toxic)"})]})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"养育难度"}),(0,f.jsxs)("select",{value:ek.care_difficulty,onChange:e=>eC({...ek,care_difficulty:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("option",{value:"Easy",className:"jsx-4754611355ff0f67",children:"简单 (Easy)"}),f.jsx("option",{value:"Moderate",className:"jsx-4754611355ff0f67",children:"中等 (Moderate)"}),f.jsx("option",{value:"Difficult",className:"jsx-4754611355ff0f67",children:"困难 (Difficult)"})]})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"详细描述"}),f.jsx("textarea",{value:ek.summary,onChange:e=>eC({...ek,summary:e.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",resize:"vertical"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"植物图片"}),(0,f.jsxs)("div",{style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(e6||ek.image)&&(0,f.jsxs)("div",{style:{position:"relative"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e6||ek.image,alt:"植物图片预览",style:{width:"200px",height:"200px",objectFit:"cover",borderRadius:sm,border:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67"}),ek.image&&f.jsx("div",{style:{position:"absolute",bottom:"8px",left:"8px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"0.75rem"},className:"jsx-4754611355ff0f67",children:ek.image})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},className:"jsx-4754611355ff0f67",children:[f.jsx("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files?.[0];s&&sg(s,!0)},style:{display:"none"},id:"edit-plant-image-upload",className:"jsx-4754611355ff0f67"}),f.jsx("label",{htmlFor:"edit-plant-image-upload",style:{padding:"0.75rem 1.5rem",backgroundColor:si,color:"white",borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",display:"inline-block"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCC1 本地上传"}),f.jsx("button",{type:"button",onClick:()=>e8(!0),style:{padding:"0.75rem 1.5rem",backgroundColor:sf,color:"#333",border:"none",borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 从媒体库选择"})]}),e5&&(0,f.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("button",{type:"button",onClick:()=>su(e5,!0),disabled:e4||!ek.title,style:{padding:"0.75rem 1.5rem",backgroundColor:e4||!ek.title?"#ccc":si,color:"white",border:"none",borderRadius:sm,cursor:e4||!ek.title?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:e4?"上传中...":`上传为 ${ek.title?sp(ek.title,e5):"请先填写植物名称"}`}),(0,f.jsxs)("span",{style:{fontSize:"0.875rem",color:"#666"},className:"jsx-4754611355ff0f67",children:["文件: ",e5.name]})]}),f.jsx("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:f.jsx("input",{type:"text",placeholder:"或直接输入图片URL...",value:ek.image,onChange:e=>eC({...ek,image:e.target.value}),style:{flex:1,padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})})]})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"护理技巧"}),f.jsx("textarea",{value:ek.care_tips,onChange:e=>eC({...ek,care_tips:e.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem",resize:"vertical"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"水分需求"}),f.jsx("input",{type:"text",value:ek.water_needs,onChange:e=>eC({...ek,water_needs:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"光照需求"}),f.jsx("input",{type:"text",value:ek.light_needs,onChange:e=>eC({...ek,light_needs:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"温度要求"}),f.jsx("input",{type:"text",value:ek.temperature,onChange:e=>eC({...ek,temperature:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,f.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[f.jsx("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"萌宠时刻图片"}),(0,f.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[f.jsx("input",{type:"text",value:ek.pet_moment,onChange:e=>eC({...ek,pet_moment:e.target.value}),placeholder:"输入猫咪与植物合影的图片路径...",style:{flex:1,padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:sm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"}),f.jsx("button",{type:"button",onClick:()=>sr(!0),style:{padding:"0.75rem 1rem",backgroundColor:sf,color:"#333",border:"none",borderRadius:sm,cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.875rem",whiteSpace:"nowrap"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDC31 选择猫咪氛围图"})]})]}),(0,f.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[f.jsx("button",{type:"submit",disabled:ez,style:{flex:1,padding:"1rem",backgroundColor:si,color:"white",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:ez?"not-allowed":"pointer",opacity:ez?.7:1,transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:ez?"保存中...":"保存更改"}),f.jsx("button",{type:"button",onClick:()=>ev(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})]})]})]})}),eX&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[f.jsx("h3",{style:{color:si,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"从媒体库选择图片"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:o.filter(e=>e.includes("/uploads/")).map((e,s)=>(0,f.jsxs)("div",{onClick:()=>sh(e,!1),style:{cursor:"pointer",borderRadius:sm,overflow:"hidden",border:eQ===e?`3px solid ${si}`:"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e,alt:`媒体库图片 ${s}`,style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),f.jsx("div",{style:{padding:"0.5rem",backgroundColor:sd,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},s))}),f.jsx("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:f.jsx("button",{onClick:()=>eZ(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),e2&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[f.jsx("h3",{style:{color:si,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"从媒体库选择图片"}),f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:o.filter(e=>e.includes("/uploads/")).map((e,s)=>(0,f.jsxs)("div",{onClick:()=>sh(e,!0),style:{cursor:"pointer",borderRadius:sm,overflow:"hidden",border:e9===e?`3px solid ${si}`:"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e,alt:`媒体库图片 ${s}`,style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),f.jsx("div",{style:{padding:"0.5rem",backgroundColor:sd,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},s))}),f.jsx("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:f.jsx("button",{onClick:()=>e8(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),sa&&f.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,f.jsxs)("div",{style:{backgroundColor:"white",borderRadius:sc,padding:"2rem",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[f.jsx("h3",{style:{color:si,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDC31 选择猫咪氛围图"}),0===ss.length?(0,f.jsxs)("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:sd,borderRadius:sm,color:"#666"},className:"jsx-4754611355ff0f67",children:[f.jsx("div",{style:{fontSize:"3rem",marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCF8"}),f.jsx("p",{className:"jsx-4754611355ff0f67",children:"还没有上传猫咪图片哦！"}),(0,f.jsxs)("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},className:"jsx-4754611355ff0f67",children:["请将猫咪与植物的合影图片上传到 ",f.jsx("code",{className:"jsx-4754611355ff0f67",children:"/public/images/pets/"})," 目录"]})]}):f.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:ss.map((e,s)=>(0,f.jsxs)("div",{onClick:()=>sj(e),style:{cursor:"pointer",borderRadius:sm,overflow:"hidden",border:ek.pet_moment===e?`3px solid ${si}`:"2px solid #e0e0e0",transition:"all 0.3s ease",transform:ek.pet_moment===e?"scale(1.05)":"scale(1)"},className:"jsx-4754611355ff0f67",children:[f.jsx("img",{src:e,alt:`猫咪图片 ${s+1}`,style:{width:"100%",height:"140px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),f.jsx("div",{style:{padding:"0.75rem",backgroundColor:sd,fontSize:"0.75rem",color:"#666",wordBreak:"break-all",textAlign:"center"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},s))}),f.jsx("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:f.jsx("button",{onClick:()=>sr(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:sm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),f.jsx(m(),{id:"4754611355ff0f67",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}@-webkit-keyframes slideIn{from{opacity:0;-webkit-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideIn{from{opacity:0;-moz-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideIn{from{opacity:0;-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideIn{from{opacity:0;-webkit-transform:translatex(-20px);-moz-transform:translatex(-20px);-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}@-webkit-keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideInRight{from{opacity:0;-moz-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideInRight{from{opacity:0;-o-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(20px);-moz-transform:translatex(20px);-o-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:4;-moz-column-count:4;column-count:4;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}@media(max-width:1200px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:3;-moz-column-count:3;column-count:3}}@media(max-width:768px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:2;-moz-column-count:2;column-count:2}}@media(max-width:480px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:1;-moz-column-count:1;column-count:1}}"})]})}let b=(0,l.l)(a,"default"),w=(0,l.l)(a,"getStaticProps"),v=(0,l.l)(a,"getStaticPaths"),N=(0,l.l)(a,"getServerSideProps"),S=(0,l.l)(a,"config"),k=(0,l.l)(a,"reportWebVitals"),C=(0,l.l)(a,"unstable_getStaticProps"),z=(0,l.l)(a,"unstable_getStaticPaths"),D=(0,l.l)(a,"unstable_getStaticParams"),R=(0,l.l)(a,"unstable_getServerProps"),B=(0,l.l)(a,"unstable_getServerSideProps"),_=new r.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/admin",pathname:"/admin",bundlePath:"",filename:""},components:{App:d.default,Document:n()},userland:a})},8269:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(997);t(6764);var r=t(1664),o=t.n(r),l=t(968),i=t.n(l),n=t(6689);function d({Component:e,pageProps:s}){let[t,r]=(0,n.useState)(""),[l,d]=(0,n.useState)([]),[f,c]=(0,n.useState)([]),[m,x]=(0,n.useState)([]),[p,u]=(0,n.useState)([]),[g,h]=(0,n.useState)({safe:!1,toxic:!1,caution:!1}),[j,y]=(0,n.useState)(!1),[b,w]=(0,n.useState)(""),v=async()=>{try{let e=await fetch("/api/plants"),s=((await e.json()).plants||[]).map(e=>({slug:e.slug,title:String(e.title||""),scientific_name:String(e.scientific_name||""),toxicity_level:String(e.toxicity_level||"")})),a=t.trim().toLowerCase();if(!a)return;let r=s.filter(e=>e.title.toLowerCase().includes(a)||e.scientific_name.toLowerCase().includes(a)||e.slug.toLowerCase().includes(a))[0];r&&(window.location.href="/plants/"+r.slug)}catch{}},N=e=>{h(s=>({...s,[e]:!s[e]}))};return(0,a.jsxs)("div",{className:"app-container",children:[(0,a.jsxs)(i(),{children:[a.jsx("title",{children:"PawSafePlants - Cat-Safe Plants Guide"}),a.jsx("meta",{name:"description",content:"Complete guide to cat-safe plants. Keep your feline friends safe with our comprehensive plant toxicity database."}),a.jsx("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"}),a.jsx("link",{rel:"icon",href:"/favicon.ico",sizes:"32x32"}),a.jsx("link",{rel:"apple-touch-icon",href:"/icon.png"}),a.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),a.jsx("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),a.jsx("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),a.jsx("link",{href:"https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"})]}),(0,a.jsxs)("header",{className:"header",children:[(0,a.jsxs)("div",{className:"header-inner",children:[b?(0,a.jsxs)(o(),{href:"/",className:"logo",children:[a.jsx("img",{src:b,alt:"PawSafePlants",style:{height:72,width:"auto",display:"block",mixBlendMode:"screen",position:"relative",zIndex:2}}),a.jsx("span",{style:{marginLeft:-14,fontWeight:800,fontSize:22,color:"#fff",position:"relative",zIndex:1,textShadow:"0 1px 2px rgba(0,0,0,0.35)"},children:"PawSafePlants"})]}):a.jsx(o(),{href:"/",className:"logo",style:{fontWeight:700,fontSize:20},children:"\uD83D\uDC3E PawSafePlants"}),(0,a.jsxs)("div",{className:"search-box",children:[a.jsx("input",{id:"global-search-input",type:"text",placeholder:"Search plants by name or scientific name...",value:t,onChange:e=>r(e.target.value)}),a.jsx("button",{type:"button",onClick:v,"aria-label":"Search",children:(0,a.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[a.jsx("circle",{cx:"11",cy:"11",r:"7",stroke:"#fff",strokeWidth:"2"}),a.jsx("path",{d:"M20 20l-3-3",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"})]})})]})]}),(0,a.jsxs)("nav",{className:"nav-menu",children:[(0,a.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{j||h(e=>({...e,safe:!0}))},onMouseLeave:()=>{j||h(e=>({...e,safe:!1}))},children:[a.jsx(o(),{href:"/plants/safe",className:"nav-item",onClick:e=>{j&&(e.preventDefault(),N("safe"))},children:"Cat-Safe Plants \uD83C\uDF38"}),g.safe&&a.jsx("div",{className:"dropdown",children:f.map(e=>a.jsx(o(),{href:`/plants/${e.slug}`,className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),(0,a.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{j||h(e=>({...e,toxic:!0}))},onMouseLeave:()=>{j||h(e=>({...e,toxic:!1}))},children:[a.jsx(o(),{href:"/plants/toxic",className:"nav-item",onClick:e=>{j&&(e.preventDefault(),N("toxic"))},children:"Toxic Plants \uD83D\uDEAB"}),g.toxic&&a.jsx("div",{className:"dropdown",children:m.map(e=>a.jsx(o(),{href:`/plants/${e.slug}`,className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),(0,a.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{j||h(e=>({...e,caution:!0}))},onMouseLeave:()=>{j||h(e=>({...e,caution:!1}))},children:[a.jsx(o(),{href:"/plants/caution",className:"nav-item",onClick:e=>{j&&(e.preventDefault(),N("caution"))},children:"Moderate Risk ⚠️"}),g.caution&&a.jsx("div",{className:"dropdown",children:p.map(e=>a.jsx(o(),{href:`/plants/${e.slug}`,className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),a.jsx(o(),{href:"/blog/valentines-day-cat-safe-flowers-guide",className:"nav-item",style:{fontWeight:600,color:"#e91e63"},children:"Latest Stories \uD83D\uDC95"}),a.jsx(o(),{href:"/cat-safe-flowers",className:"nav-item",style:{fontWeight:600,color:"#10B981"},children:"Safe Bouquets \uD83C\uDF38"}),a.jsx(o(),{href:"/blog/valentines-day-cat-safe-flowers-guide",className:"nav-item",children:"Blog \uD83D\uDCDD"}),a.jsx(o(),{href:"/items",className:"nav-item",children:"More Products \uD83C\uDF80"})]})]}),a.jsx(e,{...s})]})}},6764:()=>{},2785:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{"use strict";e.exports=require("next/head")},6689:e=>{"use strict";e.exports=require("react")},6405:e=>{"use strict";e.exports=require("react-dom")},997:e=>{"use strict";e.exports=require("react/jsx-runtime")},9816:e=>{"use strict";e.exports=require("styled-jsx/style")},7147:e=>{"use strict";e.exports=require("fs")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},9796:e=>{"use strict";e.exports=require("zlib")}};var s=require("../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[9013,1682,1664,8342],()=>t(4422));module.exports=a})();