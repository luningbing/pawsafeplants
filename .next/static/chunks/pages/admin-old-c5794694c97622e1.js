(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[200],{9474:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-old",function(){return i(9383)}])},9383:function(e,t,i){"use strict";i.r(t),i.d(t,{__N_SSP:function(){return d},default:function(){return r}});var a=i(5893),s=i(7294),l=i(1664),n=i.n(l);function o(e){let{images:t,value:i,onChange:l,placeholder:n="选择图片路径...",width:o=360}=e,[d,r]=(0,s.useState)(!1),[c,p]=(0,s.useState)(""),u=String(i||""),g=String(c||u||"");return(0,a.jsxs)("div",{style:{position:"relative",minWidth:o},children:[(0,a.jsx)("button",{type:"button",onClick:()=>r(!d),style:{width:"100%",textAlign:"left",padding:"6px 8px",border:"1px solid #e5e7eb",borderRadius:8,background:"#fff"},children:u||n}),d&&(0,a.jsxs)("div",{style:{position:"absolute",zIndex:100,top:"100%",left:0,display:"grid",gridTemplateColumns:"1fr 110px",gap:8,background:"#fff",border:"1px solid #e5e7eb",borderRadius:8,marginTop:6,padding:8,boxShadow:"0 8px 20px rgba(0,0,0,0.08)"},children:[(0,a.jsx)("div",{style:{maxHeight:220,overflow:"auto",display:"grid",gap:6},children:t.map(e=>(0,a.jsx)("button",{type:"button",onMouseEnter:()=>p(e),onFocus:()=>p(e),onClick:()=>{l(e),r(!1)},style:{display:"block",width:"100%",textAlign:"left",padding:"6px 8px",border:"1px solid #f3f4f6",background:u===e?"#eef":"#fff",borderRadius:6},children:e},e))}),(0,a.jsx)("div",{style:{width:110},children:g&&(0,a.jsx)("img",{src:g,alt:"预览",style:{width:"100%",height:100,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})]})}var d=!0;function r(){let[e,t]=(0,s.useState)([]),[i,l]=(0,s.useState)([]),[d,r]=(0,s.useState)({heroImage:"",logo:""}),[c,p]=(0,s.useState)(""),[u,g]=(0,s.useState)(""),[h,x]=(0,s.useState)({}),[y,b]=(0,s.useState)({}),[m,j]=(0,s.useState)({}),[f,v]=(0,s.useState)({}),[w,S]=(0,s.useState)({}),[C,T]=(0,s.useState)(!1),[k,R]=(0,s.useState)(null),[F,P]=(0,s.useState)(""),[z,E]=(0,s.useState)([]),O=Math.max(1,...z.map(e=>Number(e.count||0))),[_,N]=(0,s.useState)([]),[I,A]=(0,s.useState)(""),[B,D]=(0,s.useState)(""),[W,J]=(0,s.useState)(""),[L,M]=(0,s.useState)("add-plant"),[U,q]=(0,s.useState)(""),[H,G]=(0,s.useState)(""),[K,X]=(0,s.useState)("Safe"),[V,Z]=(0,s.useState)("Easy"),[$,Q]=(0,s.useState)(""),[Y,ee]=(0,s.useState)(""),[et,ei]=(0,s.useState)(""),[ea,es]=(0,s.useState)(!1),el="#87A96B",en="#6B8553",eo="#F5F1E8",ed="24px",er="16px",[ec,ep]=(0,s.useState)([]),[eu,eg]=(0,s.useState)({});(0,s.useEffect)(()=>{(async()=>{try{let[e,i,a]=await Promise.all([fetch("/api/list-images"),fetch("/api/site-config"),fetch("/api/plants")]),s=await e.json(),n=await i.json(),o=await a.json();t(s.paths||[]),r(n||{heroImage:""}),p((n||{}).heroImage||""),g((n||{}).logo||""),l(o.plants||[])}catch(e){}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/analytics/stats?days=30"),t=await e.json();E(t.stats||[])}catch(e){}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/admin/comments/pending"),t=await e.json();N(t.comments||[])}catch(e){}})()},[]),(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/comments/list"),t=await e.json();ep(t.comments||[])}catch(e){}})()},[]),(0,s.useEffect)(()=>{},[]);let eh=async(e,t)=>{try{await fetch("/api/admin/comments/moderate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,action:t})});let i=await fetch("/api/admin/comments/pending"),a=await i.json();N(a.comments||[]);let s=await fetch("/api/comments/list"),l=await s.json();ep(l.comments||[])}catch(e){}},ex=async e=>{let t=String((eu||{})[e]||"").trim();if(t)try{if((await fetch("/api/admin/comments/reply",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,content:t})})).ok){eg(t=>({...t,[e]:""}));let t=await fetch("/api/comments/list"),i=await t.json();ep(i.comments||[])}}catch(e){}},ey=async e=>{if(e){T(!0);try{let i=new FileReader;i.onload=async()=>{let a=i.result,s=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),l=await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:s,data:String(a||"")})});if(l.ok){let e=await l.json(),i=await (await fetch("/api/list-images")).json();return t(i.paths||[]),r(e=>({...e})),(null==e?void 0:e.path)||""}T(!1)},i.readAsDataURL(e)}catch(e){T(!1)}}},eb=async()=>{if(!k)return;let e=await ey(k);T(!1),e&&P("已上传到素材库"),R(null)},em=async e=>{if(!e)return;await fetch("/api/site-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({heroImage:e})});let t=await (await fetch("/api/site-config")).json();r(t),p(t.heroImage||""),P("已应用到首页大图")},ej=async e=>{if(!e)return;await fetch("/api/site-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logo:e})});let t=await (await fetch("/api/site-config")).json();r(t),g(t.logo||""),P("站点 Logo 已更新")},ef=async()=>{await em(c),c&&window.open("/","_blank")},ev=async(e,t)=>{await fetch("/api/update-plant-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e,imagePath:t})}),l((await (await fetch("/api/plants")).json()).plants||[]),x(i=>({...i,[e]:t})),P("已应用到该植物封面图")},ew=async(e,t)=>{await fetch("/api/update-plant-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e,image2:t})}),l((await (await fetch("/api/plants")).json()).plants||[]),b(i=>({...i,[e]:t})),P("已应用到该植物附图 1")},eS=async(e,t)=>{await fetch("/api/update-plant-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e,image3:t})}),l((await (await fetch("/api/plants")).json()).plants||[]),j(i=>({...i,[e]:t})),P("已应用到该植物附图 2")},eC=async(e,t,i)=>{let a={slug:e};"thumbPlant"===t&&(a.thumbPlant=i),"thumbCat"===t&&(a.thumbCat=i),await fetch("/api/update-plant-image",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),l((await (await fetch("/api/plants")).json()).plants||[]),"thumbPlant"===t&&v(t=>({...t,[e]:i})),"thumbCat"===t&&S(t=>({...t,[e]:i})),P("thumbCat"===t?"已应用到该植物猫咪缩略图":"已应用到该植物缩略图")};(0,s.useCallback)(async e=>{let t=h[e];await ev(e,t),e&&window.open("/plants/".concat(e),"_blank")},[h,ev]);let eT=async e=>{e.preventDefault(),es(!0),ei("");let t=U.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-*|-*$/g,"");if(!t){ei("Error: Plant name cannot be empty."),es(!1);return}try{let e=await fetch("/api/save-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:U,scientific_name:H,toxicity_level:K,care_difficulty:V,summary:$,image:Y||"/images/plants/".concat(t,".jpg"),slug:t})});if(e.ok){ei("Success: Plant added successfully!"),q(""),G(""),X("Safe"),Z("Easy"),Q(""),ee("");let e=await (await fetch("/api/plants")).json();l(e.plants||[])}else{let t=await e.json();ei("Error: ".concat(t.error||"Failed to add plant."))}}catch(e){ei("Error: ".concat(e.message||"An unexpected error occurred."))}finally{es(!1)}},ek=(0,s.useCallback)(async()=>{J("");try{let e=String(I||"").trim(),t=String(B||"").trim();if(e.length<2){J("Username must be at least 2 characters.");return}if(t.length<6){J("Password must be at least 6 characters.");return}let i=await fetch("/api/admin/credentials/set",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e,password:t})});if(i.ok)D(""),J("Admin account updated, please log out and log in with the new account.");else{let e=await i.json().catch(()=>({}));J(String(e.error||"Update failed."))}}catch(e){J("Update failed.")}},[I,B]);return(0,a.jsxs)("div",{style:{padding:20},children:[(0,a.jsx)("h1",{children:"后台"}),(0,a.jsx)("p",{children:(0,a.jsx)(n(),{href:"/",children:"← 返回首页"})}),F&&(0,a.jsx)("div",{style:{margin:"8px 0",color:"#2e7d32"},children:F}),(0,a.jsx)("form",{onSubmit:async e=>{e.preventDefault(),await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/login"},children:(0,a.jsx)("button",{type:"submit",style:{marginTop:8},children:"退出登录"})}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:16},children:[(0,a.jsx)("button",{type:"button",onClick:()=>M("images"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"images"===L?"#eef":"#fff"},children:"图片管理"}),(0,a.jsx)("button",{type:"button",onClick:()=>M("stats"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"stats"===L?"#eef":"#fff"},children:"数据统计"}),(0,a.jsx)("button",{type:"button",onClick:()=>M("comments"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"comments"===L?"#eef":"#fff"},children:"评论管理"}),(0,a.jsx)("button",{type:"button",onClick:()=>M("tables"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"tables"===L?"#eef":"#fff"},children:"数据表"}),(0,a.jsx)("button",{type:"button",onClick:()=>M("add-plant"),style:{padding:"8px 12px",borderRadius:8,border:"1px solid #e5e7eb",background:"add-plant"===L?"#eef":"#fff"},children:"添加植物"})]}),"images"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{style:{marginTop:20},children:[(0,a.jsx)("h2",{children:"上传文件"}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;return R((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}}),(0,a.jsx)("button",{type:"button",onClick:eb,disabled:!k||C,children:C?"上传中...":"确认上传"})]}),(0,a.jsx)("div",{style:{marginTop:6,fontSize:12,color:"#555"},children:"上传后会出现在下方下拉列表中，选择对应图位并点击应用。"})]}),(0,a.jsxs)("section",{style:{marginTop:20},children:[(0,a.jsx)("h2",{children:"首页大图（Hero）"}),(0,a.jsxs)("p",{children:["当前：",(0,a.jsx)("code",{children:(null==d?void 0:d.heroImage)||"未设置"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:c||d.heroImage||"",onChange:e=>p(e),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>em(c||d.heroImage||""),disabled:!(c||d.heroImage),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("button",{type:"button",onClick:ef,disabled:!c,style:{padding:"6px 10px"},children:"应用并预览"}),(0,a.jsx)("div",{style:{width:110},children:(c||d.heroImage)&&(0,a.jsx)("img",{src:c||d.heroImage,alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})]}),(0,a.jsxs)("section",{style:{marginTop:12},children:[(0,a.jsx)("h2",{children:"站点 Logo"}),(0,a.jsxs)("p",{children:["当前：",(0,a.jsx)("code",{children:(null==d?void 0:d.logo)||"未设置"})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:u||d.logo||"",onChange:e=>g(e),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>ej(u||d.logo||""),disabled:!(u||d.logo),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(u||d.logo)&&(0,a.jsx)("img",{src:u||d.logo,alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]}),(0,a.jsx)("div",{style:{marginTop:6,fontSize:12,color:"#555"},children:"建议使用透明背景的 PNG/SVG，系统会自动适配页面底色显示。"})]}),(0,a.jsxs)("section",{style:{marginTop:24},children:[(0,a.jsx)("h2",{children:"植物图片（详情页封面）"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:i.map(t=>{var i,s,l,n,d,r,c,p,u,g,C,T,k,R,F,P,z,E,O,_;return(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsx)("div",{style:{fontWeight:600},children:t.title||t.slug}),(0,a.jsxs)("div",{style:{fontSize:12,color:"#555"},children:["当前图片：",(0,a.jsx)("code",{children:t.image||"未设置"})]}),(0,a.jsxs)("div",{style:{fontSize:12,color:"#555",marginTop:4},children:["附图1：",(0,a.jsx)("code",{children:t.image2||"未设置"})," ／ 附图2：",(0,a.jsx)("code",{children:t.image3||"未设置"})]}),(0,a.jsx)("div",{style:{marginTop:6},children:(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:null!==(i=h[t.slug])&&void 0!==i?i:t.image||"",onChange:e=>x(i=>({...i,[t.slug]:e})),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return ev(t.slug,null!==(e=h[t.slug])&&void 0!==e?e:t.image||"")},disabled:!(null!==(s=h[t.slug])&&void 0!==s?s:t.image||""),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(null!==(l=h[t.slug])&&void 0!==l?l:t.image||"")&&(0,a.jsx)("img",{src:null!==(n=h[t.slug])&&void 0!==n?n:t.image||"",alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})}),(0,a.jsx)("div",{style:{marginTop:10},children:(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:null!==(d=y[t.slug])&&void 0!==d?d:t.image2||"",onChange:e=>b(i=>({...i,[t.slug]:e})),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return ew(t.slug,null!==(e=y[t.slug])&&void 0!==e?e:t.image2||"")},disabled:!(null!==(r=y[t.slug])&&void 0!==r?r:t.image2||""),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(null!==(c=y[t.slug])&&void 0!==c?c:t.image2||"")&&(0,a.jsx)("img",{src:null!==(p=y[t.slug])&&void 0!==p?p:t.image2||"",alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})}),(0,a.jsx)("div",{style:{marginTop:10},children:(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:null!==(u=m[t.slug])&&void 0!==u?u:t.image3||"",onChange:e=>j(i=>({...i,[t.slug]:e})),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return eS(t.slug,null!==(e=m[t.slug])&&void 0!==e?e:t.image3||"")},disabled:!(null!==(g=m[t.slug])&&void 0!==g?g:t.image3||""),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(null!==(C=m[t.slug])&&void 0!==C?C:t.image3||"")&&(0,a.jsx)("img",{src:null!==(T=m[t.slug])&&void 0!==T?T:t.image3||"",alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})}),(0,a.jsxs)("div",{style:{marginTop:12,borderTop:"1px dashed #e5e7eb",paddingTop:10},children:[(0,a.jsxs)("div",{style:{fontSize:12,color:"#555",marginBottom:6},children:["当前缩略图：",(0,a.jsx)("code",{children:t.thumbPlant||"未设置"})," ／ 猫咪缩略图：",(0,a.jsx)("code",{children:t.thumbCat||"未设置"})]}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:8},children:[(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:null!==(k=f[t.slug])&&void 0!==k?k:t.thumbPlant||"",onChange:e=>v(i=>({...i,[t.slug]:e})),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return eC(t.slug,"thumbPlant",null!==(e=f[t.slug])&&void 0!==e?e:t.thumbPlant||"")},disabled:!(null!==(R=f[t.slug])&&void 0!==R?R:t.thumbPlant||""),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(null!==(F=f[t.slug])&&void 0!==F?F:t.thumbPlant||"")&&(0,a.jsx)("img",{src:null!==(P=f[t.slug])&&void 0!==P?P:t.thumbPlant||"",alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[(0,a.jsx)(o,{images:e,value:null!==(z=w[t.slug])&&void 0!==z?z:t.thumbCat||"",onChange:e=>S(i=>({...i,[t.slug]:e})),placeholder:"选择图片路径...",width:420}),(0,a.jsx)("button",{type:"button",onClick:()=>{var e;return eC(t.slug,"thumbCat",null!==(e=w[t.slug])&&void 0!==e?e:t.thumbCat||"")},disabled:!(null!==(E=w[t.slug])&&void 0!==E?E:t.thumbCat||""),style:{padding:"6px 10px"},children:"应用"}),(0,a.jsx)("div",{style:{width:110},children:(null!==(O=w[t.slug])&&void 0!==O?O:t.thumbCat||"")&&(0,a.jsx)("img",{src:null!==(_=w[t.slug])&&void 0!==_?_:t.thumbCat||"",alt:"预览",style:{width:"100%",height:60,objectFit:"cover",borderRadius:6,border:"1px solid #e5e7eb"}})})]})]})]})]},t.slug)})})]})]}),"stats"===L&&(0,a.jsxs)("section",{style:{marginTop:24},children:[(0,a.jsx)("h2",{children:"数据统计（30天）"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"每日访问次数"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:6},children:z.map(e=>(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"110px 1fr 54px",alignItems:"center",gap:8},children:[(0,a.jsx)("span",{style:{color:"#555"},children:e.date}),(0,a.jsx)("div",{style:{background:"#f3f4f6",borderRadius:999,overflow:"hidden",height:10},children:(0,a.jsx)("div",{style:{width:"".concat(Math.max(2,Math.round(Number(e.count||0)/O*100)),"%"),height:"100%",background:"linear-gradient(90deg, #A8E6CF, #FFD3B6, #DCBFFF)"}})}),(0,a.jsx)("span",{style:{fontWeight:600,textAlign:"right"},children:e.count})]},e.date))})]})})]}),"comments"===L&&(0,a.jsxs)("section",{style:{marginTop:24},children:[(0,a.jsx)("h2",{children:"评论管理"}),(0,a.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:12},children:[(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"待审核"}),(0,a.jsxs)("div",{style:{display:"grid",gap:10},children:[0===_.length&&(0,a.jsx)("div",{style:{color:"#777"},children:"暂无待审核评论"}),_.map(e=>(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsxs)("div",{style:{fontSize:12,color:"#555"},children:[e.slug," • ",e.author||"Anonymous"," • ",new Date(e.created_at).toLocaleString()]}),(0,a.jsx)("div",{style:{marginTop:6},children:e.content}),(0,a.jsxs)("div",{style:{display:"flex",gap:8,marginTop:8},children:[(0,a.jsx)("button",{type:"button",onClick:()=>eh(e.id,"approve"),children:"通过"}),(0,a.jsx)("button",{type:"button",onClick:()=>eh(e.id,"delete"),children:"删除"})]})]},e.id))]})]}),(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsx)("div",{style:{fontWeight:600,marginBottom:8},children:"已审核"}),(0,a.jsxs)("div",{style:{display:"grid",gap:10},children:[0===ec.length&&(0,a.jsx)("div",{style:{color:"#777"},children:"暂无已审核评论"}),ec.map(e=>(0,a.jsxs)("div",{style:{border:"1px solid #e5e7eb",borderRadius:12,padding:12},children:[(0,a.jsxs)("div",{style:{fontSize:12,color:"#555"},children:[e.slug," • ",e.author||"Anonymous"," • ",new Date(e.created_at).toLocaleString()]}),(0,a.jsx)("div",{style:{marginTop:6},children:e.content}),Array.isArray(e.replies)&&e.replies.length>0&&(0,a.jsx)("div",{style:{marginTop:8,display:"grid",gap:6},children:e.replies.map(e=>(0,a.jsxs)("div",{style:{border:"1px dashed #e5e7eb",borderRadius:8,padding:8},children:[(0,a.jsxs)("div",{style:{fontSize:12,color:"#555"},children:[e.author||"Admin"," • ",new Date(e.created_at).toLocaleString()]}),(0,a.jsx)("div",{style:{marginTop:4},children:e.content})]},e.id))}),(0,a.jsxs)("div",{style:{display:"grid",gap:6,marginTop:8},children:[(0,a.jsx)("textarea",{rows:2,placeholder:"回复内容...",value:String((eu||{})[e.id]||""),onChange:t=>eg(i=>({...i,[e.id]:t.target.value}))}),(0,a.jsxs)("div",{style:{display:"flex",gap:8},children:[(0,a.jsx)("button",{type:"button",onClick:()=>ex(e.id),disabled:!String((eu||{})[e.id]||"").trim(),children:"回复"}),(0,a.jsx)("button",{type:"button",onClick:()=>eh(e.id,"delete"),children:"删除"})]})]})]},e.id))]})]})]})]}),"tables"===L&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{style:{marginTop:24},children:[(0,a.jsx)("h2",{children:"数据表"}),(0,a.jsx)("div",{style:{color:"#555",marginBottom:8},children:"用户管理（待开发）"}),(0,a.jsx)("div",{style:{color:"#555"},children:"更多数据类管理项可在此扩展。"})]}),(0,a.jsxs)("section",{style:{marginTop:24},children:[(0,a.jsx)("h2",{children:"后台账号设置"}),(0,a.jsxs)("div",{style:{display:"grid",gap:10,maxWidth:420},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{children:"用户名"}),(0,a.jsx)("input",{value:I,onChange:e=>A(e.target.value),placeholder:"",autoComplete:"off",inputMode:"text",spellCheck:!1,autoCapitalize:"none",onKeyDown:e=>{"Enter"===e.key&&ek()}})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:6},children:[(0,a.jsx)("span",{children:"新密码"}),(0,a.jsx)("input",{type:"password",value:B,onChange:e=>D(e.target.value),placeholder:"",autoComplete:"new-password",spellCheck:!1,onKeyDown:e=>{"Enter"===e.key&&ek()}})]}),(0,a.jsx)("button",{type:"button",onClick:ek,disabled:!I||!B,children:"更新后台账号"}),(0,a.jsx)("div",{style:{color:"#666"},children:"更新后请退出并用新账号登录。"}),W&&(0,a.jsx)("div",{style:{color:W.includes("已更新")?"#2e7d32":"#c62828"},children:W})]})]})]}),"add-plant"===L&&(0,a.jsxs)("section",{style:{marginTop:24,background:"#FAF7F2",borderRadius:ed,padding:"32px",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)",border:"2px solid ".concat(eo)},children:[(0,a.jsx)("h2",{style:{fontSize:"28px",fontWeight:700,color:en,marginBottom:"24px"},children:"Add New Plant"}),(0,a.jsxs)("form",{onSubmit:eT,style:{display:"grid",gap:"20px",maxWidth:"600px"},children:[(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"Plant Name:"}),(0,a.jsx)("input",{type:"text",value:U,onChange:e=>q(e.target.value),required:!0,style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo}})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"Scientific Name:"}),(0,a.jsx)("input",{type:"text",value:H,onChange:e=>G(e.target.value),style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo}})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"Toxicity Level:"}),(0,a.jsxs)("select",{value:K,onChange:e=>X(e.target.value),required:!0,style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",background:"#fff",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo},children:[(0,a.jsx)("option",{value:"Safe",children:"Safe"}),(0,a.jsx)("option",{value:"Caution",children:"Caution"}),(0,a.jsx)("option",{value:"Toxic",children:"Toxic"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"Care Difficulty:"}),(0,a.jsxs)("select",{value:V,onChange:e=>Z(e.target.value),required:!0,style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",background:"#fff",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo},children:[(0,a.jsx)("option",{value:"Easy",children:"Easy"}),(0,a.jsx)("option",{value:"Medium",children:"Medium"}),(0,a.jsx)("option",{value:"Hard",children:"Hard"})]})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"English Description:"}),(0,a.jsx)("textarea",{value:$,onChange:e=>Q(e.target.value),required:!0,rows:6,style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",fontFamily:"inherit",resize:"vertical",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo}})]}),(0,a.jsxs)("label",{style:{display:"grid",gap:"8px"},children:[(0,a.jsx)("span",{style:{fontWeight:600,color:en,fontSize:"15px"},children:"Image URL (e.g., /images/plants/my-plant.jpg):"}),(0,a.jsx)("input",{type:"text",value:Y,onChange:e=>ee(e.target.value),placeholder:"/images/plants/my-plant.jpg",style:{padding:"12px 16px",borderRadius:er,border:"2px solid ".concat(eo),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=el},onBlur:e=>{e.currentTarget.style.borderColor=eo}})]}),(0,a.jsx)("button",{type:"submit",disabled:ea,style:{padding:"14px 24px",background:ea?"#ccc":el,color:"#fff",border:"none",borderRadius:ed,fontWeight:600,fontSize:"16px",cursor:ea?"not-allowed":"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{ea||(e.currentTarget.style.background=en)},onMouseLeave:e=>{ea||(e.currentTarget.style.background=el)},children:ea?"Submitting...":"Add Plant"}),et&&(0,a.jsx)("div",{style:{marginTop:"10px",padding:"12px",borderRadius:er,background:et.includes("Success")?"#D4EDDA":"#F8D7DA",color:et.includes("Success")?"#155724":"#721C24",border:"1px solid ".concat(et.includes("Success")?"#C3E6CB":"#F5C6CB")},children:et})]})]})]})}}},function(e){e.O(0,[888,774,179],function(){return e(e.s=9474)}),_N_E=e.O()}]);