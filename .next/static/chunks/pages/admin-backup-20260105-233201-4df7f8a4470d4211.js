(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{7318:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin-backup-20260105-233201",function(){return r(7554)}])},7554:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return d}});var o=r(5893),n=r(7294),a=r(1664),i=r.n(a),l=r(9008),s=r.n(l);function d(){let[e,t]=(0,n.useState)([]),[r,a]=(0,n.useState)([]),[l,d]=(0,n.useState)({heroImage:"",logo:""}),[c,p]=(0,n.useState)(""),[x,u]=(0,n.useState)(""),[g,f]=(0,n.useState)({}),[y,h]=(0,n.useState)(!1),[b,m]=(0,n.useState)(null),[j,S]=(0,n.useState)(""),[v,T]=(0,n.useState)(""),[w,k]=(0,n.useState)("add-plant"),[C,D]=(0,n.useState)(""),[z,_]=(0,n.useState)(!1),[B,F]=(0,n.useState)(null),[R,W]=(0,n.useState)({title:"",scientific_name:"",toxicity_level:"Safe",care_difficulty:"Easy",summary:"",image:"",symptoms:[],what_to_do:"",aspca_link:"",care_tips:"",water_needs:"",light_needs:"",temperature:""}),[A,E]=(0,n.useState)(!1),[M,I]=(0,n.useState)(""),[L,P]=(0,n.useState)(""),[Y,O]=(0,n.useState)("Safe"),[N,q]=(0,n.useState)("Easy"),[H,J]=(0,n.useState)(""),[G,U]=(0,n.useState)(""),[X,Z]=(0,n.useState)(""),[$,K]=(0,n.useState)(!1),Q="#87A96B",V="#6B8553",ee="#FAF7F2",et="#F5F1E8",er="24px",eo="16px";(0,n.useEffect)(()=>{(async()=>{try{let[e,r,o]=await Promise.all([fetch("/api/list-images"),fetch("/api/site-config"),fetch("/api/plants")]),n=await e.json(),i=await r.json(),l=await o.json();t(n.paths||[]),d(i||{heroImage:""}),p((i||{}).heroImage||""),u((i||{}).logo||""),a(l.plants||[])}catch(e){}})()},[]);let en=async e=>{if(e){h(!0);try{let r=new FileReader;r.onload=async()=>{let o=r.result,n=e.name.replace(/[^a-zA-Z0-9._-]/g,"_"),a=await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:n,data:String(o||"")})});if(a.ok){let e=await a.json(),r=await (await fetch("/api/list-images")).json();return t(r.paths||[]),d(e=>({...e})),(null==e?void 0:e.path)||""}h(!1)},r.readAsDataURL(e)}catch(e){h(!1)}}},ea=async()=>{if(!b)return;let e=await en(b);h(!1),e&&(T("图片已上传到素材库"),m(null),S(""))},ei=async e=>{if(!e)return;await fetch("/api/site-config",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({heroImage:e})});let t=await (await fetch("/api/site-config")).json();d(t),p(t.heroImage||""),T("首页大图已更新")},el=async e=>{try{await navigator.clipboard.writeText(e),D(e),T("已复制路径：".concat(e)),setTimeout(()=>D(""),2e3)}catch(e){T("复制失败，请手动复制")}},es=e=>{if(e&&e.type.startsWith("image/")){m(e);let t=new FileReader;t.onload=e=>{S(e.target.result)},t.readAsDataURL(e)}else m(null),S("")},ed=e=>{F(e),W({title:e.title||"",scientific_name:e.scientific_name||"",toxicity_level:e.toxicity_level||"Safe",care_difficulty:e.care_difficulty||"Easy",summary:e.summary||"",image:e.image||"",symptoms:e.symptoms||[],what_to_do:e.what_to_do||"",aspca_link:e.aspca_link||"",care_tips:e.care_tips||"",water_needs:e.water_needs||"",light_needs:e.light_needs||"",temperature:e.temperature||""}),_(!0)},ec=()=>{_(!1),F(null),W({title:"",scientific_name:"",toxicity_level:"Safe",care_difficulty:"Easy",summary:"",image:"",symptoms:[],what_to_do:"",aspca_link:"",care_tips:"",water_needs:"",light_needs:"",temperature:""})},ep=async e=>{e.preventDefault(),E(!0);try{let e=await fetch("/api/update-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:B.slug,...R})});if(e.ok){T("植物信息更新成功！"),ec();let e=await (await fetch("/api/plants")).json();a(e.plants||[])}else{let t=await e.json();T("更新失败：".concat(t.error||"未知错误"))}}catch(e){T("更新失败：".concat(e.message||"网络错误"))}finally{E(!1)}},ex=async e=>{if(confirm('确定要删除植物"'.concat(e.title||e.slug,'"吗？此操作不可撤销。')))try{let t=await fetch("/api/delete-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e.slug})});if(t.ok){T('植物"'.concat(e.title||e.slug,'"已删除'));let t=await (await fetch("/api/plants")).json();a(t.plants||[])}else{let e=await t.json();T("删除失败：".concat(e.error||"未知错误"))}}catch(e){T("删除失败：".concat(e.message||"网络错误"))}},eu=async e=>{e.preventDefault(),K(!0),Z("");let t=M.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-*|-*$/g,"");if(!t){Z("错误：植物名称不能为空。"),K(!1);return}try{let e=await fetch("/api/save-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:M,scientific_name:L,toxicity_level:Y,care_difficulty:N,summary:H,image:G||"/images/plants/".concat(t,".jpg"),slug:t})});if(e.ok){Z("成功：植物添加成功！"),I(""),P(""),O("Safe"),q("Easy"),J(""),U("");let e=await (await fetch("/api/plants")).json();a(e.plants||[])}else{let t=await e.json();Z("错误：".concat(t.error||"添加植物失败。"))}}catch(e){Z("错误：".concat(e.message||"发生意外错误。"))}finally{K(!1)}};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(s(),{children:[(0,o.jsx)("title",{children:"管理后台 - PawSafePlants"}),(0,o.jsx)("meta",{name:"description",content:"管理后台用于管理PawSafePlants内容"})]}),(0,o.jsxs)("div",{style:{fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Inter", sans-serif',background:ee,minHeight:"100vh"},children:[(0,o.jsx)("header",{style:{background:"#fff",borderBottom:"2px solid ".concat(et),padding:"20px 0",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.05)"},children:(0,o.jsxs)("div",{style:{maxWidth:"1200px",margin:"0 auto",padding:"0 20px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[(0,o.jsx)("h1",{style:{fontSize:"32px",fontWeight:700,color:V,margin:0},children:"管理后台"}),(0,o.jsx)(i(),{href:"/",style:{display:"inline-flex",alignItems:"center",padding:"8px 16px",background:ee,color:V,textDecoration:"none",borderRadius:eo,fontWeight:500,fontSize:"14px",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background=et,e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background=ee,e.currentTarget.style.transform="translateY(0)"},children:"← 返回首页"})]}),(0,o.jsx)("form",{onSubmit:async e=>{e.preventDefault(),await fetch("/api/auth/logout",{method:"POST"}),window.location.href="/login"},children:(0,o.jsx)("button",{type:"submit",style:{padding:"10px 20px",background:"#E85D5D",color:"#fff",border:"none",borderRadius:eo,fontWeight:600,fontSize:"14px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background="#D44444",e.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:e=>{e.currentTarget.style.background="#E85D5D",e.currentTarget.style.transform="translateY(0)"},children:"退出登录"})})]})}),v&&(0,o.jsx)("div",{style:{maxWidth:"1200px",margin:"20px auto",padding:"0 20px"},children:(0,o.jsxs)("div",{style:{padding:"16px 20px",background:"".concat(Q,"20"),border:"2px solid ".concat(Q),borderRadius:eo,color:V,fontWeight:500,fontSize:"14px"},children:["✅ ",v]})}),(0,o.jsx)("div",{style:{maxWidth:"1200px",margin:"20px auto",padding:"0 20px"},children:(0,o.jsx)("div",{style:{display:"flex",gap:"8px",background:"#fff",padding:"8px",borderRadius:er,border:"2px solid ".concat(et)},children:[{id:"add-plant",label:"添加植物",icon:"\uD83C\uDF31"},{id:"images",label:"图片管理",icon:"\uD83D\uDDBC️"},{id:"plants",label:"植物管理",icon:"\uD83C\uDF3F"}].map(e=>(0,o.jsxs)("button",{type:"button",onClick:()=>k(e.id),style:{flex:1,padding:"12px 20px",background:w===e.id?Q:"#fff",color:w===e.id?"#fff":V,border:"none",borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px"},onMouseEnter:t=>{w!==e.id&&(t.currentTarget.style.background="".concat(Q,"10"))},onMouseLeave:t=>{w!==e.id&&(t.currentTarget.style.background="#fff")},children:[e.icon," ",e.label]},e.id))})}),(0,o.jsxs)("main",{style:{maxWidth:"1200px",margin:"0 auto 40px auto",padding:"0 20px"},children:["add-plant"===w&&(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"40px",border:"2px solid ".concat(et),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)"},children:[(0,o.jsx)("h2",{style:{fontSize:"28px",fontWeight:700,color:V,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:"\uD83C\uDF31 添加新植物"}),(0,o.jsx)("p",{style:{color:"#5A5A5A",marginBottom:"32px",fontSize:"16px"},children:"向数据库中添加新植物，包含猫咪安全信息。"}),(0,o.jsxs)("form",{onSubmit:eu,style:{display:"flex",flexDirection:"column",gap:"24px"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"植物名称 *"}),(0,o.jsx)("input",{type:"text",value:M,onChange:e=>I(e.target.value),required:!0,placeholder:"例如：吊兰",style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"拉丁学名"}),(0,o.jsx)("input",{type:"text",value:L,onChange:e=>P(e.target.value),placeholder:"例如：Chlorophytum comosum",style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"安全性等级 *"}),(0,o.jsxs)("select",{value:Y,onChange:e=>O(e.target.value),required:!0,style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease",background:"#fff"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"},children:[(0,o.jsx)("option",{value:"Safe",children:"✅ 安全 (Safe)"}),(0,o.jsx)("option",{value:"Caution",children:"⚠️ 注意 (Caution)"}),(0,o.jsx)("option",{value:"Dangerous",children:"❌ 有毒 (Dangerous)"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"养育难度 *"}),(0,o.jsxs)("select",{value:N,onChange:e=>q(e.target.value),required:!0,style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease",background:"#fff"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"},children:[(0,o.jsx)("option",{value:"Easy",children:"\uD83C\uDF31 简单 (Easy)"}),(0,o.jsx)("option",{value:"Moderate",children:"\uD83C\uDF3F 中等 (Moderate)"}),(0,o.jsx)("option",{value:"Difficult",children:"\uD83C\uDF33 困难 (Difficult)"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"详细描述 *"}),(0,o.jsx)("textarea",{value:H,onChange:e=>J(e.target.value),required:!0,placeholder:"请提供植物的简要描述及其对猫咪的安全性...",rows:4,style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"8px",fontSize:"14px"},children:"图片 URL"}),(0,o.jsx)("input",{type:"url",value:G,onChange:e=>U(e.target.value),placeholder:"https://example.com/plant-image.jpg",style:{width:"100%",padding:"14px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),X&&(0,o.jsxs)("div",{style:{padding:"16px 20px",borderRadius:eo,fontSize:"14px",fontWeight:500,background:X.includes("成功")?"".concat(Q,"20"):"#E85D5D20",border:"2px solid ".concat(X.includes("成功")?Q:"#E85D5D"),color:X.includes("成功")?V:"#E85D5D"},children:[X.includes("成功")?"✅":"❌"," ",X]}),(0,o.jsx)("button",{type:"submit",disabled:$,style:{padding:"16px 32px",background:$?"#ccc":Q,color:"#fff",border:"none",borderRadius:eo,fontWeight:600,fontSize:"16px",cursor:$?"not-allowed":"pointer",transition:"all 0.3s ease",alignSelf:"flex-start"},onMouseEnter:e=>{$||(e.currentTarget.style.background=V,e.currentTarget.style.transform="translateY(-2px)",e.currentTarget.style.boxShadow="0 4px 16px rgba(135, 169, 107, 0.3)")},onMouseLeave:e=>{$||(e.currentTarget.style.background=Q,e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none")},children:$?"正在添加...":"\uD83C\uDF31 保存植物信息"})]})]}),"images"===w&&(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"32px"},children:[(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"32px",border:"2px solid ".concat(et),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)"},children:[(0,o.jsx)("h2",{style:{fontSize:"24px",fontWeight:700,color:V,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:"\uD83D\uDCE4 上传图片"}),(0,o.jsx)("p",{style:{color:"#5A5A5A",marginBottom:"24px",fontSize:"15px"},children:"上传图片用于植物和站点内容。支持 JPG、PNG、GIF 格式。"}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 200px",gap:"24px",alignItems:"start"},children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{style:{border:"2px dashed ".concat(et),borderRadius:eo,padding:"32px",textAlign:"center",background:ee,transition:"all 0.3s ease",cursor:"pointer",position:"relative"},onClick:()=>document.getElementById("file-input").click(),onMouseEnter:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.background="".concat(Q,"10")},onMouseLeave:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.background=ee},children:[(0,o.jsx)("input",{id:"file-input",type:"file",accept:"image/*",onChange:e=>{var t;return es((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)},style:{display:"none"}}),j?(0,o.jsxs)("div",{style:{position:"relative"},children:[(0,o.jsx)("img",{src:j,alt:"预览",style:{maxWidth:"100%",maxHeight:"200px",borderRadius:"8px",objectFit:"contain"}}),(0,o.jsx)("div",{style:{position:"absolute",top:"8px",right:"8px",background:"rgba(0,0,0,0.7)",color:"#fff",padding:"4px 8px",borderRadius:"4px",fontSize:"12px"},children:null==b?void 0:b.name})]}):(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCF7"}),(0,o.jsx)("div",{style:{fontSize:"16px",fontWeight:600,color:V,marginBottom:"8px"},children:"点击选择图片或拖拽到此处"}),(0,o.jsx)("div",{style:{fontSize:"14px",color:"#5A5A5A"},children:"支持 JPG、PNG、GIF 格式，最大 10MB"})]})]}),b&&(0,o.jsxs)("div",{style:{marginTop:"16px",display:"flex",gap:"12px"},children:[(0,o.jsx)("button",{type:"button",onClick:ea,disabled:y,style:{padding:"12px 24px",background:y?"#ccc":Q,color:"#fff",border:"none",borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:y?"not-allowed":"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{y||(e.currentTarget.style.background=V,e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{y||(e.currentTarget.style.background=Q,e.currentTarget.style.transform="translateY(0)")},children:y?"上传中...":"确认上传"}),(0,o.jsx)("button",{type:"button",onClick:()=>{m(null),S("")},style:{padding:"12px 24px",background:"#fff",color:"#5A5A5A",border:"2px solid ".concat(et),borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background=et},onMouseLeave:e=>{e.currentTarget.style.background="#fff"},children:"取消"})]})]}),b&&(0,o.jsxs)("div",{style:{background:ee,padding:"16px",borderRadius:eo,border:"2px solid ".concat(et)},children:[(0,o.jsx)("div",{style:{fontSize:"14px",fontWeight:600,color:V,marginBottom:"8px"},children:"文件信息"}),(0,o.jsxs)("div",{style:{fontSize:"13px",color:"#5A5A5A",lineHeight:"1.6"},children:[(0,o.jsxs)("div",{children:["文件名：",b.name]}),(0,o.jsxs)("div",{children:["大小：",(b.size/1024/1024).toFixed(2)," MB"]}),(0,o.jsxs)("div",{children:["类型：",b.type]})]})]})]})]}),(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"32px",border:"2px solid ".concat(et),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)"},children:[(0,o.jsx)("h2",{style:{fontSize:"24px",fontWeight:700,color:V,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:"\uD83C\uDFE0 首页大图"}),(0,o.jsxs)("p",{style:{color:"#5A5A5A",marginBottom:"24px",fontSize:"15px"},children:["当前：",(0,o.jsx)("code",{style:{background:et,padding:"4px 8px",borderRadius:"6px"},children:(null==l?void 0:l.heroImage)||"未设置"})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"16px",alignItems:"center",flexWrap:"wrap"},children:[(0,o.jsxs)("select",{value:c||l.heroImage||"",onChange:e=>p(e.target.value),style:{padding:"12px 16px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"15px",minWidth:"300px",outline:"none"},children:[(0,o.jsx)("option",{value:"",children:"选择图片..."}),e.map(e=>(0,o.jsx)("option",{value:e,children:e},e))]}),(0,o.jsx)("button",{type:"button",onClick:()=>ei(c||l.heroImage||""),disabled:!(c||l.heroImage),style:{padding:"12px 24px",background:c||l.heroImage?Q:"#ccc",color:"#fff",border:"none",borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:c||l.heroImage?"pointer":"not-allowed",transition:"all 0.3s ease"},onMouseEnter:e=>{(c||l.heroImage)&&(e.currentTarget.style.background=V,e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{(c||l.heroImage)&&(e.currentTarget.style.background=Q,e.currentTarget.style.transform="translateY(0)")},children:"应用"}),(c||l.heroImage)&&(0,o.jsx)("img",{src:c||l.heroImage,alt:"预览",style:{width:"100px",height:"60px",objectFit:"cover",borderRadius:"8px",border:"2px solid ".concat(et)}})]})]}),(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"32px",border:"2px solid ".concat(et),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)"},children:[(0,o.jsx)("h2",{style:{fontSize:"24px",fontWeight:700,color:V,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:"\uD83D\uDDBC️ 图片库"}),(0,o.jsxs)("p",{style:{color:"#5A5A5A",marginBottom:"24px",fontSize:"15px"},children:["共 ",e.length," 张图片"]}),0===e.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#5A5A5A",fontSize:"16px"},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83D\uDCC2"}),"暂无图片，请先上传图片"]}):(0,o.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(250px, 1fr))",gap:"20px"},children:e.map(e=>(0,o.jsxs)("div",{style:{border:"2px solid ".concat(et),borderRadius:eo,overflow:"hidden",transition:"all 0.3s ease",background:"#fff"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(0, 0, 0, 0.12)",e.currentTarget.style.borderColor=Q},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none",e.currentTarget.style.borderColor=et},children:[(0,o.jsx)("div",{style:{height:"180px",overflow:"hidden",background:et,position:"relative"},children:(0,o.jsx)("img",{src:e,alt:e,style:{width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='\n                                <div style="display: flex; align-items: center; justify-content: center; height: 100%; font-size: 48px; color: #87A96B;">\n                                  \uD83D\uDDBC️\n                                </div>\n                              '}})}),(0,o.jsxs)("div",{style:{padding:"16px"},children:[(0,o.jsx)("div",{style:{fontSize:"13px",fontWeight:600,color:V,marginBottom:"8px",wordBreak:"break-all",lineHeight:"1.4"},children:e.split("/").pop()}),(0,o.jsx)("div",{style:{fontSize:"11px",color:"#888",marginBottom:"12px",fontFamily:"monospace",background:et,padding:"4px 6px",borderRadius:"4px",wordBreak:"break-all"},children:e}),(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>el(e),style:{flex:1,padding:"8px 12px",background:C===e?Q:ee,color:C===e?"#fff":V,border:"2px solid ".concat(Q),borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",justifyContent:"center",gap:"4px"},onMouseEnter:t=>{C!==e&&(t.currentTarget.style.background="".concat(Q,"10"))},onMouseLeave:t=>{C!==e&&(t.currentTarget.style.background=ee)},children:C===e?"✅ 已复制":"\uD83D\uDCCB 复制路径"}),(0,o.jsx)("button",{type:"button",onClick:()=>window.open(e,"_blank"),style:{padding:"8px 12px",background:"#fff",color:V,border:"2px solid ".concat(et),borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background=et},onMouseLeave:e=>{e.currentTarget.style.background="#fff"},children:"\uD83D\uDD0D 查看"})]})]})]},e))})]})]}),"plants"===w&&(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"32px",border:"2px solid ".concat(et),boxShadow:"0 4px 16px rgba(0, 0, 0, 0.08)"},children:[(0,o.jsx)("h2",{style:{fontSize:"24px",fontWeight:700,color:V,marginBottom:"8px",display:"flex",alignItems:"center",gap:"12px"},children:"\uD83C\uDF3F 植物管理"}),(0,o.jsxs)("p",{style:{color:"#5A5A5A",marginBottom:"24px",fontSize:"15px"},children:["共 ",r.length," 个植物条目"]}),0===r.length?(0,o.jsxs)("div",{style:{textAlign:"center",padding:"60px 20px",color:"#5A5A5A",fontSize:"16px"},children:[(0,o.jsx)("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"\uD83C\uDF31"}),"暂无植物数据，请先添加植物"]}):(0,o.jsx)("div",{style:{overflowX:"auto",border:"2px solid ".concat(et),borderRadius:eo},children:(0,o.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{style:{background:ee,borderBottom:"2px solid ".concat(et)},children:[(0,o.jsx)("th",{style:{padding:"16px",textAlign:"left",fontWeight:600,color:V,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"预览图"}),(0,o.jsx)("th",{style:{padding:"16px",textAlign:"left",fontWeight:600,color:V,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"名称"}),(0,o.jsx)("th",{style:{padding:"16px",textAlign:"left",fontWeight:600,color:V,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"拉丁名"}),(0,o.jsx)("th",{style:{padding:"16px",textAlign:"left",fontWeight:600,color:V,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"安全等级"}),(0,o.jsx)("th",{style:{padding:"16px",textAlign:"left",fontWeight:600,color:V,fontSize:"13px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"操作"})]})}),(0,o.jsx)("tbody",{children:r.map((e,t)=>{let r=(e=>{let t=String(e||"").toLowerCase();return t.includes("safe")||t.includes("安全")?{label:"安全",color:Q,bg:"".concat(Q,"20"),icon:"✅"}:t.includes("danger")||t.includes("toxic")||t.includes("有毒")||t.includes("dangerous")?{label:"有毒",color:"#E85D5D",bg:"#E85D5D20",icon:"❌"}:{label:"注意",color:"#F5C842",bg:"#F5C84220",icon:"⚠️"}})(e.toxicity_level);return(0,o.jsxs)("tr",{style:{borderBottom:"1px solid ".concat(et),transition:"background 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background=ee},onMouseLeave:e=>{e.currentTarget.style.background="#fff"},children:[(0,o.jsx)("td",{style:{padding:"16px"},children:(0,o.jsx)("div",{style:{width:"60px",height:"60px",borderRadius:"8px",overflow:"hidden",background:et,display:"flex",alignItems:"center",justifyContent:"center"},children:e.image?(0,o.jsx)("img",{src:e.image,alt:e.title,style:{width:"100%",height:"100%",objectFit:"cover"},onError:e=>{e.currentTarget.style.display="none",e.currentTarget.parentElement.innerHTML='<span style="font-size: 24px;">\uD83C\uDF3F</span>'}}):(0,o.jsx)("span",{style:{fontSize:"24px"},children:"\uD83C\uDF3F"})})}),(0,o.jsxs)("td",{style:{padding:"16px"},children:[(0,o.jsx)("div",{style:{fontWeight:600,color:V,marginBottom:"4px"},children:e.title||e.slug}),(0,o.jsx)("div",{style:{fontSize:"12px",color:"#888",fontFamily:"monospace"},children:e.slug})]}),(0,o.jsx)("td",{style:{padding:"16px"},children:(0,o.jsx)("div",{style:{fontStyle:"italic",color:"#5A5A5A",fontSize:"13px"},children:e.scientific_name||"-"})}),(0,o.jsx)("td",{style:{padding:"16px"},children:(0,o.jsxs)("span",{style:{display:"inline-flex",alignItems:"center",gap:"4px",padding:"4px 10px",borderRadius:"12px",fontSize:"12px",fontWeight:600,background:r.bg,color:r.color},children:[r.icon," ",r.label]})}),(0,o.jsx)("td",{style:{padding:"16px"},children:(0,o.jsxs)("div",{style:{display:"flex",gap:"8px"},children:[(0,o.jsx)("button",{type:"button",onClick:()=>ed(e),style:{padding:"6px 12px",background:Q,color:"#fff",border:"none",borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.background=V},onMouseLeave:e=>{e.currentTarget.style.background=Q},children:"✏️ 编辑"}),(0,o.jsx)("button",{type:"button",onClick:()=>ex(e),style:{padding:"6px 12px",background:"#fff",color:"#E85D5D",border:"2px solid #E85D5D",borderRadius:"6px",fontWeight:600,fontSize:"12px",cursor:"pointer",transition:"all 0.3s ease",display:"flex",alignItems:"center",gap:"4px"},onMouseEnter:e=>{e.currentTarget.style.background="#E85D5D",e.currentTarget.style.color="#fff"},onMouseLeave:e=>{e.currentTarget.style.background="#fff",e.currentTarget.style.color="#E85D5D"},children:"\uD83D\uDDD1️ 删除"})]})})]},e.slug)})})]})})]})]}),z&&(0,o.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},onClick:e=>{e.target===e.currentTarget&&ec()},children:(0,o.jsxs)("div",{style:{background:"#fff",borderRadius:er,padding:"32px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflow:"auto",border:"2px solid ".concat(et),boxShadow:"0 20px 40px rgba(0, 0, 0, 0.2)"},children:[(0,o.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"24px"},children:[(0,o.jsx)("h3",{style:{fontSize:"24px",fontWeight:700,color:V,margin:0,display:"flex",alignItems:"center",gap:"12px"},children:"✏️ 编辑植物信息"}),(0,o.jsx)("button",{type:"button",onClick:ec,style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",color:"#888",padding:"4px",borderRadius:"4px",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background=et},onMouseLeave:e=>{e.currentTarget.style.background="none"},children:"\xd7"})]}),(0,o.jsxs)("form",{onSubmit:ep,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"植物名称 *"}),(0,o.jsx)("input",{type:"text",value:R.title,onChange:e=>W(t=>({...t,title:e.target.value})),required:!0,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"拉丁学名"}),(0,o.jsx)("input",{type:"text",value:R.scientific_name,onChange:e=>W(t=>({...t,scientific_name:e.target.value})),style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]})]}),(0,o.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"安全性等级 *"}),(0,o.jsxs)("select",{value:R.toxicity_level,onChange:e=>W(t=>({...t,toxicity_level:e.target.value})),required:!0,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease",background:"#fff"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"},children:[(0,o.jsx)("option",{value:"Safe",children:"✅ 安全 (Safe)"}),(0,o.jsx)("option",{value:"Caution",children:"⚠️ 注意 (Caution)"}),(0,o.jsx)("option",{value:"Dangerous",children:"❌ 有毒 (Dangerous)"})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"养育难度 *"}),(0,o.jsxs)("select",{value:R.care_difficulty,onChange:e=>W(t=>({...t,care_difficulty:e.target.value})),required:!0,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease",background:"#fff"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"},children:[(0,o.jsx)("option",{value:"Easy",children:"\uD83C\uDF31 简单 (Easy)"}),(0,o.jsx)("option",{value:"Moderate",children:"\uD83C\uDF3F 中等 (Moderate)"}),(0,o.jsx)("option",{value:"Difficult",children:"\uD83C\uDF33 困难 (Difficult)"})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"详细描述 *"}),(0,o.jsx)("textarea",{value:R.summary,onChange:e=>W(t=>({...t,summary:e.target.value})),required:!0,rows:3,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"图片链接"}),(0,o.jsx)("input",{type:"url",value:R.image,onChange:e=>W(t=>({...t,image:e.target.value})),placeholder:"https://example.com/plant-image.jpg",style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"症状（每行一个）"}),(0,o.jsx)("textarea",{value:R.symptoms.join("\n"),onChange:e=>W(t=>({...t,symptoms:e.target.value.split("\n").filter(e=>e.trim())})),placeholder:"呕吐 嗜睡 食欲不振",rows:3,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"应对措施"}),(0,o.jsx)("textarea",{value:R.what_to_do,onChange:e=>W(t=>({...t,what_to_do:e.target.value})),placeholder:"立即联系兽医...",rows:2,style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease",resize:"vertical",fontFamily:"inherit"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{style:{display:"block",fontWeight:600,color:V,marginBottom:"6px",fontSize:"14px"},children:"ASPCA 链接"}),(0,o.jsx)("input",{type:"url",value:R.aspca_link,onChange:e=>W(t=>({...t,aspca_link:e.target.value})),placeholder:"https://www.aspca.org/...",style:{width:"100%",padding:"12px 14px",borderRadius:eo,border:"2px solid ".concat(et),fontSize:"14px",outline:"none",transition:"all 0.3s ease"},onFocus:e=>{e.currentTarget.style.borderColor=Q,e.currentTarget.style.boxShadow="0 0 0 3px ".concat(Q,"20")},onBlur:e=>{e.currentTarget.style.borderColor=et,e.currentTarget.style.boxShadow="none"}})]}),(0,o.jsxs)("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end",marginTop:"8px"},children:[(0,o.jsx)("button",{type:"button",onClick:ec,style:{padding:"12px 24px",background:"#fff",color:"#5A5A5A",border:"2px solid ".concat(et),borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{e.currentTarget.style.background=et},onMouseLeave:e=>{e.currentTarget.style.background="#fff"},children:"取消"}),(0,o.jsx)("button",{type:"submit",disabled:A,style:{padding:"12px 24px",background:A?"#ccc":Q,color:"#fff",border:"none",borderRadius:eo,fontWeight:600,fontSize:"15px",cursor:A?"not-allowed":"pointer",transition:"all 0.3s ease"},onMouseEnter:e=>{A||(e.currentTarget.style.background=V,e.currentTarget.style.transform="translateY(-1px)")},onMouseLeave:e=>{A||(e.currentTarget.style.background=Q,e.currentTarget.style.transform="translateY(0)")},children:A?"保存中...":"\uD83D\uDCBE 保存更改"})]})]})]})})]})]})}},9008:function(e,t,r){e.exports=r(7219)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=7318)}),_N_E=e.O()}]);