(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[964],{4730:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin",function(){return s(7082)}])},2762:function(e,t,s){"use strict";var a=s(3454);s(1479);var r=s(7294),o=r&&"object"==typeof r&&"default"in r?r:{default:r},i=void 0!==a&&a.env&&!0,l=function(e){return"[object String]"===Object.prototype.toString.call(e)},n=function(){function e(e){var t=void 0===e?{}:e,s=t.name,a=void 0===s?"stylesheet":s,r=t.optimizeForSpeed,o=void 0===r?i:r;d(l(a),"`name` must be a string"),this._name=a,this._deletedRulePlaceholder="#"+a+"-deleted-rule____{}",d("boolean"==typeof o,"`optimizeForSpeed` must be a boolean"),this._optimizeForSpeed=o,this._serverSheet=void 0,this._tags=[],this._injected=!1,this._rulesCount=0;var n=document.querySelector('meta[property="csp-nonce"]');this._nonce=n?n.getAttribute("content"):null}var t=e.prototype;return t.setOptimizeForSpeed=function(e){d("boolean"==typeof e,"`setOptimizeForSpeed` accepts a boolean"),d(0===this._rulesCount,"optimizeForSpeed cannot be when rules have already been inserted"),this.flush(),this._optimizeForSpeed=e,this.inject()},t.isOptimizeForSpeed=function(){return this._optimizeForSpeed},t.inject=function(){var e=this;if(d(!this._injected,"sheet already injected"),this._injected=!0,this._optimizeForSpeed){this._tags[0]=this.makeStyleTag(this._name),this._optimizeForSpeed="insertRule"in this.getSheet(),this._optimizeForSpeed||(i||console.warn("StyleSheet: optimizeForSpeed mode not supported falling back to standard mode."),this.flush(),this._injected=!0);return}this._serverSheet={cssRules:[],insertRule:function(t,s){return"number"==typeof s?e._serverSheet.cssRules[s]={cssText:t}:e._serverSheet.cssRules.push({cssText:t}),s},deleteRule:function(t){e._serverSheet.cssRules[t]=null}}},t.getSheetForTag=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]},t.getSheet=function(){return this.getSheetForTag(this._tags[this._tags.length-1])},t.insertRule=function(e,t){if(d(l(e),"`insertRule` accepts only strings"),this._optimizeForSpeed){var s=this.getSheet();"number"!=typeof t&&(t=s.cssRules.length);try{s.insertRule(e,t)}catch(t){return i||console.warn("StyleSheet: illegal rule: \n\n"+e+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),-1}}else{var a=this._tags[t];this._tags.push(this.makeStyleTag(this._name,e,a))}return this._rulesCount++},t.replaceRule=function(e,t){if(this._optimizeForSpeed){var s=this.getSheet();if(t.trim()||(t=this._deletedRulePlaceholder),!s.cssRules[e])return e;s.deleteRule(e);try{s.insertRule(t,e)}catch(a){i||console.warn("StyleSheet: illegal rule: \n\n"+t+"\n\nSee https://stackoverflow.com/q/20007992 for more info"),s.insertRule(this._deletedRulePlaceholder,e)}}else{var a=this._tags[e];d(a,"old rule at index `"+e+"` not found"),a.textContent=t}return e},t.deleteRule=function(e){if(this._optimizeForSpeed)this.replaceRule(e,"");else{var t=this._tags[e];d(t,"rule at index `"+e+"` not found"),t.parentNode.removeChild(t),this._tags[e]=null}},t.flush=function(){this._injected=!1,this._rulesCount=0,this._tags.forEach(function(e){return e&&e.parentNode.removeChild(e)}),this._tags=[]},t.cssRules=function(){var e=this;return this._tags.reduce(function(t,s){return s?t=t.concat(Array.prototype.map.call(e.getSheetForTag(s).cssRules,function(t){return t.cssText===e._deletedRulePlaceholder?null:t})):t.push(null),t},[])},t.makeStyleTag=function(e,t,s){t&&d(l(t),"makeStyleTag accepts only strings as second parameter");var a=document.createElement("style");this._nonce&&a.setAttribute("nonce",this._nonce),a.type="text/css",a.setAttribute("data-"+e,""),t&&a.appendChild(document.createTextNode(t));var r=document.head||document.getElementsByTagName("head")[0];return s?r.insertBefore(a,s):r.appendChild(a),a},function(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}(e.prototype,[{key:"length",get:function(){return this._rulesCount}}]),e}();function d(e,t){if(!e)throw Error("StyleSheet: "+t+".")}var c=function(e){for(var t=5381,s=e.length;s;)t=33*t^e.charCodeAt(--s);return t>>>0},f={};function m(e,t){if(!t)return"jsx-"+e;var s=String(t),a=e+s;return f[a]||(f[a]="jsx-"+c(e+"-"+s)),f[a]}function p(e,t){var s=e+t;return f[s]||(f[s]=t.replace(/__jsx-style-dynamic-selector/g,e)),f[s]}var u=function(){function e(e){var t=void 0===e?{}:e,s=t.styleSheet,a=void 0===s?null:s,r=t.optimizeForSpeed,o=void 0!==r&&r;this._sheet=a||new n({name:"styled-jsx",optimizeForSpeed:o}),this._sheet.inject(),a&&"boolean"==typeof o&&(this._sheet.setOptimizeForSpeed(o),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer=void 0,this._indices={},this._instancesCounts={}}var t=e.prototype;return t.add=function(e){var t=this;void 0===this._optimizeForSpeed&&(this._optimizeForSpeed=Array.isArray(e.children),this._sheet.setOptimizeForSpeed(this._optimizeForSpeed),this._optimizeForSpeed=this._sheet.isOptimizeForSpeed()),this._fromServer||(this._fromServer=this.selectFromServer(),this._instancesCounts=Object.keys(this._fromServer).reduce(function(e,t){return e[t]=0,e},{}));var s=this.getIdAndRules(e),a=s.styleId,r=s.rules;if(a in this._instancesCounts){this._instancesCounts[a]+=1;return}var o=r.map(function(e){return t._sheet.insertRule(e)}).filter(function(e){return -1!==e});this._indices[a]=o,this._instancesCounts[a]=1},t.remove=function(e){var t=this,s=this.getIdAndRules(e).styleId;if(function(e,t){if(!e)throw Error("StyleSheetRegistry: "+t+".")}(s in this._instancesCounts,"styleId: `"+s+"` not found"),this._instancesCounts[s]-=1,this._instancesCounts[s]<1){var a=this._fromServer&&this._fromServer[s];a?(a.parentNode.removeChild(a),delete this._fromServer[s]):(this._indices[s].forEach(function(e){return t._sheet.deleteRule(e)}),delete this._indices[s]),delete this._instancesCounts[s]}},t.update=function(e,t){this.add(t),this.remove(e)},t.flush=function(){this._sheet.flush(),this._sheet.inject(),this._fromServer=void 0,this._indices={},this._instancesCounts={}},t.cssRules=function(){var e=this,t=this._fromServer?Object.keys(this._fromServer).map(function(t){return[t,e._fromServer[t]]}):[],s=this._sheet.cssRules();return t.concat(Object.keys(this._indices).map(function(t){return[t,e._indices[t].map(function(e){return s[e].cssText}).join(e._optimizeForSpeed?"":"\n")]}).filter(function(e){return!!e[1]}))},t.styles=function(e){var t,s;return t=this.cssRules(),void 0===(s=e)&&(s={}),t.map(function(e){var t=e[0],a=e[1];return o.default.createElement("style",{id:"__"+t,key:"__"+t,nonce:s.nonce?s.nonce:void 0,dangerouslySetInnerHTML:{__html:a}})})},t.getIdAndRules=function(e){var t=e.children,s=e.dynamic,a=e.id;if(s){var r=m(a,s);return{styleId:r,rules:Array.isArray(t)?t.map(function(e){return p(r,e)}):[p(r,t)]}}return{styleId:m(a),rules:Array.isArray(t)?t:[t]}},t.selectFromServer=function(){return Array.prototype.slice.call(document.querySelectorAll('[id^="__jsx-"]')).reduce(function(e,t){return e[t.id.slice(2)]=t,e},{})},e}(),x=r.createContext(null);x.displayName="StyleSheetContext";var h=o.default.useInsertionEffect||o.default.useLayoutEffect,g=new u;function y(e){var t=g||r.useContext(x);return t&&h(function(){return t.add(e),function(){t.remove(e)}},[e.id,String(e.dynamic)]),null}y.dynamic=function(e){return e.map(function(e){return m(e[0],e[1])}).join(" ")},t.style=y},3591:function(e,t,s){"use strict";e.exports=s(2762).style},7082:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(5893),r=s(3591),o=s.n(r),i=s(7294),l=s(1664),n=s.n(l),d=s(9008),c=s.n(d),f=s(1163);function m(){let e=(0,f.useRouter)(),[t,s]=(0,i.useState)(!1),[r,l]=(0,i.useState)(!0),[d,m]=(0,i.useState)([]),[p,u]=(0,i.useState)([]),[x,h]=(0,i.useState)({heroImage:"",logo:""}),[g,y]=(0,i.useState)(""),[j,b]=(0,i.useState)(""),[v,w]=(0,i.useState)({}),[S,N]=(0,i.useState)(!1),[C,k]=(0,i.useState)(null),[_,z]=(0,i.useState)(""),[R,D]=(0,i.useState)(""),[B,T]=(0,i.useState)("hero-carousel"),[F,I]=(0,i.useState)(""),[W,A]=(0,i.useState)(""),[P,E]=(0,i.useState)({oldPassword:"",newPassword:"",confirmPassword:""}),[O,U]=(0,i.useState)(!1),[M,L]=(0,i.useState)(""),[H,q]=(0,i.useState)(""),[J,Y]=(0,i.useState)([]),[X,K]=(0,i.useState)(""),[Z,G]=(0,i.useState)(null),[Q,V]=(0,i.useState)(""),[$,ee]=(0,i.useState)(!1),[et,es]=(0,i.useState)(!1),[ea,er]=(0,i.useState)(null),[eo,ei]=(0,i.useState)([{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""}]),[el,en]=(0,i.useState)([!1,!1,!1]),[ed,ec]=(0,i.useState)(["","",""]),[ef,em]=(0,i.useState)([!1,!1,!1]),[ep,eu]=(0,i.useState)([{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""},{imageUrl:"",title:"",subtitle:"",link:""}]),[ex,eh]=(0,i.useState)([!1,!1,!1]),[eg,ey]=(0,i.useState)(["","",""]),[ej,eb]=(0,i.useState)([!1,!1,!1]),[ev,ew]=(0,i.useState)(!1),[eS,eN]=(0,i.useState)(null),[eC,ek]=(0,i.useState)({title:"",scientific_name:"",toxicity_level:"Safe",care_difficulty:"Easy",summary:"",image:"",symptoms:[],what_to_do:"",aspca_link:"",care_tips:"",water_needs:"",light_needs:"",temperature:"",pet_moment:""}),[e_,ez]=(0,i.useState)(!1),[eR,eD]=(0,i.useState)(""),[eB,eT]=(0,i.useState)(""),[eF,eI]=(0,i.useState)("Safe"),[eW,eA]=(0,i.useState)("Easy"),[eP,eE]=(0,i.useState)(""),[eO,eU]=(0,i.useState)(""),[eM,eL]=(0,i.useState)(""),[eH,eq]=(0,i.useState)(!1),[eJ,eY]=(0,i.useState)(null),[eX,eK]=(0,i.useState)(""),[eZ,eG]=(0,i.useState)(!1),[eQ,eV]=(0,i.useState)(!1),[e$,e0]=(0,i.useState)(""),[e5,e1]=(0,i.useState)(null),[e6,e7]=(0,i.useState)(""),[e4,e3]=(0,i.useState)(!1),[e2,e8]=(0,i.useState)(!1),[e9,te]=(0,i.useState)(""),[tt,ts]=(0,i.useState)([]),[ta,tr]=(0,i.useState)(!1),[to,ti]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=()=>{ti(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let tl="#87A96B",tn="#6B8553",td="#FAF7F2",tc="#F5F1E8",tf="24px",tm="16px";(0,i.useEffect)(()=>{(async()=>{let t=localStorage.getItem("adminToken");if(t)try{let a=await fetch("/api/login",{headers:{Authorization:"Bearer ".concat(t)}}),r=await a.json();"Token is valid"===r.message?s(!0):(localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),e.push("/login"))}catch(t){localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),e.push("/login")}else e.push("/login");l(!1)})()},[e]),(0,i.useEffect)(()=>{(async()=>{try{let[e,t,s,a,r]=await Promise.all([fetch("/api/list-images"),fetch("/api/site-config"),fetch("/api/plants"),fetch("/api/hero-carousel-db"),fetch("/api/ultimate-hero")]),o=await e.json(),i=await t.json(),l=await s.json(),n=await a.json(),d=await r.json();if(m(o.paths||[]),h(i||{heroImage:""}),y((i||{}).heroImage||""),b((i||{}).logo||""),u(l.plants||[]),n.slides&&Array.isArray(n.slides)){ei(n.slides);let e=n.slides.map(e=>e.imageUrl||"");ec(e)}if(d.slides&&Array.isArray(d.slides)){eu(d.slides);let e=d.slides.map(e=>e.imageUrl||"");ey(e)}}catch(e){console.error("Load error:",e)}})(),tT()},[]);let tp=async e=>{if(e){N(!0);try{if(console.log("Uploading file:",e.name,"Size:",e.size,"Type:",e.type),e&&e.size>52428800){D("文件大小不能超过50MB，请选择较小的图片"),setTimeout(()=>D(""),3e3);let e=document.getElementById("file-upload");e&&(e.value=""),k(null),z("");return}let t=new FormData;t.append("file",e),t.append("filename",e.name.replace(/[^a-zA-Z0-9._-]/g,"_"));let s=await fetch("/api/upload-chunked",{method:"POST",body:t});if(console.log("Upload response status:",s.status),s.ok){let t=await s.json();if(console.log("Upload response:",t),t.success){let s=X||e.name;await tF(t.data.publicUrl,s,e.size,e.type);let a=await (await fetch("/api/list-images")).json();m(a.paths||[]),k(null),z(""),K(""),D("图片上传成功！")}else D("上传失败: ".concat(t.error||"未知错误")),setTimeout(()=>D(""),3e3);return setTimeout(()=>D(""),3e3),(null==t?void 0:t.path)||""}{let e=await s.text();console.error("Upload failed:",s.status,e),D("上传失败: "+e),setTimeout(()=>D(""),3e3)}}catch(e){console.error("Upload error:",e),D("上传失败: "+e.message),setTimeout(()=>D(""),3e3)}finally{N(!1)}}},tu=(e,t)=>{if(!e)return t.name;let s=t.name.split(".").pop(),a=e.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-");return"".concat(a,".").concat(s)},tx=async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e)return;if(e.size>10485760){D("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>D(""),3e3);return}let s=tu(t?eC.title:eR,e);t?e3(!0):eG(!0);try{let a=new FileReader;a.onload=async()=>{let e=a.result,r=await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:s,data:String(e||"")})});if(r.ok){let e=await r.json(),s=(null==e?void 0:e.path)||"";t?(ek({...eC,image:s}),e3(!1)):(eU(s),eG(!1));let a=await (await fetch("/api/list-images")).json();m(a.paths||[])}else t?e3(!1):eG(!1)},a.readAsDataURL(e)}catch(e){t?e3(!1):eG(!1)}},th=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t){e1(e);let t=new FileReader;t.onload=e=>e7(e.target.result),t.readAsDataURL(e)}else{eY(e);let t=new FileReader;t.onload=e=>eK(e.target.result),t.readAsDataURL(e)}},tg=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t?(te(e),ek({...eC,image:e}),e7(e),e8(!1)):(e0(e),eU(e),eK(e),eV(!1))},ty=e=>{ek({...eC,pet_moment:e}),tr(!1)},tj=async(e,t)=>{if(!e)return;if(e.size>10485760){D("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>D(""),3e3);return}let s=[...el];s[t]=!0,en(s);try{let s=new FileReader;s.onloadend=async()=>{let e=s.result.split(",")[1],a="hero-".concat(t+1,"-").concat(Date.now(),".jpg");if((await fetch("/api/upload-base64",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filename:a,base64:e})})).ok){let e="/uploads/".concat(a),s=[...eo];s[t].imageUrl=e,ei(s);let r=[...ed];r[t]=e,ec(r)}},s.readAsDataURL(e)}catch(e){console.error("Hero image upload error:",e)}finally{let e=[...el];e[t]=!1,en(e)}},tb=(e,t)=>{console.log("Hero media select:",{imagePath:e,index:t});let s=[...eo];s[t].imageUrl=e,ei(s),console.log("Updated hero slides:",s);let a=[...ed];a[t]=e,ec(a),console.log("Updated hero previews:",a);let r=[...ef];r[t]=!1,em(r)},tv=(e,t)=>{let s=[...eo];s[t].link=e,ei(s)},tw=(e,t)=>{let s=[...eo];s[t].title=e,ei(s)},tS=(e,t)=>{let s=[...eo];s[t].subtitle=e,ei(s)},tN=async()=>{try{console.log("Saving hero carousel:",eo);let e=new AbortController,t=setTimeout(()=>e.abort(),3e4),s=await fetch("/api/hero-carousel-db",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slides:eo}),signal:e.signal});if(clearTimeout(t),console.log("Save response status:",s.status),s.ok){let e=await s.json();console.log("Save response:",e),D("首页轮播图保存成功！"),setTimeout(()=>D(""),3e3)}else{let e=await s.text();console.error("Save failed:",s.status,e),D("保存失败: "+e),setTimeout(()=>D(""),5e3)}}catch(e){console.error("Save hero carousel error:",e),"AbortError"===e.name?D("保存超时，请重试"):D("保存失败: "+e.message),setTimeout(()=>D(""),5e3)}},tC=async e=>{try{await navigator.clipboard.writeText(e),I(e),setTimeout(()=>I(""),2e3)}catch(e){D("复制失败")}},tk=e=>{eN(e),ek({title:e.title||"",scientific_name:e.scientific_name||"",toxicity_level:e.toxicity_level||"Safe",care_difficulty:e.care_difficulty||"Easy",summary:e.summary||"",image:e.image||"",symptoms:e.symptoms||[],what_to_do:e.what_to_do||"",aspca_link:e.aspca_link||"",care_tips:e.care_tips||"",water_needs:e.water_needs||"",light_needs:e.light_needs||"",temperature:e.temperature||"",pet_moment:e.pet_moment||""}),e.image?e7(e.image):e7(""),ew(!0)},t_=async e=>{e.preventDefault(),ez(!0);try{if((await fetch("/api/update-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:eS.slug,...eC})})).ok){let e=await (await fetch("/api/plants")).json();u(e.plants||[]),ew(!1),D("植物信息更新成功！"),setTimeout(()=>D(""),3e3)}}catch(e){D("更新失败")}finally{ez(!1)}},tz=async e=>{if(confirm("确定要删除这个植物吗？"))try{if((await fetch("/api/delete-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({slug:e})})).ok){let e=await (await fetch("/api/plants")).json();u(e.plants||[]),D("植物删除成功！"),setTimeout(()=>D(""),3e3)}}catch(e){D("删除失败")}},tR=async e=>{e.preventDefault(),eq(!0);try{if((await fetch("/api/save-plant",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:eR,scientific_name:eB,toxicity_level:eF,care_difficulty:eW,summary:eP,image:eO})})).ok){let e=await (await fetch("/api/plants")).json();u(e.plants||[]),eD(""),eT(""),eI("Safe"),eA("Easy"),eE(""),eU(""),eL("植物添加成功！"),setTimeout(()=>eL(""),3e3)}}catch(e){eL("添加失败")}finally{eq(!1)}},tD=p.filter(e=>{var t,s;return(null===(t=e.title)||void 0===t?void 0:t.toLowerCase().includes(W.toLowerCase()))||(null===(s=e.scientific_name)||void 0===s?void 0:s.toLowerCase().includes(W.toLowerCase()))}),tB=async t=>{if(t.preventDefault(),L(""),q(""),!P.oldPassword||!P.newPassword||!P.confirmPassword){L("请填写所有字段");return}if(P.newPassword.length<6){L("新密码至少需要 6 位字符");return}if(P.newPassword!==P.confirmPassword){L("新密码与确认密码不匹配");return}U(!0);try{let t=await fetch("/api/admin/change-password",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("adminToken"))},body:JSON.stringify({oldPassword:P.oldPassword,newPassword:P.newPassword})}),s=await t.json();t.ok?(q("密码修改成功！即将退出登录..."),E({oldPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{localStorage.removeItem("adminToken"),localStorage.removeItem("adminUser"),e.push("/login")},2e3)):L(s.error||"密码修改失败")}catch(e){L("网络错误，请重试")}finally{U(!1)}},tT=async()=>{ee(!0);try{let e=await fetch("/api/media"),t=await e.json();e.ok&&(Y(t.media||[]),setTimeout(()=>{tA()},1e3))}catch(e){console.error("Failed to load media metadata:",e)}finally{ee(!1)}},tF=async(e,t,s,a)=>{try{(await fetch("/api/media",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:e,display_name:t,file_size:s,file_type:a})})).ok&&(await tT(),er({type:"success",message:"Metadata created: ".concat(t)}),setTimeout(()=>er(null),2e3))}catch(e){console.error("Failed to save media metadata:",e),er({type:"error",message:"Failed to create metadata: ".concat(t)}),setTimeout(()=>er(null),2e3)}},tI=async(e,t)=>{if(!e){console.error("No metadata ID provided for:",t),er({type:"error",message:"Cannot rename: image metadata missing"});return}if(!t||0===t.trim().length){console.error("Empty display name provided"),er({type:"error",message:"Display name cannot be empty"});return}es(!0),console.log("\uD83D\uDD04 Starting rename operation:",{id:e,displayName:t});try{let s=await fetch("/api/media/rename",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fileId:e,displayName:t.trim()})}),a=await s.json();s.ok?(Y(s=>s.map(s=>s.id===e?{...s,display_name:t.trim()}:s)),er({type:"success",message:"Rename successful"}),G(null),V(""),setTimeout(()=>er(null),3e3),console.log("✅ Media renamed successfully:",a.media)):(er({type:"error",message:"".concat(a.error||"Save failed, please check network or permissions")}),console.error("❌ Rename failed:",a))}catch(e){console.error("Network error during rename:",e),er({type:"error",message:"Save failed, please check network or permissions"})}finally{es(!1)}},tW=e=>{let t=J.find(t=>t.file_path===e);return(null==t?void 0:t.display_name)||e.split("/").pop()},tA=async()=>{if(!d||0===d.length){console.log("\uD83D\uDCDD No images to process");return}let e=d.filter(e=>!J.some(t=>t.file_path===e));if(e.length>0){for(let t of(console.log("\uD83D\uDCDD Auto-creating metadata for",e.length,"missing images"),e))try{await tF(t,t.split("/").pop(),0,"image/unknown"),console.log("✅ Created metadata for:",t)}catch(e){console.error("❌ Failed to create metadata for:",t,e)}setTimeout(()=>{tT()},500)}else console.log("✅ All images have metadata")};return(0,a.jsxs)("div",{style:{minHeight:"100vh",backgroundColor:td,fontFamily:"system-ui, -apple-system, sans-serif"},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)(c(),{children:[(0,a.jsx)("title",{className:"jsx-4754611355ff0f67",children:"管理后台 - PawSafePlants"}),(0,a.jsx)("meta",{name:"description",content:"PawSafePlants 管理后台",className:"jsx-4754611355ff0f67"})]}),ea&&(0,a.jsx)("div",{style:{position:"fixed",top:"20px",right:"20px",zIndex:9999,padding:"1rem 1.5rem",borderRadius:"8px",fontSize:"0.9rem",fontWeight:"500",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",backgroundColor:"success"===ea.type?"#d4edda":"#f8d7da",color:"success"===ea.type?"#155724":"#721c24",border:"1px solid ".concat("success"===ea.type?"#c3e6cb":"#f5c6cb"),animation:"slideInRight 0.3s ease",maxWidth:"300px"},className:"jsx-4754611355ff0f67",children:ea.message}),r&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(255, 255, 255, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{textAlign:"center",padding:"2rem",backgroundColor:"white",borderRadius:"24px",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.1)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{width:"60px",height:"60px",backgroundColor:tl,borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 1rem",fontSize:"2rem",color:"white",animation:"spin 1s linear infinite"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDF3F"}),(0,a.jsx)("h2",{style:{color:tl,margin:"0 0 0.5rem 0"},className:"jsx-4754611355ff0f67",children:"验证中..."}),(0,a.jsx)("p",{style:{color:"#666",margin:0},className:"jsx-4754611355ff0f67",children:"正在验证登录状态"})]})}),(0,a.jsxs)("div",{style:{backgroundColor:tl,color:"white",padding:"1.5rem 2rem",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",display:"flex",justifyContent:"space-between",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h1",{style:{margin:0,fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDF3F PawSafePlants 管理后台"}),(0,a.jsx)(n(),{href:"/",style:{color:"white",textDecoration:"none",padding:"0.5rem 1rem",borderRadius:"8px",backgroundColor:"rgba(255,255,255,0.2)"},children:"返回首页"})]}),(0,a.jsxs)("div",{style:{display:to?"block":"flex",minHeight:"calc(100vh - 80px)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{width:to?"100%":"260px",backgroundColor:"white",boxShadow:to?"none":"4px 0 12px rgba(0,0,0,0.08)",padding:to?"1rem":"2rem 0",borderBottom:to?"1px solid ".concat(tc):"none"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("nav",{style:{padding:"0 1rem"},className:"jsx-4754611355ff0f67",children:[{id:"hero-carousel",label:"首页轮播图",icon:"\uD83C\uDFA0"},{id:"add-plant",label:"添加植物",icon:"\uD83C\uDF31"},{id:"plant-list",label:"植物列表",icon:"\uD83D\uDCCB"},{id:"media-library",label:"媒体库",icon:"\uD83D\uDDBC️"},{id:"atmosphere",label:"氛围图管理",icon:"\uD83C\uDF38"},{id:"security",label:"安全设置",icon:"\uD83D\uDD12"}].map(e=>(0,a.jsxs)("button",{onClick:()=>T(e.id),style:{width:"100%",padding:"1rem",marginBottom:"0.5rem",border:"none",borderRadius:tm,backgroundColor:B===e.id?tl:"transparent",color:B===e.id?"white":"#333",cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1rem",fontWeight:"500",transition:"all 0.3s ease",boxShadow:B===e.id?"0 4px 12px rgba(135, 169, 107, 0.3)":"none"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("span",{style:{fontSize:"1.25rem"},className:"jsx-4754611355ff0f67",children:e.icon}),e.label]},e.id))})}),(0,a.jsxs)("div",{style:{flex:1,padding:to?"1rem":"2rem",overflowY:"auto",width:to?"100%":"auto"},className:"jsx-4754611355ff0f67",children:[R&&(0,a.jsx)("div",{style:{padding:"1rem",marginBottom:"1.5rem",borderRadius:tm,backgroundColor:tl,color:"white",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",animation:"slideIn 0.3s ease"},className:"jsx-4754611355ff0f67",children:R}),"hero-carousel"===B&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",boxShadow:"0 4px 16px rgba(0,0,0,0.08)",minHeight:"600px"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:tn,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83C\uDFA0 首页轮播图管理"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:to?"1fr":"repeat(auto-fit, minmax(350px, 1fr))",gap:to?"1rem":"2rem",alignItems:"start"},className:"jsx-4754611355ff0f67",children:eo.map((e,t)=>(0,a.jsxs)("div",{style:{border:"2px solid ".concat(tc),borderRadius:tm,padding:"1.5rem",backgroundColor:td},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("h3",{style:{fontSize:"1.1rem",fontWeight:"600",color:tn,marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:["轮播图 ",t+1]}),(0,a.jsx)("div",{style:{width:"100%",height:to?"150px":"200px",borderRadius:tm,border:"2px dashed ".concat(tl),display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"1rem",overflow:"hidden",backgroundColor:"#fff"},className:"jsx-4754611355ff0f67",children:ed[t]?(0,a.jsx)("img",{src:ed[t],alt:"轮播图 ".concat(t+1),style:{width:"100%",height:"100%",objectFit:"cover"},className:"jsx-4754611355ff0f67"}):(0,a.jsxs)("div",{style:{textAlign:"center",color:"#666"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{fontSize:"3rem",marginBottom:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️"}),(0,a.jsx)("p",{className:"jsx-4754611355ff0f67",children:"暂无图片"})]})}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{let s=e.target.files[0];s&&tj(s,t)},style:{display:"none"},id:"hero-upload-".concat(t),className:"jsx-4754611355ff0f67"}),(0,a.jsx)("label",{htmlFor:"hero-upload-".concat(t),style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1rem":"0.75rem 1rem",backgroundColor:el[t]?"#ccc":tl,color:"white",borderRadius:tm,cursor:el[t]?"not-allowed":"pointer",fontSize:to?"1rem":"0.9rem",textAlign:"center",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:el[t]?"上传中...":"\uD83D\uDCC1 选择图片 (最大50MB)"})]}),(0,a.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("button",{onClick:()=>{let e=[...ef];e[t]=!0,em(e)},style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1rem":"0.75rem 1rem",backgroundColor:td,color:tn,border:"2px solid ".concat(tl),borderRadius:tm,cursor:"pointer",fontSize:to?"1rem":"0.9rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 从媒体库选择"})}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"跳转链接（可选）"}),(0,a.jsx)("input",{type:"text",value:e.link,onChange:e=>tv(e.target.value,t),placeholder:"例如：/plants/spider-plant",style:{width:"100%",padding:"0.75rem",border:"2px solid ".concat(tc),borderRadius:tm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"标题"}),(0,a.jsx)("input",{type:"text",value:e.title,onChange:e=>tw(e.target.value,t),placeholder:"例如：Cat-Safe Plants",style:{width:"100%",padding:"0.75rem",border:"2px solid ".concat(tc),borderRadius:tm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"副标题"}),(0,a.jsx)("input",{type:"text",value:e.subtitle,onChange:e=>tS(e.target.value,t),placeholder:"例如：Create a beautiful, pet-friendly living space",style:{width:"100%",padding:"0.75rem",border:"2px solid ".concat(tc),borderRadius:tm,fontSize:"0.9rem"},className:"jsx-4754611355ff0f67"})]})]},"hero-slide-".concat(t)))}),(0,a.jsx)("div",{style:{marginTop:"2rem",textAlign:"center"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("button",{onClick:tN,style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1.2rem 2rem":"1rem 2rem",backgroundColor:tl,color:"white",border:"none",borderRadius:tm,fontSize:to?"1.1rem":"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},onMouseOver:e=>{e.currentTarget.style.backgroundColor=tn},onMouseOut:e=>{e.currentTarget.style.backgroundColor=tl},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCBE 保存轮播图设置"})}),ef.map((e,t)=>e&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:()=>{let e=[...ef];e[t]=!1,em(e)},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:to?"1rem":"2rem",width:to?"95%":"90%",maxWidth:to?"none":"900px",maxHeight:to?"95vh":"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},onClick:e=>e.stopPropagation(),className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("h3",{style:{color:tl,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:["\uD83D\uDCC1 选择轮播图 ",t+1]}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:to?"repeat(auto-fill, minmax(100px, 1fr))":"repeat(auto-fill, minmax(150px, 1fr))",gap:to?"0.5rem":"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:d.filter(e=>(console.log("Filtering hero image:",e),e&&(e.includes("/uploads/")||e.includes("/storage/")))).map((e,s)=>(0,a.jsxs)("div",{onClick:()=>tb(e,t),style:{cursor:"pointer",borderRadius:tm,overflow:"hidden",border:ed[t]===e?"3px solid ".concat(tl):"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e,alt:"媒体图片 ".concat(s+1),style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("div",{style:{padding:"0.5rem",backgroundColor:td,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},s))}),(0,a.jsx)("button",{onClick:()=>{let e=[...ef];e[t]=!1,em(e)},style:{padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})]})},"hero-modal-".concat(t)))]}),"add-plant"===B&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:to?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h2",{style:{color:tl,marginBottom:"2rem",fontSize:to?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"添加新植物"}),(0,a.jsxs)("form",{onSubmit:tR,style:{display:"grid",gap:"1.5rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"植物名称"}),(0,a.jsx)("input",{type:"text",value:eR,onChange:e=>eD(e.target.value),required:!0,style:{width:"100%",padding:to?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"拉丁学名"}),(0,a.jsx)("input",{type:"text",value:eB,onChange:e=>eT(e.target.value),required:!0,style:{width:"100%",padding:to?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"安全性"}),(0,a.jsxs)("select",{value:eF,onChange:e=>eI(e.target.value),style:{width:"100%",padding:to?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("option",{value:"Safe",className:"jsx-4754611355ff0f67",children:"安全 (Safe)"}),(0,a.jsx)("option",{value:"Caution",className:"jsx-4754611355ff0f67",children:"注意 (Caution)"}),(0,a.jsx)("option",{value:"Toxic",className:"jsx-4754611355ff0f67",children:"有毒 (Toxic)"})]})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"养育难度"}),(0,a.jsxs)("select",{value:eW,onChange:e=>eA(e.target.value),style:{width:"100%",padding:to?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("option",{value:"Easy",className:"jsx-4754611355ff0f67",children:"简单 (Easy)"}),(0,a.jsx)("option",{value:"Moderate",className:"jsx-4754611355ff0f67",children:"中等 (Moderate)"}),(0,a.jsx)("option",{value:"Difficult",className:"jsx-4754611355ff0f67",children:"困难 (Difficult)"})]})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"详细描述"}),(0,a.jsx)("textarea",{value:eP,onChange:e=>eE(e.target.value),rows:to?6:4,style:{width:"100%",padding:to?"1rem":"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",resize:"vertical",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333",fontSize:to?"0.9rem":"1rem"},className:"jsx-4754611355ff0f67",children:"植物图片"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(eX||eO)&&(0,a.jsxs)("div",{style:{position:"relative"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:eX||eO,alt:"植物图片预览",style:{width:to?"150px":"200px",height:to?"150px":"200px",objectFit:"cover",borderRadius:tm,border:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67"}),eO&&(0,a.jsx)("div",{style:{position:"absolute",bottom:"8px",left:"8px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"0.75rem"},className:"jsx-4754611355ff0f67",children:eO})]}),(0,a.jsxs)("div",{style:{display:"grid",gap:to?"0.75rem":"1rem",gridTemplateColumns:to?"1fr":"auto auto"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&th(s,!1)},style:{display:"none"},id:"plant-image-upload",className:"jsx-4754611355ff0f67"}),(0,a.jsx)("label",{htmlFor:"plant-image-upload",style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1rem":"0.75rem 1.5rem",backgroundColor:tl,color:"white",borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",textAlign:"center",fontSize:to?"1rem":"0.9rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCC1 本地上传"}),(0,a.jsx)("button",{type:"button",onClick:()=>eV(!0),style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1rem":"0.75rem 1.5rem",backgroundColor:td,color:tn,border:"2px solid ".concat(tl),borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",textAlign:"center",fontSize:to?"1rem":"0.9rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 媒体库"})]}),eJ&&(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("button",{type:"button",onClick:()=>tx(eJ,!1),disabled:eZ||!eR,style:{padding:"0.75rem 1.5rem",backgroundColor:eZ||!eR?"#ccc":tl,color:"white",border:"none",borderRadius:tm,cursor:eZ||!eR?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:eZ?"上传中...":"上传为 ".concat(eR?tu(eR,eJ):"请先填写植物名称")}),(0,a.jsxs)("span",{style:{fontSize:"0.875rem",color:"#666"},className:"jsx-4754611355ff0f67",children:["文件: ",eJ.name]})]}),(0,a.jsx)("input",{type:"hidden",value:eO,onChange:e=>eU(e.target.value),className:"jsx-4754611355ff0f67"})]})]}),eM&&(0,a.jsx)("div",{style:{padding:"0.75rem",borderRadius:tm,backgroundColor:tl,color:"white",textAlign:"center"},className:"jsx-4754611355ff0f67",children:eM}),(0,a.jsx)("button",{type:"submit",disabled:eH,style:{display:to?"block":"inline-block",width:to?"100%":"auto",padding:to?"1.2rem 2rem":"1rem 2rem",backgroundColor:tl,color:"white",border:"none",borderRadius:tm,fontSize:to?"1.1rem":"1rem",fontWeight:"500",cursor:eH?"not-allowed":"pointer",opacity:eH?.7:1,transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},className:"jsx-4754611355ff0f67",children:eH?"保存中...":"保存植物信息"})]})]}),"plant-list"===B&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:to?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h2",{style:{color:tl,marginBottom:"2rem",fontSize:to?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"植物列表"}),(0,a.jsx)("div",{style:{marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("input",{type:"text",placeholder:"搜索植物名称或拉丁学名...",value:W,onChange:e=>A(e.target.value),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"border-color 0.3s ease"},className:"jsx-4754611355ff0f67"})}),(0,a.jsx)("div",{style:{overflowX:"auto"},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("thead",{className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("tr",{style:{backgroundColor:tc},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"预览"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"名称"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"拉丁名"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"安全等级"}),(0,a.jsx)("th",{style:{padding:"1rem",textAlign:"left",borderBottom:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67",children:"操作"})]})}),(0,a.jsx)("tbody",{className:"jsx-4754611355ff0f67",children:tD.map(e=>(0,a.jsxs)("tr",{style:{borderBottom:"1px solid #e0e0e0",transition:"background-color 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:e.image&&(0,a.jsx)("img",{src:e.image,alt:e.title,style:{width:"60px",height:"60px",objectFit:"cover",borderRadius:"8px"},className:"jsx-4754611355ff0f67"})}),(0,a.jsx)("td",{style:{padding:"1rem",fontWeight:"500"},className:"jsx-4754611355ff0f67",children:e.title}),(0,a.jsx)("td",{style:{padding:"1rem",fontStyle:"italic",color:"#666"},className:"jsx-4754611355ff0f67",children:e.scientific_name}),(0,a.jsx)("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("span",{style:{padding:"0.25rem 0.75rem",borderRadius:"12px",fontSize:"0.875rem",fontWeight:"500",backgroundColor:"Safe"===e.toxicity_level?"#d4edda":"Caution"===e.toxicity_level?"#fff3cd":"#f8d7da",color:"Safe"===e.toxicity_level?"#155724":"Caution"===e.toxicity_level?"#856404":"#721c24"},className:"jsx-4754611355ff0f67",children:"Safe"===e.toxicity_level?"安全":"Caution"===e.toxicity_level?"注意":"有毒"})}),(0,a.jsx)("td",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("button",{onClick:()=>tk(e),style:{padding:"0.5rem 1rem",backgroundColor:tl,color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"编辑"}),(0,a.jsx)("button",{onClick:()=>tz(e.slug),style:{padding:"0.5rem 1rem",backgroundColor:"#C17A5F",color:"white",border:"none",borderRadius:"8px",cursor:"pointer",fontSize:"0.875rem",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"删除"})]})})]},e.slug))})]})})]}),"media-library"===B&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:to?"1rem":"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h2",{style:{color:tl,marginBottom:"2rem",fontSize:to?"1.5rem":"1.75rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"媒体库"}),(0,a.jsxs)("div",{style:{marginBottom:"2rem",padding:to?"1rem":"2rem",backgroundColor:td,borderRadius:tm},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h3",{style:{marginBottom:"1rem",color:tl,fontSize:to?"1.2rem":"1.3rem"},className:"jsx-4754611355ff0f67",children:"上传新图片"}),(0,a.jsxs)("div",{style:{display:"grid",gap:to?"0.75rem":"1rem",gridTemplateColumns:to?"1fr":"auto auto",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(console.log("File selected:",null==s?void 0:s.name,"Size:",null==s?void 0:s.size,"Type:",null==s?void 0:s.type),s&&s.size>10485760){D("文件大小不能超过10MB，请选择较小的图片"),setTimeout(()=>D(""),3e3),e.target.value="",k(null),z("");return}if(s){k(s);let e=new FileReader;e.onload=e=>{var t;console.log("FileReader loaded, preview length:",null===(t=e.target.result)||void 0===t?void 0:t.length),z(e.target.result)},e.onerror=e=>console.error("FileReader error:",e),e.readAsDataURL(s)}else console.log("No file selected")},style:{display:"none"},id:"file-upload",className:"jsx-4754611355ff0f67"}),(0,a.jsx)("label",{htmlFor:"file-upload",style:{padding:"0.75rem 1.5rem",backgroundColor:tl,color:"white",borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)"},className:"jsx-4754611355ff0f67",children:"选择图片 (最大50MB)"}),C&&(0,a.jsx)("button",{onClick:()=>tp(C),disabled:S,style:{padding:"0.75rem 1.5rem",backgroundColor:S?"#ccc":tl,color:"white",border:"none",borderRadius:tm,cursor:S?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:S?"上传中...":"上传"})]}),C&&(0,a.jsxs)("div",{style:{marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:_,alt:"预览",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:tm},className:"jsx-4754611355ff0f67"}),(0,a.jsxs)("div",{style:{marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"图片名称"}),(0,a.jsx)("input",{type:"text",value:X,onChange:e=>K(e.target.value),placeholder:"输入图片名称（可选）",style:{width:"100%",padding:"0.5rem",border:"2px solid #e0e0e0",borderRadius:"8px",fontSize:"0.9rem",transition:"all 0.3s ease"},onFocus:e=>{e.target.style.borderColor=tl,e.target.style.boxShadow="0 0 0 3px ".concat(tl,"20")},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},className:"jsx-4754611355ff0f67"})]})]})]}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:to?"repeat(auto-fill, minmax(150px, 1fr))":"repeat(auto-fill, minmax(200px, 1fr))",gap:"1.5rem",padding:"1rem 0"},className:"jsx-4754611355ff0f67",children:d.map((e,t)=>{let s=J.find(t=>t.file_path===e),r=tW(e),o=Z===e,i=null==s?void 0:s.id;return i||console.log("⚠️ No metadata found for image:",e,"Available metadata:",J.length),(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tm,border:"2px solid ".concat(tl,"30"),overflow:"hidden",transition:"all 0.3s ease",cursor:"pointer"},onMouseEnter:e=>{e.currentTarget.style.transform="translateY(-4px)",e.currentTarget.style.boxShadow="0 8px 24px rgba(135, 169, 107, 0.2)"},onMouseLeave:e=>{e.currentTarget.style.transform="translateY(0)",e.currentTarget.style.boxShadow="none"},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("div",{style:{position:"relative",width:"100%",paddingTop:"100%",backgroundColor:"#f8f9fa",overflow:"hidden"},onClick:()=>tC(e),className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e,alt:r,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover",transition:"transform 0.3s ease"},onMouseEnter:e=>{e.target.style.transform="scale(1.05)"},onMouseLeave:e=>{e.target.style.transform="scale(1)"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.7) 100%)",opacity:0,transition:"opacity 0.3s ease",display:"flex",alignItems:"flex-end",padding:"0.5rem"},onMouseEnter:e=>{e.currentTarget.style.opacity="1"},onMouseLeave:e=>{e.currentTarget.style.opacity="0"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("span",{style:{color:"white",fontSize:"0.75rem",fontWeight:"500"},className:"jsx-4754611355ff0f67",children:"点击复制链接"})})]}),(0,a.jsxs)("div",{style:{padding:"1rem"},className:"jsx-4754611355ff0f67",children:[o?(0,a.jsx)("div",{style:{marginBottom:"0.75rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("input",{type:"text",value:Q,onChange:e=>V(e.target.value),onKeyDown:e=>{"Enter"!==e.key||et?"Escape"===e.key&&(G(null),V("")):tI(i,Q)},onBlur:()=>{!et&&Q.trim()?tI(i,Q):et||(G(null),V(""))},disabled:et,placeholder:et?"保存中...":"输入新名称",style:{width:"100%",padding:"0.5rem",border:"2px solid ".concat(et?"#ccc":tl),borderRadius:"6px",fontSize:"0.9rem",fontWeight:"500",backgroundColor:et?"#f8f9fa":"white",opacity:et?.7:1},autoFocus:!0,className:"jsx-4754611355ff0f67"})}):(0,a.jsxs)("div",{style:{marginBottom:"0.75rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{fontSize:"0.9rem",fontWeight:"600",color:"#333",marginBottom:"0.25rem",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",cursor:"text"},onClick:t=>{t.stopPropagation(),G(e),V(r)},title:"点击重命名",className:"jsx-4754611355ff0f67",children:r}),(0,a.jsx)("div",{style:{fontSize:"0.75rem",color:"#999",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e,className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),tC(e)},style:{flex:1,padding:"0.5rem",backgroundColor:F===e?"#28a745":tl,color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:F===e?"已复制!":"复制"}),i?(0,a.jsx)("button",{onClick:t=>{t.stopPropagation(),et||(G(e),V(r))},disabled:et,style:{flex:1,padding:"0.5rem",backgroundColor:et?"#e9ecef":"#f8f9fa",color:et?"#6c757d":"#333",border:"1px solid ".concat(et?"#dee2e6":tl,"50"),borderRadius:"6px",cursor:et?"not-allowed":"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease",opacity:et?.6:1},className:"jsx-4754611355ff0f67",children:et?"保存中...":"重命名"}):(0,a.jsx)("button",{onClick:async t=>{t.stopPropagation(),await tF(e,e.split("/").pop(),0,"image/unknown")},style:{flex:1,padding:"0.5rem",backgroundColor:"#ffc107",color:"#212529",border:"1px solid #e0a800",borderRadius:"6px",cursor:"pointer",fontSize:"0.75rem",fontWeight:"500",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"创建元数据"})]})]})]},t)})}),$&&(0,a.jsx)("div",{style:{textAlign:"center",padding:"2rem",color:"#666"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("div",{style:{marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"加载媒体库中..."})}),!$&&0===d.length&&(0,a.jsxs)("div",{style:{textAlign:"center",padding:"3rem",color:"#666"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCF7"}),(0,a.jsx)("div",{style:{fontSize:"1.1rem",marginBottom:"0.5rem"},className:"jsx-4754611355ff0f67",children:"还没有上传任何图片"}),(0,a.jsx)("div",{style:{fontSize:"0.9rem"},className:"jsx-4754611355ff0f67",children:"点击上方按钮开始上传"})]})]}),"atmosphere"===B&&(0,a.jsx)(AtmosphereImageManager,{mediaMetadata:J,onAtmosphereChange:()=>{tT()},loading:$}),"security"===B&&(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",boxShadow:"0 8px 32px rgba(0,0,0,0.08)",animation:"fadeIn 0.4s ease",maxWidth:"600px",margin:"0 auto"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h2",{style:{fontSize:"1.5rem",fontWeight:"600",color:tn,marginBottom:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDD12 安全设置"}),(0,a.jsxs)("form",{onSubmit:tB,style:{display:"flex",flexDirection:"column",gap:"1.5rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"当前密码"}),(0,a.jsx)("input",{type:"password",value:P.oldPassword,onChange:e=>E({...P,oldPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=tl,e.target.style.boxShadow="0 0 0 3px ".concat(tl,"20")},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"输入当前密码",disabled:O,required:!0,className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"新密码"}),(0,a.jsx)("input",{type:"password",value:P.newPassword,onChange:e=>E({...P,newPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=tl,e.target.style.boxShadow="0 0 0 3px ".concat(tl,"20")},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"输入新密码（至少6位字符）",disabled:O,required:!0,minLength:6,className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",color:"#333",fontWeight:"500",fontSize:"0.95rem"},className:"jsx-4754611355ff0f67",children:"确认新密码"}),(0,a.jsx)("input",{type:"password",value:P.confirmPassword,onChange:e=>E({...P,confirmPassword:e.target.value}),style:{width:"100%",padding:"1rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",transition:"all 0.3s ease",backgroundColor:"white"},onFocus:e=>{e.target.style.borderColor=tl,e.target.style.boxShadow="0 0 0 3px ".concat(tl,"20")},onBlur:e=>{e.target.style.borderColor="#e0e0e0",e.target.style.boxShadow="none"},placeholder:"再次输入新密码",disabled:O,required:!0,minLength:6,className:"jsx-4754611355ff0f67"})]}),P.newPassword&&(0,a.jsx)("div",{style:{fontSize:"0.875rem",color:P.newPassword.length>=6?"#52c41a":"#ff4d4f",marginTop:"-0.5rem"},className:"jsx-4754611355ff0f67",children:P.newPassword.length>=6?"✅ 密码强度符合要求":"❌ 密码至少需要6位字符"}),M&&(0,a.jsx)("div",{style:{backgroundColor:"#fee",color:"#c53030",padding:"1rem",borderRadius:tm,fontSize:"0.9rem",textAlign:"center"},className:"jsx-4754611355ff0f67",children:M}),H&&(0,a.jsx)("div",{style:{backgroundColor:"#f0f9ff",color:"#1e40af",padding:"1rem",borderRadius:tm,fontSize:"0.9rem",textAlign:"center",border:"1px solid #3b82f6"},className:"jsx-4754611355ff0f67",children:H}),(0,a.jsx)("button",{type:"submit",disabled:O,style:{width:"100%",padding:"1rem",backgroundColor:O?"#ccc":tl,color:"white",border:"none",borderRadius:tm,fontSize:"1.1rem",fontWeight:"600",cursor:O?"not-allowed":"pointer",transition:"all 0.3s ease",boxShadow:O?"none":"0 8px 32px ".concat(tl,"30%")},className:"jsx-4754611355ff0f67",children:O?"修改中...":"修改密码"})]}),(0,a.jsxs)("div",{style:{marginTop:"2rem",padding:"1.5rem",backgroundColor:td,borderRadius:tm,border:"1px solid ".concat(tl,"30")},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h4",{style:{color:tl,marginBottom:"1rem",fontSize:"1.1rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDD10 安全提示"}),(0,a.jsxs)("ul",{style:{margin:0,paddingLeft:"1.5rem",color:"#666",fontSize:"0.9rem",lineHeight:"1.6"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("li",{className:"jsx-4754611355ff0f67",children:"密码修改成功后，系统将自动退出登录"}),(0,a.jsx)("li",{className:"jsx-4754611355ff0f67",children:"请使用新密码重新登录管理后台"}),(0,a.jsx)("li",{className:"jsx-4754611355ff0f67",children:"建议定期更换密码以确保账户安全"}),(0,a.jsx)("li",{className:"jsx-4754611355ff0f67",children:"密码长度至少为6位字符"})]})]})]})]})]}),ev&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",width:"90%",maxWidth:"600px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h3",{style:{color:tl,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"编辑植物信息"}),(0,a.jsxs)("form",{onSubmit:t_,style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"植物名称"}),(0,a.jsx)("input",{type:"text",value:eC.title,onChange:e=>ek({...eC,title:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"拉丁学名"}),(0,a.jsx)("input",{type:"text",value:eC.scientific_name,onChange:e=>ek({...eC,scientific_name:e.target.value}),required:!0,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"安全性"}),(0,a.jsxs)("select",{value:eC.toxicity_level,onChange:e=>ek({...eC,toxicity_level:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("option",{value:"Safe",className:"jsx-4754611355ff0f67",children:"安全 (Safe)"}),(0,a.jsx)("option",{value:"Caution",className:"jsx-4754611355ff0f67",children:"注意 (Caution)"}),(0,a.jsx)("option",{value:"Toxic",className:"jsx-4754611355ff0f67",children:"有毒 (Toxic)"})]})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"养育难度"}),(0,a.jsxs)("select",{value:eC.care_difficulty,onChange:e=>ek({...eC,care_difficulty:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("option",{value:"Easy",className:"jsx-4754611355ff0f67",children:"简单 (Easy)"}),(0,a.jsx)("option",{value:"Moderate",className:"jsx-4754611355ff0f67",children:"中等 (Moderate)"}),(0,a.jsx)("option",{value:"Difficult",className:"jsx-4754611355ff0f67",children:"困难 (Difficult)"})]})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"详细描述"}),(0,a.jsx)("textarea",{value:eC.summary,onChange:e=>ek({...eC,summary:e.target.value}),rows:3,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",resize:"vertical"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"植物图片"}),(0,a.jsxs)("div",{style:{display:"grid",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(e6||eC.image)&&(0,a.jsxs)("div",{style:{position:"relative"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e6||eC.image,alt:"植物图片预览",style:{width:"200px",height:"200px",objectFit:"cover",borderRadius:tm,border:"2px solid #e0e0e0"},className:"jsx-4754611355ff0f67"}),eC.image&&(0,a.jsx)("div",{style:{position:"absolute",bottom:"8px",left:"8px",backgroundColor:"rgba(0,0,0,0.7)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"0.75rem"},className:"jsx-4754611355ff0f67",children:eC.image})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem",flexWrap:"wrap"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&th(s,!0)},style:{display:"none"},id:"edit-plant-image-upload",className:"jsx-4754611355ff0f67"}),(0,a.jsx)("label",{htmlFor:"edit-plant-image-upload",style:{padding:"0.75rem 1.5rem",backgroundColor:tl,color:"white",borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 12px rgba(135, 169, 107, 0.3)",display:"inline-block"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCC1 本地上传"}),(0,a.jsx)("button",{type:"button",onClick:()=>e8(!0),style:{padding:"0.75rem 1.5rem",backgroundColor:tc,color:"#333",border:"none",borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",fontSize:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDDBC️ 从媒体库选择"})]}),e5&&(0,a.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("button",{type:"button",onClick:()=>tx(e5,!0),disabled:e4||!eC.title,style:{padding:"0.75rem 1.5rem",backgroundColor:e4||!eC.title?"#ccc":tl,color:"white",border:"none",borderRadius:tm,cursor:e4||!eC.title?"not-allowed":"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:e4?"上传中...":"上传为 ".concat(eC.title?tu(eC.title,e5):"请先填写植物名称")}),(0,a.jsxs)("span",{style:{fontSize:"0.875rem",color:"#666"},className:"jsx-4754611355ff0f67",children:["文件: ",e5.name]})]}),(0,a.jsx)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("input",{type:"text",placeholder:"或直接输入图片URL...",value:eC.image,onChange:e=>ek({...eC,image:e.target.value}),style:{flex:1,padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})})]})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"护理技巧"}),(0,a.jsx)("textarea",{value:eC.care_tips,onChange:e=>ek({...eC,care_tips:e.target.value}),rows:2,style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem",resize:"vertical"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"水分需求"}),(0,a.jsx)("input",{type:"text",value:eC.water_needs,onChange:e=>ek({...eC,water_needs:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"光照需求"}),(0,a.jsx)("input",{type:"text",value:eC.light_needs,onChange:e=>ek({...eC,light_needs:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"温度要求"}),(0,a.jsx)("input",{type:"text",value:eC.temperature,onChange:e=>ek({...eC,temperature:e.target.value}),style:{width:"100%",padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"})]}),(0,a.jsxs)("div",{className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("label",{style:{display:"block",marginBottom:"0.5rem",fontWeight:"500",color:"#333"},className:"jsx-4754611355ff0f67",children:"萌宠时刻图片"}),(0,a.jsxs)("div",{style:{display:"flex",gap:"0.5rem",alignItems:"center"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("input",{type:"text",value:eC.pet_moment,onChange:e=>ek({...eC,pet_moment:e.target.value}),placeholder:"输入猫咪与植物合影的图片路径...",style:{flex:1,padding:"0.75rem",border:"2px solid #e0e0e0",borderRadius:tm,fontSize:"1rem"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("button",{type:"button",onClick:()=>tr(!0),style:{padding:"0.75rem 1rem",backgroundColor:tc,color:"#333",border:"none",borderRadius:tm,cursor:"pointer",transition:"all 0.3s ease",fontSize:"0.875rem",whiteSpace:"nowrap"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDC31 选择猫咪氛围图"})]})]}),(0,a.jsxs)("div",{style:{display:"flex",gap:"1rem",marginTop:"1rem"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("button",{type:"submit",disabled:e_,style:{flex:1,padding:"1rem",backgroundColor:tl,color:"white",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:e_?"not-allowed":"pointer",opacity:e_?.7:1,transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:e_?"保存中...":"保存更改"}),(0,a.jsx)("button",{type:"button",onClick:()=>ew(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})]})]})]})}),eQ&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h3",{style:{color:tl,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"从媒体库选择图片"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:d.filter(e=>e.includes("/uploads/")).map((e,t)=>(0,a.jsxs)("div",{onClick:()=>tg(e,!1),style:{cursor:"pointer",borderRadius:tm,overflow:"hidden",border:e$===e?"3px solid ".concat(tl):"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e,alt:"媒体库图片 ".concat(t),style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("div",{style:{padding:"0.5rem",backgroundColor:td,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},t))}),(0,a.jsx)("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("button",{onClick:()=>eV(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),e2&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",width:"90%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h3",{style:{color:tl,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"从媒体库选择图片"}),(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(150px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:d.filter(e=>e.includes("/uploads/")).map((e,t)=>(0,a.jsxs)("div",{onClick:()=>tg(e,!0),style:{cursor:"pointer",borderRadius:tm,overflow:"hidden",border:e9===e?"3px solid ".concat(tl):"2px solid #e0e0e0",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e,alt:"媒体库图片 ".concat(t),style:{width:"100%",height:"120px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("div",{style:{padding:"0.5rem",backgroundColor:td,fontSize:"0.75rem",color:"#666",wordBreak:"break-all"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},t))}),(0,a.jsx)("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("button",{onClick:()=>e8(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),ta&&(0,a.jsx)("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},className:"jsx-4754611355ff0f67",children:(0,a.jsxs)("div",{style:{backgroundColor:"white",borderRadius:tf,padding:"2rem",width:"90%",maxWidth:"900px",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 16px 48px rgba(0,0,0,0.2)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("h3",{style:{color:tl,marginBottom:"1.5rem",fontSize:"1.5rem",fontWeight:"600"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDC31 选择猫咪氛围图"}),0===tt.length?(0,a.jsxs)("div",{style:{textAlign:"center",padding:"3rem",backgroundColor:td,borderRadius:tm,color:"#666"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("div",{style:{fontSize:"3rem",marginBottom:"1rem"},className:"jsx-4754611355ff0f67",children:"\uD83D\uDCF8"}),(0,a.jsx)("p",{className:"jsx-4754611355ff0f67",children:"还没有上传猫咪图片哦！"}),(0,a.jsxs)("p",{style:{fontSize:"0.875rem",marginTop:"0.5rem"},className:"jsx-4754611355ff0f67",children:["请将猫咪与植物的合影图片上传到 ",(0,a.jsx)("code",{className:"jsx-4754611355ff0f67",children:"/public/images/pets/"})," 目录"]})]}):(0,a.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(180px, 1fr))",gap:"1rem",marginBottom:"2rem"},className:"jsx-4754611355ff0f67",children:tt.map((e,t)=>(0,a.jsxs)("div",{onClick:()=>ty(e),style:{cursor:"pointer",borderRadius:tm,overflow:"hidden",border:eC.pet_moment===e?"3px solid ".concat(tl):"2px solid #e0e0e0",transition:"all 0.3s ease",transform:eC.pet_moment===e?"scale(1.05)":"scale(1)"},className:"jsx-4754611355ff0f67",children:[(0,a.jsx)("img",{src:e,alt:"猫咪图片 ".concat(t+1),style:{width:"100%",height:"140px",objectFit:"cover"},className:"jsx-4754611355ff0f67"}),(0,a.jsx)("div",{style:{padding:"0.75rem",backgroundColor:td,fontSize:"0.75rem",color:"#666",wordBreak:"break-all",textAlign:"center"},className:"jsx-4754611355ff0f67",children:e.split("/").pop()})]},t))}),(0,a.jsx)("div",{style:{display:"flex",gap:"1rem"},className:"jsx-4754611355ff0f67",children:(0,a.jsx)("button",{onClick:()=>tr(!1),style:{flex:1,padding:"1rem",backgroundColor:"#ccc",color:"#333",border:"none",borderRadius:tm,fontSize:"1rem",fontWeight:"500",cursor:"pointer",transition:"all 0.3s ease"},className:"jsx-4754611355ff0f67",children:"取消"})})]})}),(0,a.jsx)(o(),{id:"4754611355ff0f67",children:"@-webkit-keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);transform:translatey(0)}}@-moz-keyframes fadeIn{from{opacity:0;-moz-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-moz-transform:translatey(0);transform:translatey(0)}}@-o-keyframes fadeIn{from{opacity:0;-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-o-transform:translatey(0);transform:translatey(0)}}@keyframes fadeIn{from{opacity:0;-webkit-transform:translatey(20px);-moz-transform:translatey(20px);-o-transform:translatey(20px);transform:translatey(20px)}to{opacity:1;-webkit-transform:translatey(0);-moz-transform:translatey(0);-o-transform:translatey(0);transform:translatey(0)}}@-webkit-keyframes slideIn{from{opacity:0;-webkit-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideIn{from{opacity:0;-moz-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideIn{from{opacity:0;-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideIn{from{opacity:0;-webkit-transform:translatex(-20px);-moz-transform:translatex(-20px);-o-transform:translatex(-20px);transform:translatex(-20px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}@-webkit-keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-webkit-transform:translatex(0);transform:translatex(0)}}@-moz-keyframes slideInRight{from{opacity:0;-moz-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-moz-transform:translatex(0);transform:translatex(0)}}@-o-keyframes slideInRight{from{opacity:0;-o-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-o-transform:translatex(0);transform:translatex(0)}}@keyframes slideInRight{from{opacity:0;-webkit-transform:translatex(20px);-moz-transform:translatex(20px);-o-transform:translatex(20px);transform:translatex(20px)}to{opacity:1;-webkit-transform:translatex(0);-moz-transform:translatex(0);-o-transform:translatex(0);transform:translatex(0)}}.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:4;-moz-column-count:4;column-count:4;-webkit-column-gap:1rem;-moz-column-gap:1rem;column-gap:1rem}@media(max-width:1200px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:3;-moz-column-count:3;column-count:3}}@media(max-width:768px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:2;-moz-column-count:2;column-count:2}}@media(max-width:480px){.waterfall-grid.jsx-4754611355ff0f67{-webkit-column-count:1;-moz-column-count:1;column-count:1}}"})]})}},1479:function(){},1163:function(e,t,s){e.exports=s(6036)}},function(e){e.O(0,[888,774,179],function(){return e(e.s=4730)}),_N_E=e.O()}]);