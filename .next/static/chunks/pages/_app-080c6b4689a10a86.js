(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{3454:function(e,t,n){"use strict";var r,o;e.exports=(null==(r=n.g.process)?void 0:r.env)&&"object"==typeof(null==(o=n.g.process)?void 0:o.env)?n.g.process:n(7663)},1118:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return n(3408)}])},6101:function(e,t){"use strict";var n,r,o,l;Object.defineProperty(t,"__esModule",{value:!0}),function(e,t){for(var n in t)Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}(t,{ACTION_FAST_REFRESH:function(){return f},ACTION_NAVIGATE:function(){return a},ACTION_PREFETCH:function(){return u},ACTION_REFRESH:function(){return i},ACTION_RESTORE:function(){return s},ACTION_SERVER_ACTION:function(){return d},ACTION_SERVER_PATCH:function(){return c},PrefetchCacheEntryStatus:function(){return r},PrefetchKind:function(){return n},isThenable:function(){return p}});let i="refresh",a="navigate",s="restore",c="server-patch",u="prefetch",f="fast-refresh",d="server-action";function p(e){return e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}(o=n||(n={})).AUTO="auto",o.FULL="full",o.TEMPORARY="temporary",(l=r||(r={})).fresh="fresh",l.reusable="reusable",l.expired="expired",l.stale="stale",("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7670:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"getDomainLocale",{enumerable:!0,get:function(){return o}});let r=n(1297);function o(e,t,o,l){{let i=n(7969).normalizeLocalePath,a=n(7448).detectDomainLocale,s=t||i(e,o).detectedLocale,c=a(l,void 0,s);if(c){let t="http"+(c.http?"":"s")+"://",n=s===c.defaultLocale?"":"/"+s;return""+t+c.domain+(0,r.normalizePathTrailingSlash)(""+n+e)}return!1}}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},4116:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return b}});let r=n(8754),o=n(5893),l=r._(n(7294)),i=n(9975),a=n(2712),s=n(8547),c=n(4350),u=n(8109),f=n(4494),d=n(5716),p=n(388),h=n(7670),v=n(6220),m=n(6101),g=new Set;function y(e,t,n,r,o,l){if(l||(0,a.isLocalURL)(t)){if(!r.bypassPrefetchedCheck){let o=t+"%"+n+"%"+(void 0!==r.locale?r.locale:"locale"in e?e.locale:void 0);if(g.has(o))return;g.add(o)}Promise.resolve(l?e.prefetch(t,o):e.prefetch(t,n,r)).catch(e=>{})}}function x(e){return"string"==typeof e?e:(0,s.formatUrl)(e)}let b=l.default.forwardRef(function(e,t){let n,r;let{href:s,as:g,children:b,prefetch:j=null,passHref:w,replace:_,shallow:E,scroll:C,locale:P,onClick:S,onMouseEnter:T,onTouchStart:D,legacyBehavior:L=!1,...k}=e;n=b,L&&("string"==typeof n||"number"==typeof n)&&(n=(0,o.jsx)("a",{children:n}));let O=l.default.useContext(f.RouterContext),N=l.default.useContext(d.AppRouterContext),M=null!=O?O:N,A=!O,R=!1!==j,I=null===j?m.PrefetchKind.AUTO:m.PrefetchKind.FULL,{href:U,as:z}=l.default.useMemo(()=>{if(!O){let e=x(s);return{href:e,as:g?x(g):e}}let[e,t]=(0,i.resolveHref)(O,s,!0);return{href:e,as:g?(0,i.resolveHref)(O,g):t||e}},[O,s,g]),F=l.default.useRef(U),B=l.default.useRef(z);L&&(r=l.default.Children.only(n));let K=L?r&&"object"==typeof r&&r.ref:t,[W,H,V]=(0,p.useIntersection)({rootMargin:"200px"}),X=l.default.useCallback(e=>{(B.current!==z||F.current!==U)&&(V(),B.current=z,F.current=U),W(e),K&&("function"==typeof K?K(e):"object"==typeof K&&(K.current=e))},[z,K,U,V,W]);l.default.useEffect(()=>{M&&H&&R&&y(M,U,z,{locale:P},{kind:I},A)},[z,U,H,P,R,null==O?void 0:O.locale,M,A,I]);let Y={ref:X,onClick(e){L||"function"!=typeof S||S(e),L&&r.props&&"function"==typeof r.props.onClick&&r.props.onClick(e),M&&!e.defaultPrevented&&function(e,t,n,r,o,i,s,c,u){let{nodeName:f}=e.currentTarget;if("A"===f.toUpperCase()&&(function(e){let t=e.currentTarget.getAttribute("target");return t&&"_self"!==t||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)||!u&&!(0,a.isLocalURL)(n)))return;e.preventDefault();let d=()=>{let e=null==s||s;"beforePopState"in t?t[o?"replace":"push"](n,r,{shallow:i,locale:c,scroll:e}):t[o?"replace":"push"](r||n,{scroll:e})};u?l.default.startTransition(d):d()}(e,M,U,z,_,E,C,P,A)},onMouseEnter(e){L||"function"!=typeof T||T(e),L&&r.props&&"function"==typeof r.props.onMouseEnter&&r.props.onMouseEnter(e),M&&(R||!A)&&y(M,U,z,{locale:P,priority:!0,bypassPrefetchedCheck:!0},{kind:I},A)},onTouchStart:function(e){L||"function"!=typeof D||D(e),L&&r.props&&"function"==typeof r.props.onTouchStart&&r.props.onTouchStart(e),M&&(R||!A)&&y(M,U,z,{locale:P,priority:!0,bypassPrefetchedCheck:!0},{kind:I},A)}};if((0,c.isAbsoluteUrl)(z))Y.href=z;else if(!L||w||"a"===r.type&&!("href"in r.props)){let e=void 0!==P?P:null==O?void 0:O.locale,t=(null==O?void 0:O.isLocaleDomain)&&(0,h.getDomainLocale)(z,e,null==O?void 0:O.locales,null==O?void 0:O.domainLocales);Y.href=t||(0,v.addBasePath)((0,u.addLocale)(z,e,null==O?void 0:O.defaultLocale))}return L?l.default.cloneElement(r,Y):(0,o.jsx)("a",{...k,...Y,children:n})});("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},7969:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"normalizeLocalePath",{enumerable:!0,get:function(){return r}});let r=(e,t)=>n(5934).normalizeLocalePath(e,t);("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},388:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useIntersection",{enumerable:!0,get:function(){return s}});let r=n(7294),o=n(460),l="function"==typeof IntersectionObserver,i=new Map,a=[];function s(e){let{rootRef:t,rootMargin:n,disabled:s}=e,c=s||!l,[u,f]=(0,r.useState)(!1),d=(0,r.useRef)(null),p=(0,r.useCallback)(e=>{d.current=e},[]);return(0,r.useEffect)(()=>{if(l){if(c||u)return;let e=d.current;if(e&&e.tagName)return function(e,t,n){let{id:r,observer:o,elements:l}=function(e){let t;let n={root:e.root||null,margin:e.rootMargin||""},r=a.find(e=>e.root===n.root&&e.margin===n.margin);if(r&&(t=i.get(r)))return t;let o=new Map;return t={id:n,observer:new IntersectionObserver(e=>{e.forEach(e=>{let t=o.get(e.target),n=e.isIntersecting||e.intersectionRatio>0;t&&n&&t(n)})},e),elements:o},a.push(n),i.set(n,t),t}(n);return l.set(e,t),o.observe(e),function(){if(l.delete(e),o.unobserve(e),0===l.size){o.disconnect(),i.delete(r);let e=a.findIndex(e=>e.root===r.root&&e.margin===r.margin);e>-1&&a.splice(e,1)}}}(e,e=>e&&f(e),{root:null==t?void 0:t.current,rootMargin:n})}else if(!u){let e=(0,o.requestIdleCallback)(()=>f(!0));return()=>(0,o.cancelIdleCallback)(e)}},[c,n,t,u,d.current]),[p,u,(0,r.useCallback)(()=>{f(!1)},[])]}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},3408:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var r=n(5893);n(3950);var o=n(1664),l=n.n(o),i=n(9008),a=n.n(i),s=n(7294),c=n(3454);function u(e){let{Component:t,pageProps:n}=e,[o,i]=(0,s.useState)(""),[u,f]=(0,s.useState)([]),[d,p]=(0,s.useState)([]),[h,v]=(0,s.useState)([]),[m,g]=(0,s.useState)([]),[y,x]=(0,s.useState)({safe:!1,toxic:!1,caution:!1}),[b,j]=(0,s.useState)(!1),[w,_]=(0,s.useState)(""),E=async()=>{try{let e=await fetch("/api/plants"),t=((await e.json()).plants||[]).map(e=>({slug:e.slug,title:String(e.title||""),scientific_name:String(e.scientific_name||""),toxicity_level:String(e.toxicity_level||"")})),n=o.trim().toLowerCase();if(!n)return;let r=t.filter(e=>e.title.toLowerCase().includes(n)||e.scientific_name.toLowerCase().includes(n)||e.slug.toLowerCase().includes(n))[0];r&&(window.location.href="/plants/"+r.slug)}catch(e){}};(0,s.useEffect)(()=>{let e=e=>{"Enter"===e.key&&document.activeElement&&"global-search-input"===document.activeElement.id&&E()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[o]),(0,s.useEffect)(()=>{console.log("\uD83D\uDE80 PawSafePlants 启动中..."),console.log("\uD83D\uDCC1 环境配置检查:"),console.log("   NEXT_PUBLIC_SUPABASE_URL: ".concat("✅ 已配置")),console.log("   SUPABASE_SERVICE_ROLE_KEY: ".concat(c.env.SUPABASE_SERVICE_ROLE_KEY?"✅ 已配置":"❌ 缺失")),(async()=>{try{console.log("\uD83C\uDF3F 加载植物数据...");let e=(await (await fetch("/api/plants")).json()).plants||[];console.log("✅ 成功加载 ".concat(e.length," 个植物数据")),f(e);let t=e=>String(e||"").toLowerCase();p(e.filter(e=>t(e.toxicity_level).includes("safe"))),v(e.filter(e=>{let n=t(e.toxicity_level);return n.includes("danger")||n.includes("extreme")||n.includes("toxic")||n.includes("fatal")})),g(e.filter(e=>{let n=t(e.toxicity_level),r=n.includes("safe"),o=n.includes("danger")||n.includes("extreme")||n.includes("toxic")||n.includes("fatal");return!r&&!o})),console.log("\uD83D\uDD0D 测试数据库连接..."),(await fetch("/api/site-config")).ok?console.log("✅ 数据库连接正常"):console.log("❌ 数据库连接异常")}catch(e){console.error("❌ 数据加载失败:",e.message)}})(),(async()=>{try{let e=await (await fetch("/api/site-config")).json(),t=String((e||{}).logo||"");_(t),console.log("\uD83C\uDFA8 网站配置加载完成")}catch(e){}})();let e=()=>{try{j(window.innerWidth<=767)}catch(e){}};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);let C=e=>{x(t=>({...t,[e]:!t[e]}))};return(0,r.jsxs)("div",{className:"app-container",children:[(0,r.jsxs)(a(),{children:[(0,r.jsx)("title",{children:"PawSafePlants - Cat-Safe Plants Guide"}),(0,r.jsx)("meta",{name:"description",content:"Complete guide to cat-safe plants. Keep your feline friends safe with our comprehensive plant toxicity database."}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.svg",type:"image/svg+xml"}),(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico",sizes:"32x32"}),(0,r.jsx)("link",{rel:"apple-touch-icon",href:"/icon.png"}),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.googleapis.com"}),(0,r.jsx)("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossOrigin:"anonymous"}),(0,r.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Inter:wght@400;500;600;700&display=swap",rel:"stylesheet"})]}),(0,r.jsxs)("header",{className:"header",children:[(0,r.jsxs)("div",{className:"header-inner",children:[w?(0,r.jsxs)(l(),{href:"/",className:"logo",children:[(0,r.jsx)("img",{src:w,alt:"PawSafePlants",style:{height:72,width:"auto",display:"block",mixBlendMode:"screen",position:"relative",zIndex:2}}),(0,r.jsx)("span",{style:{marginLeft:-14,fontWeight:800,fontSize:22,color:"#fff",position:"relative",zIndex:1,textShadow:"0 1px 2px rgba(0,0,0,0.35)"},children:"PawSafePlants"})]}):(0,r.jsx)(l(),{href:"/",className:"logo",style:{fontWeight:700,fontSize:20},children:"\uD83D\uDC3E PawSafePlants"}),(0,r.jsxs)("div",{className:"search-box",children:[(0,r.jsx)("input",{id:"global-search-input",type:"text",placeholder:"Search plants by name or scientific name...",value:o,onChange:e=>i(e.target.value)}),(0,r.jsx)("button",{type:"button",onClick:E,"aria-label":"Search",children:(0,r.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",children:[(0,r.jsx)("circle",{cx:"11",cy:"11",r:"7",stroke:"#fff",strokeWidth:"2"}),(0,r.jsx)("path",{d:"M20 20l-3-3",stroke:"#fff",strokeWidth:"2",strokeLinecap:"round"})]})})]})]}),(0,r.jsxs)("nav",{className:"nav-menu",children:[(0,r.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{b||x(e=>({...e,safe:!0}))},onMouseLeave:()=>{b||x(e=>({...e,safe:!1}))},children:[(0,r.jsx)(l(),{href:"/plants/safe",className:"nav-item",onClick:e=>{b&&(e.preventDefault(),C("safe"))},children:"Cat-Safe Plants \uD83C\uDF38"}),y.safe&&(0,r.jsx)("div",{className:"dropdown",children:d.map(e=>(0,r.jsx)(l(),{href:"/plants/".concat(e.slug),className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),(0,r.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{b||x(e=>({...e,toxic:!0}))},onMouseLeave:()=>{b||x(e=>({...e,toxic:!1}))},children:[(0,r.jsx)(l(),{href:"/plants/toxic",className:"nav-item",onClick:e=>{b&&(e.preventDefault(),C("toxic"))},children:"Toxic Plants \uD83D\uDEAB"}),y.toxic&&(0,r.jsx)("div",{className:"dropdown",children:h.map(e=>(0,r.jsx)(l(),{href:"/plants/".concat(e.slug),className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),(0,r.jsxs)("div",{className:"nav-item-wrapper",onMouseEnter:()=>{b||x(e=>({...e,caution:!0}))},onMouseLeave:()=>{b||x(e=>({...e,caution:!1}))},children:[(0,r.jsx)(l(),{href:"/plants/caution",className:"nav-item",onClick:e=>{b&&(e.preventDefault(),C("caution"))},children:"Moderate Risk ⚠️"}),y.caution&&(0,r.jsx)("div",{className:"dropdown",children:m.map(e=>(0,r.jsx)(l(),{href:"/plants/".concat(e.slug),className:"dropdown-item",children:e.title||e.slug},e.slug))})]}),(0,r.jsx)(l(),{href:"/blog/valentines-day-cat-safe-flowers-guide",className:"nav-item",style:{fontWeight:600,color:"#e91e63"},children:"Latest Stories \uD83D\uDC95"}),(0,r.jsx)(l(),{href:"/cat-safe-flowers",className:"nav-item",style:{fontWeight:600,color:"#10B981"},children:"Safe Bouquets \uD83C\uDF38"}),(0,r.jsx)(l(),{href:"/blog/valentines-day-cat-safe-flowers-guide",className:"nav-item",children:"Blog \uD83D\uDCDD"}),(0,r.jsx)(l(),{href:"/items",className:"nav-item",children:"More Products \uD83C\uDF80"})]})]}),(0,r.jsx)(t,{...n})]})}},3950:function(){},7663:function(e){!function(){var t={229:function(e){var t,n,r,o=e.exports={};function l(){throw Error("setTimeout has not been defined")}function i(){throw Error("clearTimeout has not been defined")}function a(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var s=[],c=!1,u=-1;function f(){c&&r&&(c=!1,r.length?s=r.concat(s):u=-1,s.length&&d())}function d(){if(!c){var e=a(f);c=!0;for(var t=s.length;t;){for(r=s,s=[];++u<t;)r&&r[u].run();u=-1,t=s.length}r=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}o.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];s.push(new p(e,t)),1!==s.length||c||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=h,o.addListener=h,o.once=h,o.off=h,o.removeListener=h,o.removeAllListeners=h,o.emit=h,o.prependListener=h,o.prependOnceListener=h,o.listeners=function(e){return[]},o.binding=function(e){throw Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw Error("process.chdir is not supported")},o.umask=function(){return 0}}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var l=n[e]={exports:{}},i=!0;try{t[e](l,l.exports,r),i=!1}finally{i&&delete n[e]}return l.exports}r.ab="//";var o=r(229);e.exports=o}()},9008:function(e,t,n){e.exports=n(7219)},1664:function(e,t,n){e.exports=n(4116)}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[774,179],function(){return t(1118),t(6036)}),_N_E=e.O()}]);